<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å…¨é¢æŒæ¡ï¼SwiftUI2.0ä¸­TabViewçš„çŸ¥è¯†å’Œç”¨æ³•</title>
      <link href="swiftui/swiftui-tabview/"/>
      <url>swiftui/swiftui-tabview/</url>
      
        <content type="html"><![CDATA[<p>ç»å¤§å¤šæ•°Appçš„åº•éƒ¨éƒ½æœ‰Tabbaræ¥åˆ‡æ¢ä¸åŒçš„åŠŸèƒ½ï¼Œåœ¨UIKitæ¡†æ¶ä¸­ä½¿ç”¨<code>UITabbarController</code>æ¥å®ç°è¿™æ ·çš„æ“ä½œï¼Œåˆ°äº†SwiftUIä¸­è¢«<code>TabView</code>å–ä»£äº†ã€‚</p><p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°†å­¦ä¹ å…³äº<code>TabView</code>çš„ä¸€äº›åŸºç¡€çŸ¥è¯†å’Œé«˜é˜¶ç”¨æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬è¿™å‡ ä¸ªä¸»è¦æ–¹é¢ï¼š</p><ol><li>æ€ä¹ˆåˆ›å»º<code>TabView</code></li><li><code>TabView</code>æ¯”<code>UITabbarController</code>çš„ä¼˜åŠ¿</li><li>è‡ªå®šä¹‰TabViewçš„å¤–è§‚</li></ol><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../images/swiftui-tabview/first.png"></p><h1 id="å¼€å§‹ä½¿ç”¨TabView"><a href="#å¼€å§‹ä½¿ç”¨TabView" class="headerlink" title="å¼€å§‹ä½¿ç”¨TabView"></a>å¼€å§‹ä½¿ç”¨<code>TabView</code></h1><h2 id="æœ€åŸºç¡€çš„TabView"><a href="#æœ€åŸºç¡€çš„TabView" class="headerlink" title="æœ€åŸºç¡€çš„TabView"></a>æœ€åŸºç¡€çš„TabView</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TabView</span> &#123;</span><br><span class="line">    <span class="type">ContentView</span>()</span><br><span class="line">    <span class="type">SecondView</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªæœ€ç®€å•çš„<code>TabView</code>ï¼Œå’Œå…¶ä»–å¾ˆå¤šSwiftUIçš„æ§ä»¶ä¸€æ ·TabViewçš„åˆå§‹åŒ–ä¹Ÿæ˜¯æ¥æ”¶ä¸€ä¸ª<code>@ViewBuilder</code>ä¿®é¥°çš„View<code>public init(@ViewBuilder content: () -&gt; Content)</code>ã€‚</p><p>å…¶ä¸­çš„<code>ContentView</code>å’Œ<code>SecondView</code>æ˜¯<code>TabView</code>çš„ä¸¤ä¸ª<code>Tabbar</code>ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬æ²¡æœ‰è®¾ç½®<code>Tabbar</code>çš„å›¾ç‰‡å’Œæ–‡å­—ï¼Œæ­¤æ—¶Appæœ€åº•éƒ¨çš„å¯¼èˆªæ æ˜¯ç©ºçš„ã€‚</p><h2 id="ç»™Tabbarè®¾ç½®å›¾ç‰‡å’Œæ–‡å­—"><a href="#ç»™Tabbarè®¾ç½®å›¾ç‰‡å’Œæ–‡å­—" class="headerlink" title="ç»™Tabbarè®¾ç½®å›¾ç‰‡å’Œæ–‡å­—"></a>ç»™Tabbarè®¾ç½®å›¾ç‰‡å’Œæ–‡å­—</h2><p>å¾—ç›ŠäºSwiftUIçš„å£°æ˜å¼è¯­æ³•ï¼Œæˆ‘ä»¬è®¾ç½®tabbarä¸­æ–‡å­—å’Œå›¾ç‰‡çš„æ•ˆç‡æ¯”UIKité«˜äº†10å€ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TabView</span> &#123;</span><br><span class="line">    <span class="type">ContentView</span>()</span><br><span class="line">        .tabItem &#123; <span class="type">Label</span>(<span class="string">&quot;Menu&quot;</span>, systemImage: <span class="string">&quot;list.dash&quot;</span>) &#125;</span><br><span class="line">    <span class="type">SecondView</span>()</span><br><span class="line">        .tabItem &#123;</span><br><span class="line">            <span class="type">Image</span>(systemName: <span class="string">&quot;square.and.pencil&quot;</span>)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Me&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="../../images/swiftui-tabview/essential-tabview.png"></p><p>ç»™tabbarè®¾ç½®å›¾ç‰‡å’Œæ–‡å­—ä½¿ç”¨çš„æ˜¯<code>tabItem</code><a href="https://www.iosprogrammer.tech/swiftui/swiftui-concept-essential#Modifer">è§†å›¾ä¿®æ”¹å™¨</a>ã€‚</p><p>ç¬¬ä¸€ç§è®¾ç½®æ–‡å­—å’Œå›¾ç‰‡çš„æ–¹æ³•æ˜¯ä½¿ç”¨<code>Label</code>æ§ä»¶ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªæ–‡å­—å’Œä¸€ä¸ªå›¾ç‰‡ä½œä¸ºå‚æ•°æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œç¬¬äºŒç§æ–¹å¼æ˜¯ç›´æ¥ä½¿ç”¨äº†ä¸€æ®µæ–‡å­—å’Œä¸€å¼ å›¾ç‰‡ã€‚</p><p>ç”±äºtabItemä¿®æ”¹å™¨çš„å‚æ•°æ˜¯ä¸€ç»„Viewæ‰€ä»¥åŸåˆ™ä¸Šæ¥è¯´å¯ä»¥ä½¿ç”¨ä»»æ„Viewæ¥è®¾ç½®tabbarçš„æ ·å¼ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Tabbar</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;2&quot;</span>)</span><br><span class="line">            <span class="type">Image</span>(systemName: <span class="string">&quot;square.and.pencil&quot;</span>)</span><br><span class="line">            <span class="type">Image</span>(systemName: <span class="string">&quot;list.dash&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.tabItem &#123;</span><br><span class="line">    <span class="type">Tabbar</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨äº†ä¸€ä¸ªåŒ…å«ä¸¤æ®µæ–‡å­—å’Œä¸¤å¼ å›¾ç‰‡çš„Tabbaræ¥è®¾ç½®<code>tabItem</code>ï¼Œæœ€ç»ˆèƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥çš„æ˜¯<code>Text(&quot;1&quot;)</code>å’Œ<code>Image(systemName: &quot;square.and.pencil&quot;)</code>ï¼Œæ‰€ä»¥tabItemåœ¨å®ç°çš„æ—¶å€™åº”è¯¥æ˜¯ä½¿ç”¨çš„å­è§†å›¾ä¸­çš„ç¬¬ä¸€æ®µæ–‡å­—å’Œç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œä¸”ä¸è®ºæ–‡å­—å’Œå›¾ç‰‡çš„é¡ºåºå¦‚ä½•ï¼Œå®ƒä»¬æœ€ç»ˆå±•ç¤ºå‡ºæ¥çš„ä½ç½®éƒ½ä¸ä¼šå˜ã€‚</p><h1 id="è‡ªå®šä¹‰TabViewå¤–è§‚"><a href="#è‡ªå®šä¹‰TabViewå¤–è§‚" class="headerlink" title="è‡ªå®šä¹‰TabViewå¤–è§‚"></a>è‡ªå®šä¹‰<code>TabView</code>å¤–è§‚</h1><h2 id="ä¿®æ”¹tabViewçš„æ ·å¼"><a href="#ä¿®æ”¹tabViewçš„æ ·å¼" class="headerlink" title="ä¿®æ”¹tabViewçš„æ ·å¼"></a>ä¿®æ”¹tabViewçš„æ ·å¼</h2><p>ä½¿ç”¨<code>tabViewStyle</code>ä¿®æ”¹å™¨æ¥è®¾ç½®ä¸åŒçš„æ ·å¼å¯ä»¥è½»æ˜“æ»¡è¶³ä¸åŒçš„åœºæ™¯éœ€è¦ã€‚</p><table><thead><tr><th>TabViewStyle</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>DefaultTabViewStyle</td><td>é»˜è®¤æ ·å¼ï¼Œæ•ˆæœç±»ä¼¼UITabbarController</td></tr><tr><td>PageTabViewStyle</td><td>æ²¡æœ‰ä¸‹é¢çš„æ ‡ç­¾ï¼Œå¯ä»¥å·¦å³æ»šåŠ¨ï¼Œå¸¸è§äºæ–°é—»App</td></tr></tbody></table><p>ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TabView</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">.tabViewStyle(<span class="type">DefaultTabViewStyle</span>())</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®tabbarItemçš„é€‰ä¸­é¢œè‰²"><a href="#è®¾ç½®tabbarItemçš„é€‰ä¸­é¢œè‰²" class="headerlink" title="è®¾ç½®tabbarItemçš„é€‰ä¸­é¢œè‰²"></a>è®¾ç½®tabbarItemçš„é€‰ä¸­é¢œè‰²</h2><p>ä½¿ç”¨<code>accentColor()</code><a href="https://www.iosprogrammer.tech/swiftui/swiftui-concept-essential#Modifer">ä¿®æ”¹å™¨</a>å¯ä»¥è®¾ç½®tabItemçš„é€‰ä¸­é¢œè‰²ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.tabItem &#123;</span><br><span class="line">    <span class="type">Label</span>(<span class="string">&quot;Menu&quot;</span>, systemImage: <span class="string">&quot;list.dash&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">.accentColor(.green)</span><br></pre></td></tr></table></figure><p><code>accentColor</code>æ˜¯è®¾ç½®Viewé«˜äº®é¢œè‰²çš„ä¿®æ”¹å™¨ï¼Œè®¾ç½®åtabItemåœ¨æœªé€‰ä¸­çŠ¶æ€ä¸‹æ˜¯ç°è‰²ï¼Œé€‰ä¸­åæ˜¯greenç»¿è‰²ã€‚</p><h2 id="å¯¼èˆªæ§åˆ¶å™¨éšè—TabBar"><a href="#å¯¼èˆªæ§åˆ¶å™¨éšè—TabBar" class="headerlink" title="å¯¼èˆªæ§åˆ¶å™¨éšè—TabBar"></a>å¯¼èˆªæ§åˆ¶å™¨éšè—TabBar</h2><h3 id="è‡ªåŠ¨éšè—åº•éƒ¨tabbar"><a href="#è‡ªåŠ¨éšè—åº•éƒ¨tabbar" class="headerlink" title="è‡ªåŠ¨éšè—åº•éƒ¨tabbar"></a>è‡ªåŠ¨éšè—åº•éƒ¨tabbar</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationView</span> &#123;</span><br><span class="line">    <span class="type">TabView</span>(selection: <span class="variable">$tabViewSelection</span>) &#123;</span><br><span class="line">        <span class="type">List</span>(<span class="number">1</span><span class="operator">...</span><span class="number">10</span>, id: \.<span class="keyword">self</span>) &#123;index <span class="keyword">in</span></span><br><span class="line">            <span class="type">NavigationLink</span>(</span><br><span class="line">                destination: <span class="type">Text</span>(<span class="string">&quot;Item <span class="subst">\(index)</span> Details&quot;</span>),</span><br><span class="line">                label: &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">&quot;Item <span class="subst">\(index)</span>&quot;</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .tabItem &#123;</span><br><span class="line">            <span class="type">Label</span>(<span class="string">&quot;Menu&quot;</span>, systemImage: <span class="string">&quot;list.dash&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .accentColor(.blue)</span><br><span class="line">        .navigationTitle(<span class="string">&quot;Menu&quot;</span>)</span><br><span class="line">        .tag(<span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Second Page&quot;</span>)</span><br><span class="line">            .navigationTitle(<span class="string">&quot;Me&quot;</span>)</span><br><span class="line">            .tabItem &#123;</span><br><span class="line">                <span class="type">Label</span>(<span class="string">&quot;Me&quot;</span>, systemImage: <span class="string">&quot;square.and.pencil&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .navigationTitle(<span class="string">&quot;Home&quot;</span>)</span><br><span class="line">            .accentColor(.red)</span><br><span class="line">            .tag(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .navigationTitle(tabViewSelection <span class="operator">==</span> <span class="number">0</span> <span class="operator">?</span> <span class="string">&quot;Home&quot;</span> : <span class="string">&quot;Me&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†TabViewåµŒå¥—åœ¨NavigationViewé‡Œé¢ä¹Ÿå°±æ˜¯è¯´TabViewæ•´ä½“ä½œä¸ºå¯¼èˆªæ ˆçš„é¦–é¡µï¼Œé€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å®ç°åˆ‡æ¢åˆ°äºŒçº§é¡µé¢è‡ªåŠ¨éšè—åº•éƒ¨Tabbarçš„æ•ˆæœã€‚</p><p>ä¸è¿‡è¿™æ ·åšä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼šTabViewè¢«å½“ä½œä¸€ä¸ªé¡µé¢æ¥çœ‹å¾…ï¼Œé‚£ä¹ˆè®¾ç½®çš„<code>navigationTitle</code>ä¼šå¯¹æ•´ä¸ªTabViewç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´å½“åˆ‡æ¢tabItemçš„æ—¶å€™å¯¼èˆªæ æ ‡é¢˜ä¸ä¼šæ”¹å˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæ ¹æ®å½“å‰é€‰ä¸­çš„tabItemæ¥åˆ‡æ¢æ ‡é¢˜ã€‚å…³äºæ€ä¹ˆè·å–é€‰ä¸­çš„tabItemå’Œ<code>tag</code>çš„å†…å®¹æˆ‘ä»¬ä¸‹é¢å†è¯´ã€‚</p><h3 id="ä¸éšè—åº•éƒ¨tabbar"><a href="#ä¸éšè—åº•éƒ¨tabbar" class="headerlink" title="ä¸éšè—åº•éƒ¨tabbar"></a>ä¸éšè—åº•éƒ¨tabbar</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TabView</span> &#123;</span><br><span class="line">    <span class="type">NavigationView</span> &#123;</span><br><span class="line">        <span class="type">List</span>(<span class="number">1</span><span class="operator">...</span><span class="number">10</span>, id: \.<span class="keyword">self</span>) &#123;index <span class="keyword">in</span></span><br><span class="line">            <span class="type">NavigationLink</span>(</span><br><span class="line">                destination: <span class="type">Text</span>(<span class="string">&quot;Item <span class="subst">\(index)</span> Details&quot;</span>),</span><br><span class="line">                label: &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">&quot;Item <span class="subst">\(index)</span>&quot;</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .navigationTitle(<span class="string">&quot;Home&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .tabItem &#123;</span><br><span class="line">        <span class="type">Label</span>(<span class="string">&quot;Menu&quot;</span>, systemImage: <span class="string">&quot;list.dash&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="type">NavigationView</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Second Page&quot;</span>)</span><br><span class="line">            .navigationTitle(<span class="string">&quot;Me&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .tabItem &#123;</span><br><span class="line">        <span class="type">Label</span>(<span class="string">&quot;Me&quot;</span>, systemImage: <span class="string">&quot;square.and.pencil&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ªNavigationViewæ˜¯ä¸€ä¸ªTabItemï¼Œå½“navigationViewåˆ‡æ¢åˆ°äºŒçº§é¡µé¢æ—¶tabBarä»ç„¶ä¼šæ˜¾ç¤ºã€‚</p><p>å…³äºSwiftUIå¯¼èˆªæ ç›¸å…³çš„å†…å®¹å¯ä»¥æŸ¥çœ‹<a href="https://www.iosprogrammer.tech/swiftui/swiftui-navigate-get-start-tutorial">ä½ åº”è¯¥çŸ¥é“çš„ï¼å…³äºSwiftUIä¸­å¯¼èˆªæ çš„4ç‚¹çŸ¥è¯†</a>ã€‚</p><h1 id="TabViewé€‰ä¸­çš„tabItem"><a href="#TabViewé€‰ä¸­çš„tabItem" class="headerlink" title="TabViewé€‰ä¸­çš„tabItem"></a>TabViewé€‰ä¸­çš„tabItem</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">init</span>(selection: <span class="type">Binding</span>&lt;<span class="type">SelectionValue</span>&gt;?, <span class="meta">@ViewBuilder</span> content: () -&gt; <span class="type">Content</span>)</span><br></pre></td></tr></table></figure><p>åœ¨<code>TabView</code>çš„åˆå§‹åŒ–æ–¹æ³•ä¸­é™¤äº†contentä¹‹å¤–è¿˜æœ‰ä¸€ä¸ª<code>selection</code>å‚æ•°ï¼Œå®ƒçš„ç±»å‹æ˜¯<code>Bind&lt;SelectionValue&gt;</code>ï¼Œè¿™ç§ç±»å‹çš„å‚æ•°å¯ä»¥æ¥å—ä¸€ä¸ª<code>@State</code>ä¿®é¥°çš„å‚æ•°ï¼Œå…³äº@Stateå’Œå‚æ•°ç»‘å®šç›¸å…³çš„å†…å®¹å¯ä»¥æŸ¥çœ‹<a href="%5Bhttps%5D(https://www.iosprogrammer.tech/swiftui/swiftui-concept-essential">å­¦ä¹ SwiftUIï¼Œå¿…é¡»æŒæ¡çš„3ä¸ªçŸ¥è¯†ç‚¹</a>ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="keyword">var</span> tabViewSelection <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="type">TabView</span>(selection: <span class="variable">$tabViewSelection</span>)</span><br></pre></td></tr></table></figure><p><code>tabViewSelection</code>æ˜¯ä¸€ä¸ªè¢«@Stateç»‘å®šçš„å˜é‡ï¼Œå°†å®ƒä¼ é€’ç»™TabViewçš„åˆå§‹åŒ–æ–¹æ³•ä¹‹åï¼Œå½“åˆ‡æ¢TabItemæ—¶è¯¥å˜é‡ä¼šè¢«ä¿®æ”¹ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(<span class="string">&quot;Go to Home&quot;</span>) &#123;</span><br><span class="line">    tabViewSelection <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æ¥ä¿®æ”¹<code>tabViewSelection</code>å˜é‡çš„å€¼ï¼ŒtabViewè¢«é€‰ä¸­çš„tabItemå°±ä¼šæˆç¬¬0ä¸ªã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä¸»è¦äº†è§£äº†tabViewçš„ç”¨æ³•å’Œæ€ä¹ˆä¿®æ”¹tabViewä»¥åŠtabItemçš„æ ·å¼ï¼Œä»¥åŠå…³äºç»‘å®štabViewé€‰ä¸­çš„itemçš„æ–¹æ³•ï¼Œç›¸ä¿¡ç°åœ¨ä½ å·²ç»å¯¹SwiftUIæ¡†æ¶ä¸­çš„tabViewæœ‰äº†ä¸€ä¸ªå…¨é¢çš„æŒæ¡ï¼Œèµ¶ç´§ç”¨èµ·æ¥å§ğŸ˜Š</p>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSé¡¹ç›®å›½é™…åŒ–å¯¹ã€åè¯å¤æ•°ã€‘çš„å¤„ç†æ–¹æ³•</title>
      <link href="xcode/localized-noun-plural/"/>
      <url>xcode/localized-noun-plural/</url>
      
        <content type="html"><![CDATA[<p>iOSé¡¹ç›®å›½é™…åŒ–è¿‡ç¨‹ä¸­å¯¹ã€åè¯å¤æ•°ã€‘çš„å¤„ç†æ–¹æ³•å’Œå¯¹å…¶ä»–æ–‡å­—çš„å¤„ç†æ–¹æ³•æœ‰äº›ä¸åŒä¹‹å¤„ï¼Œè¿™ç¯‡æ–‡ç« å°†ä»ä¸‹é¢å‡ ä¸ªæ–¹é¢è®²è§£ä¸€ä¸‹é¡¹ç›®ä¸­æ€ä¹ˆå¤„ç†åè¯å¤æ•°ã€‚</p><ol><li>ä»€ä¹ˆä¸èƒ½åƒå¯¹å…¶ä»–è¯­å¥ä¸€æ ·å¯¹åè¯å¤æ•°è¿›è¡Œå¤„ç†ï¼Ÿ</li><li><code>.stringsdict</code>æ–‡ä»¶çš„ä½¿ç”¨æ–¹æ³•å’Œè¯´æ˜</li></ol><a id="more"></a><p><img src="../../images/localize-noun-plural/first.png"></p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="é”™è¯¯çš„åè¯å¤æ•°å¤„ç†æ–¹å¼"><a href="#é”™è¯¯çš„åè¯å¤æ•°å¤„ç†æ–¹å¼" class="headerlink" title="é”™è¯¯çš„åè¯å¤æ•°å¤„ç†æ–¹å¼"></a>é”™è¯¯çš„åè¯å¤æ•°å¤„ç†æ–¹å¼</h1><p>iOSé¡¹ç›®å›½é™…åŒ–ä¸»è¦æ˜¯å¯¹é¡¹ç›®ä¸­ç”¨åˆ°çš„æ–‡å­—è¿›è¡Œæœ¬åœ°åŒ–è¯­è¨€å¤„ç†ï¼Œè¿™ä¸ªæ–¹é¢çš„çŸ¥è¯†åœ¨å‰é¢å‡ ç¯‡æ–‡ç« éƒ½æœ‰æ¶‰åŠï¼Œæ¯”å¦‚<a href="https://www.iosprogrammer.tech/xcode/international-user-facing-text/">è‹¹æœå®˜æ–¹çš„iOS Appå›½é™…åŒ–å·¥ä½œæµ</a>ã€<a href="https://www.iosprogrammer.tech/xcode/language-internalization-ib/">ä½¿ç”¨Xibä½¿Appå®Œæˆå›½é™…åŒ–åŠŸèƒ½</a>ã€‚</p><p>æ™®é€šæ–‡æœ¬å¯ä»¥å¤§è‡´çœ‹ä½œ1å¯¹1çš„ç¿»è¯‘ï¼Œæ¯”å¦‚è¯´â€œiOSå¼€å‘æ ˆâ€-&gt;â€œiOS developers stackâ€ï¼Œè¿™ç§ä¸€å¯¹ä¸€çš„ç¿»è¯‘é€šè¿‡<code>.strings</code>æ–‡ä»¶å¯ä»¥å¤„ç†ã€‚</p><p>åè¯å¤æ•°çš„å¤šè¯­è¨€å¤„ç†æ˜¯æ›´åŠ å¤æ‚çš„ç¿»è¯‘ï¼Œå› ä¸ºä¸åŒçš„è¯­è¨€å¯¹ä¸åŒæ•°é‡çš„è¡¨è¾¾æ–¹å¼éƒ½ä¸ä¸€æ ·ã€‚åˆ†åˆ«ä»¥è‹±æ–‡ã€ä¸­æ–‡è¡¨è¾¾ã€iOSå¼€å‘æ ˆã€‘å…¬ä¼—å·æœ‰å‡ ä¸ªç²‰ä¸ä¸ºä¾‹ï¼š</p><table><thead><tr><th>åè¯</th><th>æ•°é‡</th><th>è‹±æ–‡</th><th>ä¸­æ–‡</th></tr></thead><tbody><tr><td>Fan</td><td>0</td><td>There is none fan</td><td>æ²¡æœ‰ç²‰ä¸</td></tr><tr><td>Fan</td><td>1</td><td>There is one fan</td><td>æœ‰ä¸€ä¸ªç²‰ä¸</td></tr><tr><td>Fan</td><td>n(n&gt;1)</td><td>There are n fans</td><td>æœ‰nä¸ªç²‰ä¸</td></tr></tbody></table><blockquote><p>ä¸åŒè¯­è¨€å¯¹ä¸åŒæ•°é‡çš„è¡¨è¾¾å¯ä»¥å‚è€ƒ<a href="https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html">Language Plural Rules</a></p></blockquote><p>å¦‚æœè¦ç”¨<code>.strings</code>æ–‡ä»¶æ¥å¤„ç†åè¯å¤æ•°çš„è¯ï¼Œå¤§æ¦‚ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä¼ªä»£ç  */</span></span><br><span class="line"><span class="keyword">let</span> fans <span class="operator">=</span> <span class="operator">...</span></span><br><span class="line"><span class="keyword">if</span> fans <span class="operator">==</span> <span class="number">0</span> &#123;</span><br><span class="line">    <span class="type">NSLocalizedString</span>(<span class="string">&quot;zero fans number of my offical account&quot;</span>, comment: <span class="string">&quot;The Fans Number of ã€ioså¼€å‘æ ˆã€‘is zero&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> fans <span class="operator">==</span> <span class="number">1</span> &#123;</span><br><span class="line">    <span class="type">NSLocalizedString</span>(<span class="string">&quot;one fans number of my offical account&quot;</span>, comment: <span class="string">&quot;The Fans Number of ã€ioså¼€å‘æ ˆã€‘is one&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="type">NSLocalizedString</span>(<span class="string">&quot;other fans number of my offical account&quot;</span>, comment: <span class="string">&quot;The Fans Number of ã€ioså¼€å‘æ ˆã€‘is other&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ¯ä¸ªç”¨åˆ°åè¯å¤æ•°çš„åœ°æ–¹éƒ½è¿™æ ·å†™çš„è¯ï¼Œé¡¹ç›®ä¸­å°±ä¼šå……æ–¥ç€è¿™ç§èƒ¶æ°´ä»£ç ï¼Œéå¸¸ä¸åˆ©äºç»´æŠ¤ã€‚ä¸ºäº†é¿å…è¿™ç§åšæ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨Xcodeè‡ªå¸¦çš„<code>.stringsdict</code>æ–‡ä»¶ã€‚</p><h1 id="stringsdict"><a href="#stringsdict" class="headerlink" title="stringsdict"></a>stringsdict</h1><p><code>.stringsdict</code>æ–‡ä»¶å°±æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†åè¯å¤æ•°çš„plistæ–‡ä»¶ã€‚</p><h2 id="åˆ›å»º-stringsdictæ–‡ä»¶"><a href="#åˆ›å»º-stringsdictæ–‡ä»¶" class="headerlink" title="åˆ›å»º.stringsdictæ–‡ä»¶"></a>åˆ›å»º<code>.stringsdict</code>æ–‡ä»¶</h2><div style="display:flex;justify-content:space-evenly;">    <img src="../../images/localize-noun-plural/create-stringsdict-1.png">    <img src="../../images/localize-noun-plural/create-stringsdict-2.png">    <img src="../../images/localize-noun-plural/create-stringsdict-3.png"></div><ol><li>åœ¨é¡¹ç›®ç›®å½•å³å‡»é€‰æ‹©New Fileæˆ–è€…ä½¿ç”¨å¿«æ·é”®âŒ˜+N</li><li>æ–°å»ºä¸€ä¸ªStringsdict File,å¹¶å‘½åä¸º<code>Localizable.stringsdict</code></li></ol><h2 id="stringsdictæ–‡ä»¶è§£æ"><a href="#stringsdictæ–‡ä»¶è§£æ" class="headerlink" title="stringsdictæ–‡ä»¶è§£æ"></a><code>stringsdict</code>æ–‡ä»¶è§£æ</h2><div style="display:flex;justify-content:space-evenly;">    <img src="../../images/localize-noun-plural/empty-stringsdict.png" alt="ç©ºçš„stringsdict">    <img src="../../images/localize-noun-plural/example-stringsdict.png" alt="å…¬ä¼—å·ç²‰ä¸æ•°stringdict"></div><p>å·¦è¾¹æ˜¯ä¸€ä¸ªç©ºçš„stringsdictæ–‡ä»¶ï¼Œå³è¾¹æ˜¯ç”¨å…¬ä¼—å·ç²‰ä¸æ•°ä¸ºä¾‹çš„stringsdictæ–‡ä»¶ã€‚</p><ul><li><code>Localized String Key</code>æ˜¯ä¸€ä¸ªæ–‡å­—å¸¸é‡,ç”¨åœ¨<code>NSLocalizedString</code>å®é‡Œé¢ç”¨æ¥åŒ¹é…å¤šè¯­è¨€ç¿»è¯‘ï¼Œå¦‚<code>NSLocalizedString(&quot;fans number of my official account&quot;, comment: &quot;The Fans Number of ã€ioså¼€å‘æ ˆã€‘&quot;)</code>ã€‚é¡¹ç›®ä¸­æœ‰å¤šå°‘ä¸ªéœ€è¦ç¿»è¯‘çš„åè¯å¤æ•°å°±è¦æœ‰å¤šå°‘ä¸ªLocalized String Keyã€‚</li><li><code>Localized Format Key</code>å¯¹åº”çš„æ˜¯åŒ…å«åè¯å¤æ•°çš„å¥å­ï¼Œå…¶ä¸­çš„æ•°å­—å’Œåè¯åœ¨<code>%#@</code>å’Œ<code>@</code>ä¸­é—´ã€‚</li><li><code>VARIABLE</code>ç”¨<code>%#@</code>å’Œ<code>@</code>ä¹‹é—´çš„ä»£æ›¿ã€‚è¿™æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œå†…å®¹å°±æ˜¯VARIABLEåœ¨ä¸åŒæ•°é‡ä¸‹çš„è¡¨ç¤ºè§„åˆ™ã€‚<ul><li><code>NSStringFormatSpecTypeKey</code> æŒ‡å®šå¤æ•°è§„åˆ™çš„ç±»å‹ï¼Œå›ºå®šä¸º<code>NSStringPluralRuleType</code>è¡¨ç¤ºå¤æ•°è§„åˆ™ç±»å‹ã€‚</li><li><code>NSStringFormatValueTypeKey</code> ç”¨æ¥è¡¨ç¤ºä¸åŒçš„æ•°å­—ç±»å‹ï¼Œæ¯”æ–¹è¯´æ•´å‹æ˜¯%dï¼Œæ— ç¬¦å·æ•´å‹%uï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹<a href="https://developer.apple.com/library/archive/documentation/CoreFoundation/Conceptual/CFStrings/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265">String Format Specifiers</a></li><li><code>zero</code>/<code>one</code>/<code>two</code>/<code>few,many</code>/<code>other</code> ä¸åŒæ•°é‡ä¸‹åè¯å¤æ•°çš„è¡¨ç°æ–¹å¼ï¼Œæœ‰äº›è¯­è¨€åªæœ‰å…¶ä¸­å‡ ä¸ªæ¯”å¦‚æ±‰è¯­åŸºæœ¬æ‰€æœ‰æ•°é‡éƒ½å¯ä»¥ç”¨ä¸€ç§æ–¹å¼æ¥è¡¨è¾¾ï¼ˆ1ä¸ªã€2ä¸ªã€100ä¸ªï¼‰ï¼Œè‹±è¯­æœ‰ä¸¤ç§ï¼ˆone fan/many fansï¼‰ï¼Œæ›´å¤šçš„è¯­è¨€å¯ä»¥æŸ¥çœ‹<a href="https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html">Language Plural Rules</a>ã€‚</li></ul></li></ul><h2 id="å®æˆ˜ç»éªŒ"><a href="#å®æˆ˜ç»éªŒ" class="headerlink" title="å®æˆ˜ç»éªŒ"></a>å®æˆ˜ç»éªŒ</h2><ol><li><code>Localized Format Key</code>æ˜¯ä¸€ä¸ªè¯­å¥ï¼Œå…¶ä¸­å¯ä»¥åŒ…å«1ä¸ªæˆ–1ä¸ªä»¥ä¸Šçš„å¤æ•°ï¼Œæ¯ä¸ªéƒ½ç”¨<code>%#@</code>å’Œ<code>@</code>åŒ…å›´ã€‚</li><li>æ¯å¢åŠ ä¸€ä¸ªéœ€è¦ç¿»è¯‘çš„åè¯å¤æ•°å°±è¦å¢åŠ ä¸€ä¸ª<code>Localized String Key</code>ã€‚</li><li>è®¾ç½®<code>.stringsdict</code>æ–‡ä»¶çš„å¤šè¯­è¨€<ol><li>ç‚¹å‡»<code>Localizable.stringsdict</code>æ–‡ä»¶</li><li>ç‚¹å‡»å³ä¸Šè§’æ–‡ä»¶æ£€è§†å™¨ï¼Œé€‰ä¸­ç¬¬ä¸€ä¸ªé€‰é¡¹<code>the File inspector</code></li><li>åœ¨Localizationä¸­å¢åŠ ã€å‡å°‘è¯­è¨€ã€‚</li></ol></li></ol><div style="display:flex;justify-content:space-evenly;">    <img src="../../images/localize-noun-plural/stringsdict-chinese.png" alt="ä¸­æ–‡">    <img src="../../images/localize-noun-plural/stringsdict-english.png" alt="è‹±æ–‡"></div><p>ä¸Šé¢æ˜¯åœ¨ä¸­è‹±æ–‡ä¸‹å¯¹<em>iOSå¼€å‘æ ˆæœ‰nä¸ªç²‰ä¸</em>å’Œ<em>iOSå¼€å‘æ ˆæœ‰nç¯‡æ–‡ç« å’Œmæ¬¡åˆ†äº«</em>çš„ç¿»è¯‘ã€‚å¯¹è¿™ä¸¤ä¸ªç¿»è¯‘çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fansNumLocalizableString <span class="operator">=</span> <span class="type">NSLocalizedString</span>(<span class="string">&quot;fans num in my offical account&quot;</span>, comment: <span class="string">&quot;The Fans Number of ã€ioså¼€å‘æ ˆã€‘&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> fanNumStr <span class="operator">=</span> <span class="type">String</span>.localizedStringWithFormat(fansNumLocalizableString, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> offcialAccountInfo <span class="operator">=</span> <span class="type">NSLocalizedString</span>(<span class="string">&quot;official account info&quot;</span>, comment: <span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> accountInfoStr <span class="operator">=</span> <span class="type">String</span>.localizedStringWithFormat(offcialAccountInfo, <span class="number">10</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€šè¿‡è¿™ç¯‡æ–‡ç« æˆ‘ä»¬äº†è§£äº†ä¸ºä»€ä¹ˆè¦å¯¹åè¯å¤æ•°çš„å›½é™…åŒ–è¿›è¡Œå•ç‹¬å¤„ç†ï¼Œå’Œstringsdictæ–‡ä»¶çš„ç”¨æ³•ï¼Œç›¸ä¿¡ä½ å·²ç»å¯¹åè¯å¤æ•°çš„å›½é™…åŒ–æœ‰æ‰€äº†è§£ï¼Œç°åœ¨å°±å»åŠ¨æ‰‹è¯•è¯•å§ï½</p>]]></content>
      
      
      
        <tags>
            
            <tag> Xcode </tag>
            
            <tag> å›½é™…åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSé¡¹ç›®å…¥å£çš„æ¼”å˜è¿‡ç¨‹ï¼ˆ2021ï¼‰</title>
      <link href="ios/application-entry-point-changes/"/>
      <url>ios/application-entry-point-changes/</url>
      
        <content type="html"><![CDATA[<p><code>UISceneDelegate</code>æ˜¯ä»€ä¹ˆï¼Œå®ƒå’Œ<code>AppDelegate</code>æœ‰ä»€ä¹ˆå…³ç³»ï¼ŒSwiftä¸­çš„<code>@main</code>åˆæ˜¯ä»€ä¹ˆï¼Œæœ¬æ–‡å°†å¸¦ä½ ä¸€ä¸€äº†è§£ã€‚</p><p>è¿™ç¯‡æ–‡ç« å°†ä¸»è¦è®²è§£ä¸‹é¢å‡ ç‚¹å†…å®¹ï¼š</p><ol><li>iOS13ä¹‹å‰çš„<code>AppDelegate</code>å¯åŠ¨é¡¹ç›®çš„æµç¨‹</li><li><code>UISceneDelegate</code>çš„å¤šçª—å£å®ç°é€»è¾‘</li><li><code>UISceneDelegate</code>å’Œ<code>AppDelegate</code>çš„å…³ç³»</li><li><code>int main()</code>å’Œ<code>@main</code></li></ol><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../images/scene-delegate/first.png"></p><h1 id="å•Windowçš„AppDelegate"><a href="#å•Windowçš„AppDelegate" class="headerlink" title="å•Windowçš„AppDelegate"></a>å•Windowçš„AppDelegate</h1><p>åœ¨iOS13ä¹‹å‰iPhoneä¸Šçš„é¡¹ç›®éƒ½æ˜¯å•windowsçš„ï¼ŒAppDelegateä¸­çš„<code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</code>å°±æ˜¯iOSé¡¹ç›®å¯åŠ¨åç¬¬ä¸€ä¸ªä¼šè¢«è°ƒç”¨çš„å‡½æ•°ã€‚</p><h2 id="çº¯ä»£ç åœ¨AppDelegateä¸­å¯åŠ¨App"><a href="#çº¯ä»£ç åœ¨AppDelegateä¸­å¯åŠ¨App" class="headerlink" title="çº¯ä»£ç åœ¨AppDelegateä¸­å¯åŠ¨App"></a>çº¯ä»£ç åœ¨AppDelegateä¸­å¯åŠ¨App</h2><p>AppDelegateä¸­æœ‰ä¸€ä¸ª<code>window</code>å±æ€§ï¼Œéœ€è¦è‡ªå·±æ¥ç»™windowsæŒ‡å®šä¸€ä¸ª<code>rootViewController</code>ï¼Œåœ¨ä¸ä½¿ç”¨storyboardæˆ–è€…xibçš„æƒ…å†µä¸‹ï¼Œæœ€ç®€å•çš„AppDelegateä»£ç å¤§æ¦‚æ˜¯ä¸‹é¢è¿™æ ·å­ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppDelegate.h</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AppDelegate</span> : <span class="title">UIResponder</span> &lt;<span class="title">UIApplicationDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">UIWindow</span> *window;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// AppDelegate.m</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&quot;AppDelegate.h&quot;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&quot;ViewController.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AppDelegate</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AppDelegate</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    <span class="comment">// Override point for customization after application launch.</span></span><br><span class="line">    <span class="keyword">self</span>.window = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[<span class="built_in">UIScreen</span> mainScreen].bounds];</span><br><span class="line">    <span class="keyword">self</span>.window.rootViewController = [[ViewController alloc] init];</span><br><span class="line">    <span class="keyword">self</span>.window.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">    [<span class="keyword">self</span>.window makeKeyAndVisible];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p><code>AppDelegate</code>éµå®ˆäº†<code>UIApplicationDelegate</code>åè®®ï¼Œå…¶ä¸­windowæ˜¯åè®®é‡Œè§„å®šçš„ä¸€ä¸ªå±æ€§ï¼Œæ‰€ä»¥è¿™é‡Œå¿…é¡»åœ¨.hä¸­å£°æ˜è¿™ä¸ªå±æ€§ï¼Œå¦åˆ™ä¼šæŠ¥é”™<mark class="label danger">-[AppDelegate setWindow:]: unrecognized selector sent to instance</mark>ï¼›è€Œå¦‚æœæ”¾åœ¨.mä¸­ä¼šæŠ¥é‡å¤å£°æ˜çš„é”™è¯¯<mark class="label danger">Illegal redeclaration of property in class extension AppDelegate (attribute must be readwrite, while its primary must be readonly)</mark>ã€‚</p><p>åœ¨<code>didFinishLaunchingWithOptions</code>ä¸­åˆå§‹åŒ–windowå¹¶è®¾ç½®å®ƒçš„<code>rootViewController</code>ä¹‹åè°ƒç”¨<code>makeKeyAndVisible</code>ã€‚</p><h2 id="Storyboardåœ¨AppDelegateä¸­å¯åŠ¨App"><a href="#Storyboardåœ¨AppDelegateä¸­å¯åŠ¨App" class="headerlink" title="Storyboardåœ¨AppDelegateä¸­å¯åŠ¨App"></a>Storyboardåœ¨AppDelegateä¸­å¯åŠ¨App</h2><p>å¦‚æœæ˜¯ä½¿ç”¨storyboardä½œä¸ºé¡¹ç›®å…¥å£çš„è¯ï¼ŒAppDelegateå°±æ›´ç®€å•äº†ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœé¡¹ç›®æ˜¯ä½¿ç”¨Xcode11åˆ›å»ºçš„é‚£ä¹ˆè¦æƒ³è¯•éªŒè¿™ç§æ–¹æ³•éœ€è¦ 1. åˆ é™¤info.plistä¸­çš„<code>Application Scene Manifest</code> 2. åˆ é™¤<code>SceneDelegate.h</code>å’Œ<code>SceneDelegate.m</code> 3. åˆ é™¤<code>AppDelegate.m</code>ä¸­çš„ä¸¤ä¸ªSceneDelegateç›¸å…³å‡½æ•°<code>application(_:configurationForConnecting:options:)</code>å’Œ<code>application(_:didDiscardSceneSessions:)</code> 4. æ­¤æ—¶Xcodeä¸ä¼šè‡ªåŠ¨ä»Main.storyboardåŠ è½½è§†å›¾ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¿®æ”¹<code>didFinishLaunchingWithOptions</code>æ¥å±•ç¤ºç•Œé¢ã€‚</p></blockquote><h1 id="SceneDelegate"><a href="#SceneDelegate" class="headerlink" title="SceneDelegate"></a>SceneDelegate</h1><p>ä»Xcode11å¼€å§‹ï¼Œåˆ›å»ºæ–°çš„iOSé¡¹ç›®çš„æ¨¡ç‰ˆä¸­ä¼šå¸¦æœ‰<code>SceneDelegate</code>ç±»ï¼Œå¹¶ä¸”åœ¨plistæ–‡ä»¶ä¸­ä¼šæœ‰ä¸€ä¸ª<code>Application Scene Manifest</code>é…ç½®ï¼Œ<code>AppDelegate.m</code>ä¸­æ–°å¢äº†ä¸¤ä¸ªç®¡ç†SceneDelegateçš„å‡½æ•°<code>application(_:configurationForConnecting:options:)</code>å’Œ<code>application(_:didDiscardSceneSessions:)</code>ã€‚</p><h2 id="iOSåº”ç”¨çš„è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸå’ŒUIç”Ÿå‘½å‘¨æœŸ"><a href="#iOSåº”ç”¨çš„è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸå’ŒUIç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="iOSåº”ç”¨çš„è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸå’ŒUIç”Ÿå‘½å‘¨æœŸ"></a>iOSåº”ç”¨çš„è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸå’ŒUIç”Ÿå‘½å‘¨æœŸ</h2><p>Appçš„è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬Appå¯åŠ¨ã€Appç»ˆæ­¢ç­‰ï¼Œä¸»è¦æ¶‰åŠçš„åè®®æœ‰ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* UIApplicationDelegate */</span></span><br><span class="line">- (<span class="keyword">void</span>)applicationDidFinishLaunching:(<span class="built_in">UIApplication</span> *)application;</span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application willFinishLaunchingWithOptions:(<span class="keyword">nullable</span> <span class="built_in">NSDictionary</span>&lt;<span class="built_in">UIApplicationLaunchOptionsKey</span>, <span class="keyword">id</span>&gt; *)launchOptions API_AVAILABLE(ios(<span class="number">6.0</span>));</span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="keyword">nullable</span> <span class="built_in">NSDictionary</span>&lt;<span class="built_in">UIApplicationLaunchOptionsKey</span>, <span class="keyword">id</span>&gt; *)launchOptions API_AVAILABLE(ios(<span class="number">3.0</span>));</span><br><span class="line">- (<span class="keyword">void</span>)applicationWillTerminate:(<span class="built_in">UIApplication</span> *)application;</span><br></pre></td></tr></table></figure><p>Appé€€åˆ°åå°æˆ–è€…é‡æ–°è¿›å…¥å‰å°çš„è¿‡ç¨‹å±äºUIç”Ÿå‘½å‘¨æœŸï¼Œå…¶ä¸­ä¸»è¦æ¶‰åŠçš„åè®®æœ‰ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* UIApplicationDelegate */</span></span><br><span class="line">- (<span class="keyword">void</span>)applicationDidBecomeActive:(<span class="built_in">UIApplication</span> *)application;</span><br><span class="line">- (<span class="keyword">void</span>)applicationWillResignActive:(<span class="built_in">UIApplication</span> *)application;</span><br></pre></td></tr></table></figure><h2 id="SceneDelegateæ˜¯ä»€ä¹ˆ"><a href="#SceneDelegateæ˜¯ä»€ä¹ˆ" class="headerlink" title="SceneDelegateæ˜¯ä»€ä¹ˆ"></a>SceneDelegateæ˜¯ä»€ä¹ˆ</h2><p><img src="../../images/scene-delegate/ios12-appdelegate.png" alt="iOS12ä¹‹å‰AppDelegateçš„ä½œç”¨"></p><p>åœ¨iOS13ä¹‹å‰ï¼ŒiOSé¡¹ç›®åªæœ‰ä¸€ä¸ªä¸»Windowï¼Œé‚£æ—¶å€™çš„è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸå’ŒUIç”Ÿå‘½å‘¨æœŸéƒ½åœ¨<code>APPDelegate</code>ä¸­è¿›è¡Œç®¡ç†ã€‚</p><p>åœ¨iOS13ä¹‹åï¼Œä¸ºäº†å¢å¼ºiOSé¡¹ç›®çš„å¯ç”¨æ€§ä¸€ä¸ªAppå¯ä»¥æœ‰å¤šä¸ªwindowæ¥æ˜¾ç¤ºä¸åŒæˆ–ç›¸åŒçš„å†…å®¹ã€‚åŒå‡»è®¾å¤‡çš„Homeé”®åæ¯ä¸€ä¸ªwindowä¼šç‹¬ç«‹å±•ç¤ºã€‚</p><p><img src="../../images/scene-delegate/sample-image.png" alt="sceneDelegateç¤ºä¾‹"></p><p><strong>å¤šçª—å£ç‰¹æ€§åªæœ‰åœ¨iPadä¸Šæ‰å¯ä»¥ç”¨</strong>ï¼ŒiPhoneä¸Šé¢æ˜¯ä¸è¡Œçš„ã€‚å…·ä½“çš„ä½¿ç”¨æ–¹æ³•å’Œä¾‹å­å¯ä»¥æŸ¥çœ‹è¿™ç¯‡<a href="https://developer.apple.com/documentation/uikit/uiscenedelegate/supporting_multiple_windows_on_ipad">è‹¹æœçš„å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>ä¸ºäº†ç®¡ç†ä¸åŒçª—å£çš„ç”Ÿå‘½å‘¨æœŸï¼Œè‹¹æœæ·»åŠ äº†<code>UIWindowSceneDelegate</code>åè®®ï¼Œè€Œ<code>SceneDelegate</code>ç±»å®ç°äº†è¿™ä¸ªåè®®çš„æ–¹æ³•ï¼Œå› æ­¤<strong>SceneDelegateç±»æ˜¯ç”¨æ¥ç®¡ç†iOSåº”ç”¨çª—å£çš„ç”Ÿå‘½å‘¨æœŸçš„</strong>ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨ç•Œé¢çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><h2 id="SceneDelegateå’ŒAppDelegateçš„å…³ç³»"><a href="#SceneDelegateå’ŒAppDelegateçš„å…³ç³»" class="headerlink" title="SceneDelegateå’ŒAppDelegateçš„å…³ç³»"></a>SceneDelegateå’ŒAppDelegateçš„å…³ç³»</h2><p>åœ¨æ¨å‡º<code>SceneDelegate</code>ä¹‹å‰ï¼Œæ•´ä¸ªåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸå’ŒUIç”Ÿå‘½å‘¨æœŸéƒ½æ˜¯ä¾èµ–AppDelegateè¿›è¡Œç®¡ç†ï¼Œåœ¨è¿™ä¹‹åï¼ŒUIç”Ÿå‘½å‘¨æœŸäº¤ç»™äº†SceneDelegateæ¥ç®¡ç†ï¼Œè€ŒAppDelegateå°±ç”¨æ¥ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸå’ŒSceneDelegateçš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p><img src="../../images/scene-delegate/appdelegate-scenedelegate.png" alt="AppDelegateå’ŒSceneDelegateçš„å…³ç³»"></p><p>Appçš„å¯åŠ¨å’Œæ€æ­»çš„å›è°ƒä»ç„¶åœ¨AppDelegateä¸­ï¼Œé™¤æ­¤ä¹‹å¤–åœ¨åˆ›å»ºiOSé¡¹ç›®çš„æ¨¡ç‰ˆä¸­ï¼ŒAppDelegateä¸­å¢åŠ äº†å¯¹SceneDelegateç®¡ç†çš„ä¸¤ä¸ªæ–¹æ³•ï¼š</p><ul><li><code>application:configurationForConnectingSceneSession:options:</code> å½“çª—å£å»ºç«‹æ—¶ä¼šè¢«è°ƒç”¨ã€‚</li><li><code>application:didDiscardSceneSessions:sceneSessions</code>ã€‚ å½“çª—å£è¢«æ°¸ä¹…é”€æ¯æ—¶è¢«è°ƒç”¨</li></ul><p>SceneDelegateä¸­å¯¹Appçš„æŸä¸ªçª—å£çš„åŠ¨ä½œè¿›è¡Œç®¡ç†ï¼š</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><code>scene:willConnectToSession:options:connectionOptions</code></td><td><code>sceneDidDisconnect:</code></td></tr><tr><td><code>sceneDidBecomeActive:</code></td><td><code>sceneWillResignActive:</code></td></tr><tr><td><code>sceneWillEnterForeground:</code></td><td><code>sceneDidEnterBackground:</code></td></tr></tbody></table><p>è¿™é‡Œçš„æ–¹æ³•éƒ½æ˜¯å¯¹ç§°å‡ºç°çš„ï¼ŒåŸºæœ¬ä¹Ÿéƒ½æ˜¯å’Œä¹‹å‰åœ¨AppDelegateä¸­çš„ç›¸å…³åŠŸèƒ½çš„æ–¹æ³•å¾ˆç±»ä¼¼ã€‚</p><p><strong>SceneDelegateæ‰¿æ¥äº†éƒ¨åˆ†AppDelegateçš„åŠŸèƒ½ï¼Œè€ŒAppDelegateé‡ç‚¹ç”¨æ¥å¯¹åº”ç”¨ç”Ÿå‘½å‘¨æœŸå°±è¿›è¡Œç®¡ç†ï¼ŒSceneDelegateç”¨æ¥ç®¡ç†UIç”Ÿå‘½å‘¨æœŸã€‚</strong></p><h1 id="int-main-å’Œ-main"><a href="#int-main-å’Œ-main" class="headerlink" title="int main()å’Œ@main"></a><code>int main()</code>å’Œ<code>@main</code></h1><p>åœ¨Objcé¡¹ç›®ä¸­å­˜åœ¨ä¸€ä¸ª<code>main.m</code>æ–‡ä»¶ï¼Œé‡Œé¢çš„mainå‡½æ•°æ˜¯é¡¹ç›®çš„å¯åŠ¨å‡½æ•°ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="built_in">NSString</span> * appDelegateClassName;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        <span class="comment">// Setup code that might create autoreleased objects goos here.</span></span><br><span class="line">        appDelegateClassName = <span class="built_in">NSStringFromClass</span>([AppDelegate <span class="keyword">class</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">UIApplicationMain</span>(argc, argv, <span class="literal">nil</span>, appDelegateClassName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨Swiftä¸­ï¼Œé¡¹ç›®å…¥å£ä½¿ç”¨<code>@main</code>ä½œä¸ºæ ‡è®°ï¼Œä½œç”¨å’Œä¸Šé¢çš„Cè¯­è¨€å‡½æ•°æ˜¯ä¸€æ ·çš„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* AppDelegate.swift */</span></span><br><span class="line"><span class="keyword">@main</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span></span></span><br></pre></td></tr></table></figure><p>é€šè¿‡æ·»åŠ <code>@main</code>æ ‡è®°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆé¡¹ç›®å…¥å£ç›¸å…³ä»£ç ï¼Œå¹¶æŠŠ<code>AppDelegate</code>çš„ç±»åä¼ é€’è¿›å»ã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å¯¹iOSé¡¹ç›®çš„å¯åŠ¨å…¥å£è¿›è¡Œäº†ä¸€æ¬¡å›é¡¾å’Œæ·±å…¥äº†è§£ï¼Œç›¸ä¿¡ä½ å¯¹iOSé¡¹ç›®çš„å‘å±•æœ‰äº†ä¸€ä¸ªæ›´åŠ æ¸…æ™°çš„è®¤è¯†ã€‚</p><p>æ„Ÿè°¢ä½ çš„é˜…è¯»ğŸ’—ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨èï¼iOSåº”ç”¨ä½¿ç”¨Assets.xcassetsè¿›è¡Œå›¾ç‰‡å›½é™…åŒ–çš„2ç§æ–¹æ³•</title>
      <link href="xcode/localize-images/"/>
      <url>xcode/localize-images/</url>
      
        <content type="html"><![CDATA[<p>iOSåº”ç”¨çš„å›½é™…åŒ–é™¤äº†æ–‡å­—ä»¥å¤–è¿˜éœ€è¦å¯¹ä¸€äº›æœ¬åœ°ä½¿ç”¨çš„èµ„æºè¿›è¡Œå›½é™…åŒ–ï¼Œè¿™ç¯‡æ–‡ç« å°†åˆ†äº«ä¸€äº›å…³äºImageå›¾ç‰‡å›½é™…åŒ–çš„æ–¹æ¡ˆã€‚</p><p>ä¸»è¦åŒ…æ‹¬iOSåº”ç”¨å›¾ç‰‡å›½é™…åŒ–æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ol><li>Assets.xcassetsä¸­åŒä¸€ä¸ªImageSetåŒ…å«ä¸åŒçš„æœ¬åœ°åŒ–å›¾ç‰‡</li><li>ä½¿ç”¨åç§°ä¸åŒçš„ImageSet</li></ol><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../images/image-localize/first.png"></p><h1 id="åŒä¸€ä¸ªImageSetåŒ…å«ä¸åŒçš„æœ¬åœ°åŒ–å›¾ç‰‡"><a href="#åŒä¸€ä¸ªImageSetåŒ…å«ä¸åŒçš„æœ¬åœ°åŒ–å›¾ç‰‡" class="headerlink" title="åŒä¸€ä¸ªImageSetåŒ…å«ä¸åŒçš„æœ¬åœ°åŒ–å›¾ç‰‡"></a>åŒä¸€ä¸ªImageSetåŒ…å«ä¸åŒçš„æœ¬åœ°åŒ–å›¾ç‰‡</h1><p><img src="../../images/image-localize/1.png" alt="iOSå›¾ç‰‡æœ¬åœ°åŒ–è®¾ç½®"></p><p>æŒ‰ç…§æ­£å¸¸æµç¨‹æŠŠä¸€å¼ pngå›¾ç‰‡æ·»åŠ åˆ°Assets.xcassetsä¸­ä»¥åï¼Œé€‰ä¸­å…¶ä¸­ä»»æ„ä¸€å¼ å›¾ç‰‡ç„¶åå°±å¯ä»¥åœ¨Inspectorçš„ç¬¬å››æ Attribute Inspectorä¸­çœ‹åˆ°<strong>Localization</strong>é€‰é¡¹ï¼Œç‚¹å‡»åä¼šå‡ºç°é¡¹ç›®ä¸­å·²ç»å›½é™…åŒ–çš„è¯­è¨€ã€‚<em>ï¼ˆæ·»åŠ è¯­è¨€çš„æ–¹æ³•å¯ä»¥æŸ¥çœ‹<a href="https://www.iosprogrammer.tech/xcode/language-internalization-ib/#%E5%AE%8C%E6%95%B4%E4%BA%86%E8%A7%A3%E5%9B%BD%E9%99%85%E5%8C%96%E6%AD%A5%E9%AA%A4">å®Œæ•´äº†è§£å›½é™…åŒ–æ­¥éª¤</a>ï¼‰</em></p><p>åœ¨<em>Localization</em>ä¸­é€‰ä¸­çš„è¯­è¨€å°±æ˜¯è¦å•ç‹¬è®¾ç½®å›¾ç‰‡çš„è¯­è¨€ï¼Œå¦‚æœå•ç‹¬è®¾ç½®çš„è¯­è¨€å›¾ç‰‡æ˜¯ç©ºçš„å°±ä¼šè‡ªåŠ¨é€‰æ‹©ç”¨ç¬¬ä¸€ä¸ªï¼ˆUniversalï¼‰çš„å›¾ç‰‡ã€‚</p><p>æˆ‘çš„è¿™ä¸ªé¡¹ç›®é‡Œæœ‰ç®€ä½“ä¸­æ–‡å’Œè‹±æ–‡ä¸¤ç§è¯­è¨€ï¼Œå¹¶ä¸”å¯¹avatarè¿™ä¸ªå›¾ç‰‡çš„ä¸­æ–‡è®¾ç½®äº†å•ç‹¬å›¾ç‰‡ã€‚å½“æˆ‘åœ¨è®¾ç½®ä¸­åˆ‡æ¢ç®€ä½“ä¸­æ–‡å’Œè‹±æ–‡æ—¶å›¾ç‰‡å°±ä¼šè¢«åˆ‡æ¢äº†ã€‚</p><h1 id="ä½¿ç”¨åç§°ä¸åŒçš„ImageSet"><a href="#ä½¿ç”¨åç§°ä¸åŒçš„ImageSet" class="headerlink" title="ä½¿ç”¨åç§°ä¸åŒçš„ImageSet"></a>ä½¿ç”¨åç§°ä¸åŒçš„ImageSet</h1><p>åœ¨Assets.xcassetsä¸­åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªImageSetï¼Œç„¶ååœ¨ImageNamedä¸­ä½¿ç”¨NSLocalizedStringæ¥è®¾ç½®å›¾ç‰‡åå­—ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">avatarImageView.image <span class="operator">=</span> <span class="type">UIImage</span>(named: <span class="type">NSLocalizedString</span>(<span class="string">&quot;avatarImageName&quot;</span>, comment: <span class="string">&quot;This is the avatar image&#x27;s name&quot;</span>))</span><br></pre></td></tr></table></figure><p><code>NSLocalizedString()</code>å®ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¤šè¯­è¨€çš„keyï¼Œè€Œcommentæ˜¯ç”¨æ¥ç”Ÿæˆå¤šè¯­è¨€æ³¨é‡Šçš„ï¼Œæ›´æ·±å…¥çš„äº†è§£å¯ä»¥æŸ¥çœ‹<a href="https://www.iosprogrammer.tech/xcode/international-user-facing-text/#%E6%A0%87%E8%AE%B0%E9%9C%80%E8%A6%81%E6%9C%AC%E5%9C%B0%E5%8C%96%E7%9A%84%E6%96%87%E6%9C%AC">æ ‡è®°éœ€è¦æœ¬åœ°åŒ–çš„æ–‡æœ¬</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Localization.strings(English)</span><br><span class="line">&quot;avatarImageName&quot; &#x3D; &quot;avatar-en&quot;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Localization.strings((Chinese, Simplified))</span><br><span class="line">&quot;avatarImageName&quot; &#x3D; &quot;avatar-ch&quot;;</span><br></pre></td></tr></table></figure><p>åˆ†åˆ«åœ¨ä¸­æ–‡ç®€ä½“å’Œè‹±æ–‡çš„Localization.stringsçš„å¤šè¯­è¨€æ–‡ä»¶ä¸­æ·»åŠ å¯¹åº”çš„å›¾ç‰‡æ–‡ä»¶åã€‚</p><p>ä¹‹ååˆ†åˆ«åœ¨ä¸åŒçš„è¯­è¨€ç¯å¢ƒä¸‹è¿è¡Œé¡¹ç›®å°±å¯ä»¥çœ‹åˆ°ä¸åŒçš„å›¾ç‰‡äº†ã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€šè¿‡ä¸Šé¢çš„2ç§æ–¹æ³•å¯ä»¥å°†å›¾ç‰‡è¿›è¡Œæœ¬åœ°åŒ–å¤„ç†ï¼Œå…¶ä¸­ç¬¬äºŒç§æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äº<code>UIImage(contentsOfFile:)</code>æ–¹æ³•ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Xcode </tag>
            
            <tag> å›½é™…åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ åº”è¯¥çŸ¥é“çš„ï¼å…³äºSwiftUIä¸­å¯¼èˆªæ çš„4ç‚¹çŸ¥è¯†</title>
      <link href="swiftui/swiftui-navigate-get-start-tutorial/"/>
      <url>swiftui/swiftui-navigate-get-start-tutorial/</url>
      
        <content type="html"><![CDATA[<p>å¾—ç›ŠäºSwiftUIçš„å£°æ˜å¼ç¼–ç¨‹æ–¹å¼è¿›è¡Œé¡µé¢åˆ‡æ¢æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œè¿™ç¯‡æ–‡ç« å°†å¯¹SwiftUIä¸­çš„å¯¼èˆªåŠŸèƒ½è¿›è¡Œä¸€ä¸ªå…¨é¢çš„äº†è§£ï¼Œä¸»è¦ä¼šæ¶‰åŠåˆ°è¿™å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li>NavigatinViewçš„ä½¿ç”¨æ–¹æ³•ä»¥åŠå¯¹åº”APIçš„è®²è§£</li><li>NavigationLinkçš„ä½¿ç”¨æ–¹æ³•</li><li>å®ç°POPä¼šä¸Šä¸€çº§é¡µé¢çš„æ•ˆæœ</li><li>Xcode12çš„å®æ—¶é¢„è§ˆå¯¼èˆªæ </li></ol><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../images/first/swiftui-navigate.png"></p><h1 id="NavigationView"><a href="#NavigationView" class="headerlink" title="NavigationView"></a>NavigationView</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationView</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hellow World&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œå°†ä¸€ä¸ªViewåŒ…è£¹åœ¨<code>NavigationView</code>ä¸­ï¼Œå½“å‰è¿™ä¸ªbodyå°±æ˜¯ä¸€ä¸ªâ€œå¯¼èˆªæ§åˆ¶å™¨â€äº†ï¼Œå…³äºè¿™ç§å†™æ³•çš„è¯´æ˜å¯ä»¥æŸ¥çœ‹æˆ‘ä¹‹å‰çš„<a href="https://www.iosprogrammer.tech/swiftui/swiftui-concept-essential/">å­¦ä¹ SwiftUIï¼Œå¿…é¡»æŒæ¡çš„3ä¸ªçŸ¥è¯†ç‚¹</a>ä¸­çš„Viewéƒ¨åˆ†ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationView</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hellow World&quot;</span>)</span><br><span class="line">        .navigationTitle(<span class="string">&quot;å…¬ä¼—å·ï¼šiOSå¼€å‘æ ˆ&quot;</span>) <span class="comment">// æˆ–è€…ä½¿ç”¨ navigationBarTitle</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç»™NavagationViewå†…éƒ¨çš„Contentè®¾ç½®<em>navigationTitle</em>ä¿®æ”¹å™¨å¯ä»¥è®¾ç½®å¯¼èˆªæ çš„æ ‡é¢˜ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.navigationBarTitleDisplayMode(.inline)</span><br></pre></td></tr></table></figure><p>é€šè¿‡è®¾ç½®<code>navigationBarTitleDisplayMode</code>ä¿®æ”¹å™¨å¯ä»¥æ›´æ”¹å¯¼èˆªæ æ ‡é¢˜çš„å±•ç°æ ·å¼ï¼Œ<em>inline</em>æ˜¯å±…ä¸­å±•ç¤ºå¹¶ä¸”å¯¼èˆªæ é«˜åº¦æ˜¯å›ºå®šçš„44ptï¼›<em>large</em>æ˜¯åœ¨iOSå‰å‡ ä¸ªç‰ˆæœ¬æ–°å¼•å…¥çš„æ ·å¼ï¼Œè¿™ç§æ ·å¼é»˜è®¤æ˜¯æŠŠæ ‡é¢˜æ˜¾ç¤ºåœ¨å·¦ä¸Šè§’å¹¶ä¸”å­—ä½“åŠ ç²—åŠ å¤§ï¼Œéšç€å±å¹•çš„æ»šåŠ¨å¯¼èˆªæ çš„é«˜åº¦ä¹Ÿä¼šå˜åŒ–ï¼›<code>automic</code>æ˜¯ä¼šå’Œå¯¼èˆªæ ˆçš„ä¸Šä¸€ä¸ªé¡µé¢ä¿æŒç›¸åŒã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.navigationBarTitle(<span class="string">&quot;å…¬ä¼—å·ï¼šiOSå¼€å‘æ ˆ&quot;</span>, displayMode: .inline)</span><br></pre></td></tr></table></figure><p>é€šè¿‡è®¾ç½®<code>navigationBarTitle</code>ä¿®æ”¹å™¨å¯ä»¥å°†ä¸Šé¢ä¸¤ä¸ªä¿®æ”¹å™¨åˆå¹¶æˆä¸€ä¸ªã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.navigationBarHidden()</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨<code>navigationBarHidden</code>å¯ä»¥åŠ¨æ€æ§åˆ¶æ˜¯å¦å±•ç¤ºå¯¼èˆªæ ï¼Œç»“åˆ<code>@State</code>çš„ä½¿ç”¨å¯ä»¥å®ç°åŠ¨æ€æ˜¾ç¤ºæˆ–è€…éšè—å¯¼èˆªæ çš„æ•ˆæœäº†ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.navigationBarItems(leading:, trailing:)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>navigationBarItems</code>å¯ä»¥ç»™å¯¼èˆªæ çš„å·¦ã€å³æ·»åŠ æŒ‰é’®ï¼Œè€Œä¸”å› ä¸ºleadingå’Œtrailingçš„ç±»å‹éƒ½æ˜¯Viewçš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ·»åŠ æ–‡å­—ã€å›¾ç‰‡ã€å›¾æ–‡ç­‰ã€‚</p><h1 id="NavigationLink"><a href="#NavigationLink" class="headerlink" title="NavigationLink"></a>NavigationLink</h1><p>ä¸Šé¢åˆ›å»ºå‡ºäº†ä¸€ä¸ªnavigationViewäº†ï¼Œä¸‹é¢æ¥çœ‹ä¸€ä¸‹æ€ä¹ˆå®ç°è·³è½¬ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationLink</span>(<span class="string">&quot;ç•Œé¢è·³è½¬&quot;</span>, destination: <span class="type">Text</span>(<span class="string">&quot;å…¬ä¼—å·ï¼šiOSå¼€å‘æ ˆ&quot;</span>))</span><br><span class="line">                </span><br><span class="line"><span class="type">NavigationLink</span>(destination: <span class="type">Text</span>(<span class="string">&quot;å…¬ä¼—å·ï¼šiOSå¼€å‘æ ˆ&quot;</span>), label: &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;ç•Œé¢è·³è½¬&quot;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ç§åˆ›å»ºæ–¹å¼çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œæœ€ç»ˆéƒ½æ˜¯é€šè¿‡ç‚¹å‡»â€œç•Œé¢è·³è½¬â€çš„æ–‡å­—ä»¥åè·³è½¬åˆ°ä¸€ä¸ªåªæœ‰â€œå…¬ä¼—å·ï¼šiOSå¼€å‘æ ˆâ€çš„æ–°é¡µé¢ã€‚</p><h1 id="å®ç°POPå›ä¸Šä¸€çº§é¡µé¢çš„æ•ˆæœ"><a href="#å®ç°POPå›ä¸Šä¸€çº§é¡µé¢çš„æ•ˆæœ" class="headerlink" title="å®ç°POPå›ä¸Šä¸€çº§é¡µé¢çš„æ•ˆæœ"></a>å®ç°POPå›ä¸Šä¸€çº§é¡µé¢çš„æ•ˆæœ</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ContentView.swift</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> pushActive <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationView</span> &#123;</span><br><span class="line">            <span class="type">VStack</span> &#123;</span><br><span class="line">                <span class="type">NavigationLink</span>(<span class="string">&quot;è·³è½¬å¹¶è¿”å›&quot;</span>, destination: <span class="type">SecondView</span>(pushActive: <span class="variable">$pushActive</span>), isActive: <span class="variable">$pushActive</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .navigationTitle(<span class="string">&quot;å…¬ä¼—å·ï¼šiOSå¼€å‘æ ˆ&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// SecondView.swift</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SecondView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Binding</span> <span class="keyword">var</span> pushActive: <span class="type">Bool</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;è¿”å›&quot;</span>) &#123;</span><br><span class="line">            pushActive <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸€ä¸ª@Stateå±æ€§ç»‘å®šåˆ°<code>NavigationLink</code>çš„åˆå§‹åŒ–æ–¹æ³•ä¸­çš„<code>isActive</code>å‚æ•°ï¼Œè¿™æ ·å°±ä¼šæ ¹æ®<code>pushActive</code>çš„Boolå€¼æ¥pushå’Œpopè§†å›¾ï¼Œå¦‚æœé»˜è®¤è®¾ç½®æˆtrueé‚£å¯åŠ¨appåå°±ä¼šç›´æ¥åˆ‡æ¢åˆ°SecondViewã€‚</p><p>æŠŠpushActiveå‚æ•°ä¼ é€’åˆ°SecondViewä»¥åé€šè¿‡åœ¨SecondViewä¸­ä¿®æ”¹è¿™ä¸ªå‚æ•°çš„å€¼ï¼Œå°±å¯ä»¥å®ç°è¿”å›ä¸Šä¸€çº§çš„æ•ˆæœã€‚å…¶ä¸­å…³äº@Stateå’Œ@Bindçš„ç”¨æ³•å¯ä»¥çœ‹ä¸€ä¸‹<a href="(https://www.iosprogrammer.tech/swiftui/swiftui-data-flow">è¯¦è§£SwiftUIæ•°æ®æµæ˜¯æ€ä¹ˆåœ¨Viewé—´ä¼ é€’çš„</a>ã€‚</p><h1 id="Xcode12çš„å®æ—¶é¢„è§ˆå¯¼èˆªæ "><a href="#Xcode12çš„å®æ—¶é¢„è§ˆå¯¼èˆªæ " class="headerlink" title="Xcode12çš„å®æ—¶é¢„è§ˆå¯¼èˆªæ "></a>Xcode12çš„å®æ—¶é¢„è§ˆå¯¼èˆªæ </h1><p>åœ¨Xcode12ä¸­ï¼Œå¯¹äºSwiftUIçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“å¼€Cavasï¼ˆoption+cmd+enterï¼‰æ¥æŸ¥çœ‹å®æ—¶é¢„è§ˆçš„ç•Œé¢ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„åŠŸèƒ½ã€‚è™½ç„¶æœ‰å¾ˆå¤šçš„å±€é™æ€§ï¼Œä¸å¤Ÿä¹Ÿç»ˆäºè®©iOSå¼€å‘è€…å“å°åˆ°äº†Webæˆ–è€…Androidå¾…é‡äº†ã€‚æ„Ÿè°¢è‹¹æœçˆ¸çˆ¸ğŸ™</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SecondView_Previews</span>: <span class="title">PreviewProvider</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">SecondView</span>(pushActive: .constant(false))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºSwiftUIçš„æ–‡ä»¶åé»˜è®¤ä¼šå¸¦æœ‰ä¸€ä¸ªéµå®ˆäº†<code>PreviewProvider</code>åè®®å¹¶ä¸”ä»¥<em>_Previews</em>ç»“å°¾çš„ç»“æ„ä½“ï¼Œæœ‰äº†å®ƒå°±æœ‰äº†å¯¹ç•Œé¢çš„å®æ—¶é¢„è§ˆèƒ½åŠ›ã€‚</p><p>è¦æƒ³é¢„è§ˆå¯¼èˆªæ çš„pushå’Œpopæ•ˆæœéœ€è¦åœ¨è¿™ä¸ªç»“æ„ä½“ä¸­è¿›è¡Œä¿®æ”¹ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SecondView_Previews</span>: <span class="title">PreviewProvider</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationView</span> &#123;</span><br><span class="line">            <span class="type">SecondView</span>(pushActive: .constant(false))</span><br><span class="line">                .navigationTitle(<span class="string">&quot;å…¬ä¼—å·ï¼šiOSå¼€å‘æ ˆ&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡åœ¨é¢„è§ˆç»“æ„ä½“ä¸­å¢åŠ ä¸€ä¸ªNavigationViewå°±å¯ä»¥åœ¨å¯¼èˆªæ ˆçš„æ¬¡çº§é¡µé¢å®æ—¶é¢„è§ˆå¸¦æœ‰å¯¼èˆªæ¡çš„æ•ˆæœã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™ç¯‡æ–‡ç« æ¶µç›–äº†NavigationViewå’ŒNavigationLinkçš„åŸºç¡€ç”¨æ³•å’Œå¸¸ç”¨APIçš„è®²è§£ï¼Œåˆæåˆ°äº†åœ¨å®æˆ˜åº”ç”¨ä¸­ä¼šé‡åˆ°äº†ä¸€äº›è¿›é˜¶éœ€æ±‚ä»¥åŠæå‡å¼€å‘æ•ˆç‡çš„é¢„è§ˆåŠŸèƒ½ç”¨æ³•ã€‚</p><p>ğŸ‰ ä½ å·²ç»æŒæ¡äº†SwiftUIæ¡†æ¶ä¸­å…³äºå¯¼èˆªæ çš„çŸ¥è¯†ï¼Œç°åœ¨å¯ä»¥åŠ¨æ‰‹è¯•è¯•åšä¸€ä¸ªå¸¦æœ‰å¯¼èˆªæ§åˆ¶çš„åº”ç”¨äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SwiftUIä¸­Imageè‡ªé€‚åº”å¤§å°AspectFillã€AspectFit</title>
      <link href="swiftui/swiftui-image-fill-fit-mode/"/>
      <url>swiftui/swiftui-image-fill-fit-mode/</url>
      
        <content type="html"><![CDATA[<p>SwiftUIä¸­æƒ³è¦è®©Imageèƒ½å¤Ÿå®ç°ç±»ä¼¼äºUIViewContentModeAspectFitæˆ–è€…ApectFillçš„æ•ˆæœéœ€è¦æŠŠä¸¤ä¸ª<a href="https://www.iosprogrammer.tech/swiftui/swiftui-concept-essential/">ä¿®æ”¹å™¨(modifier)</a>ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p><a id="more"></a><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Image</span>(<span class="string">&quot;xxx&quot;</span>)</span><br><span class="line">    .resizable(resizingMode: .stretch)</span><br><span class="line">    .aspectRatio(contentMode: .fit)</span><br></pre></td></tr></table></figure><p><code>func resizable(capInsets:, resizingMode:)</code>å¯¹åº”çš„æ˜¯UIImageçš„<code>resizableImageWithCapInsets:resizingMode:</code>ã€‚<code>capInsets</code>ç¡®å®šäº†ä¸è¢«æ‹‰ä¼¸å½±å“çš„ä¸Šä¸‹å·¦å³å››è¾¹è·ï¼Œå››è¾¹è·ä»¥å¤–çš„éƒ¨åˆ†ä¼šè¢«<code>resizingMode</code>å½±å“ã€‚<code>Image.ResizingMode.stretch</code>é“ºæ»¡æ•´ä¸ªç©ºé—´ï¼Œä¼šå‘ç”Ÿå½¢å˜,<code>Image.ResizingMode.stretch</code>å¹³é“ºï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå›¾ç‰‡çš„å¤§å°ä¸è¶³ä»¥å æ»¡ç©ºé—´å°±æŠŠå›¾ç‰‡å¤åˆ¶å¤šä»½ï¼Œå¦‚æœå›¾ç‰‡æ¯”ç©ºé—´å¤§åªä¼šå±•ç¤ºå‡ºæ¥å’Œç©ºé—´ä¸€æ ·å¤§çš„éƒ¨åˆ†å¹¶ä¸”å›¾ç‰‡çš„å·¦ä¸Šè§’å’Œå®¹å™¨çš„å·¦ä¸Šè§’å¯¹é½ï¼Œå…¶ä»–éƒ¨åˆ†ä¼šè¢«è£æ‰ã€‚</p><p><code>aspectRatio(_ aspectRatio:,contentMode:)</code>ä¿®æ”¹å™¨è®¾ç½®é•¿å®½æ¯”å’Œå¡«å……æ–¹å¼ï¼Œ<code>aspectRatio</code>å‚æ•°æ˜¯è§†å›¾çš„<em>é•¿:å®½</em>ï¼Œ<code>contentMode</code>æ˜¯å¡«å……æ–¹å¼å…¶ä¸­Fillè¡¨ç¤ºå¡«æ»¡ç©ºé—´ï¼Œé•¿è¾¹ä¼šè¶…å‡ºå®¹å™¨ï¼ŒFitä¼šä¿è¯é•¿è¾¹å¡«æ»¡ç©ºé—´çŸ­è¾¹ä¼šç•™å‡ºç©ºç™½ã€‚</p><p><strong>æ®æˆ‘è§‚å¯Ÿï¼Œå•ç‹¬å¯¹Imageä½¿ç”¨aspectRatioä¿®æ”¹å™¨æ²¡æœ‰æ•ˆæœï¼Œéœ€è¦ç»“åˆ<code>resizable</code>ä¿®æ”¹å™¨æ‰è¡Œã€‚</strong></p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SwiftUIè‡ªå®šä¹‰Modifier</title>
      <link href="swiftui/swiftui-custom-modifier/"/>
      <url>swiftui/swiftui-custom-modifier/</url>
      
        <content type="html"><![CDATA[<p>SwiftUIä¸­å·²ç»è‡ªå¸¦äº†å¾ˆå¤š<a href="https://www.iosprogrammer.tech/swiftui/swiftui-concept-essential/">Modifier</a>ï¼Œä½¿ç”¨è¿™äº›è‡ªå¸¦çš„modifierå¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„å¤§å¤šæ•°éœ€æ±‚ã€‚æœ‰äº›æƒ…å†µä¸‹ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨æˆ–è€…ç»Ÿä¸€é£æ ¼ï¼Œæˆ‘ä»¬è¿˜æƒ³è¦ç»™Viewå¢åŠ è‡ªå·±çš„Modifierã€‚</p><a id="more"></a><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CustomModifier</span>: <span class="title">ViewModifier</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">body</span><span class="params">(content: Content)</span></span> -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        content</span><br><span class="line">            .background(<span class="type">Color</span>.yellow)</span><br><span class="line">            .cornerRadius(<span class="number">10</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éµå®ˆ<code>ViewModifier</code>å³å¯åˆ›å»ºè‡ªå®šä¹‰çš„modifierã€‚</p><p>modifierå¹¶ä¸æ˜¯å¯¹åŸæ¥viewçš„ä¿®æ”¹ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„viewï¼Œå…·ä½“å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„<a href="https://www.iosprogrammer.tech/swiftui/swiftui-concept-essential/">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;iOSå¼€å‘æ ˆ&quot;</span>)</span><br><span class="line">    .modifier(customModifier())</span><br></pre></td></tr></table></figure><p><code>modier(:)</code>æ–¹æ³•æ˜¯Viewçš„ä¸€ä¸ªæ‰©å±•æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥è®©ä¸€ä¸ªviewé€šè¿‡åº”ç”¨modieræ¥è¿”å›ä¸€ä¸ªæ–°çš„viewï¼Œè¿™ä¹Ÿè¯å®äº†ä¸Šé¢æåˆ°çš„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">customModifier</span><span class="params">()</span></span> -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.modifier(<span class="type">CustomModifier</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç»™Viewæ·»åŠ ä¸€ä¸ªæ‰©å±•æ–¹æ³•å°±å¯ä»¥åƒä½¿ç”¨ç³»ç»Ÿæ–¹æ³•é‚£æ ·è°ƒç”¨æˆ‘ä»¬è‡ªå·±æ·»åŠ çš„modifieräº†ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;iOSå¼€å‘æ ˆ&quot;</span>)</span><br><span class="line">    .customModifier()</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™è‡ªå®šä¹‰çš„Modifieræ·»åŠ å‚æ•°ï¼Œæ¥å®ç°æ›´ä¸ºå¤æ‚çš„æ•ˆæœã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CustomModifier</span>: <span class="title">ViewModifier</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cornerRadius: <span class="type">CGFloat</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">body</span><span class="params">(content: Content)</span></span> -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        content</span><br><span class="line">            .background(<span class="type">Color</span>.yellow)</span><br><span class="line">            .cornerRadius(cornerRadius)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">customModifier</span><span class="params">(cornerRadius: CGFloat)</span></span> -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.modifier(<span class="type">CustomModifier</span>(cornerRadius: cornerRadius))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;iOSå¼€å‘æ ˆ&quot;</span>)</span><br><span class="line">                .customModifier(cornerRadius: <span class="number">10</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSæœ¬åœ°åŒ–æ—¥æœŸã€æ—¶é—´ã€è´§å¸æ•°å­—ï¼ˆè¶…å…¨ï¼‰</title>
      <link href="xcode/international-data-format/"/>
      <url>xcode/international-data-format/</url>
      
        <content type="html"><![CDATA[<p>ä¸åŒçš„å›½å®¶ã€åœ°åŒºå¯¹ä¸€äº›è¯¸å¦‚æ—¥æœŸã€æ—¶é—´ã€æ•°å­—ã€è´§å¸ç­‰æ–¹é¢æœ‰ä¸åŒçš„è¡¨è¿°æ–¹å¼ï¼Œä¸ºäº†æ›´å¥½çš„æ»¡è¶³å½“åœ°äººçš„ä½¿ç”¨ä¹ æƒ¯å’Œä¹ ä¿—ï¼ŒAppå¿…é¡»åšå¥½è¿™äº›æ–¹é¢çš„å›½é™…åŒ–å·¥ä½œã€‚è¿™æ˜¯ä¸€é¡¹é‡è¦ä¸”å¤æ‚çš„å·¥ä½œï¼Œå¸Œæœ›é€šè¿‡è¿™ç¯‡å¯ä»¥è®©ä½ å¯¹è¿™äº›å†…å®¹æœ‰ä¸€ä¸ªå…¨é¢çš„äº†è§£ã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../images/international-data-format/cover.png" alt="iOS app æ—¥æœŸå’Œæ•°å­—çš„æœ¬åœ°åŒ–"></p><p>ä¹‹å‰ä¸¤ç¯‡å…³äºiOSå›½é™…åŒ–çš„æ–‡ç« è®¨è®ºäº†å…³äº<a href="https://www.iosprogrammer.tech/xcode/language-internalization-ib/">ä½¿ç”¨IBå°†å›ºå®šUIå›½é™…åŒ–</a>å’Œ<a href="https://www.iosprogrammer.tech/xcode/international-user-facing-text/">ä½¿ç”¨NSLocalizeStringå®å°†å¯å˜æ–‡æœ¬å›½é™…åŒ–</a>ï¼Œè¿™ç¯‡æ–‡ç« å°†é›†ä¸­äºå¤„ç†ä¸€äº›æ—¥å¸¸è¡¨è¿°æ–¹é¢çš„å›½é™…åŒ–é—®é¢˜ï¼Œæ¯”å¦‚æ—¥æœŸã€æ—¶é—´ã€æ•°å­—ã€è´§å¸ç­‰ã€‚</p><p>é¦–å…ˆè¦æ˜ç¡®ä¸€ç‚¹ï¼Œè¿™é‡Œçš„æœ¬åœ°åŒ–å¹¶ä¸æ˜¯å®Œå…¨ä¾èµ–äºè¯­è¨€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åŒæ ·çš„è¯­è¨€åœ¨æœ¬åœ°åŒ–æ–¹é¢ä¹Ÿä¼šæœ‰ä¸åŒçš„è¡¨ç°å½¢å¼ã€‚æ¯”å¦‚è¯´æ„å¤§åˆ©å’Œç¾å›½éƒ½æ˜¯è‹±è¯­å›½å®¶ä½†æ˜¯åœ¨ç¾å›½æ•°å­—ä½¿ç”¨çš„â€œ,â€åˆ†å‰²ï¼Œè€Œæ„å¤§åˆ©ä½¿ç”¨çš„æ˜¯â€œ.â€ï¼Œåˆå¯¹äºè´§å¸ç¬¦å·å°±æ›´å¤šäº†ã€‚</p><p>åœ¨iPhoneå’ŒMacä¸Šéƒ½æœ‰åœ°åŒºçš„é€‰æ‹©ï¼Œåœ¨å¯¹åº”é¡µé¢çš„ä¸‹æ–¹å°±æ˜¯ä¸€äº›ç¤ºä¾‹ã€‚</p><p><img src="../../images/international-data-format/mac-region-pannel.png" alt="Macåœ°åŒºé€‰æ‹©ç¤ºä¾‹"></p><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­è¿˜æœ‰ä¸€ä¸ªå¿«é€Ÿä¿®æ”¹æ‰€åœ¨åŒºåŸŸçš„å°æŠ€å·§ï¼Œåœ¨Edit Scheme -&gt; Optionsä¸­ä¿®æ”¹App Regionç„¶åé‡æ–°è¿è¡Œé¡¹ç›®å°±å¯ä»¥ä¿®æ”¹æ‰€åœ¨åŒºåŸŸäº†ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡åˆ°ç³»ç»Ÿè®¾ç½®ä¸­å»ä¿®æ”¹åŒºåŸŸã€‚</p><h1 id="è·å–å½“å‰ç³»ç»Ÿçš„æœ¬åœ°åŒ–ä¿¡æ¯"><a href="#è·å–å½“å‰ç³»ç»Ÿçš„æœ¬åœ°åŒ–ä¿¡æ¯" class="headerlink" title="è·å–å½“å‰ç³»ç»Ÿçš„æœ¬åœ°åŒ–ä¿¡æ¯"></a>è·å–å½“å‰ç³»ç»Ÿçš„æœ¬åœ°åŒ–ä¿¡æ¯</h1><ol><li>è·å–Localeå¯¹è±¡</li></ol><p>å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹æ³•è·å–åˆ°ç”¨æˆ·çš„æœ¬åœ°åŒ–å¯¹è±¡<code>Locale.current</code>å’Œ<code>Locale.autoupdatingCurrent</code>ï¼Œå®˜æ–¹æ–‡æ¡£è¯´autoupdatingCurrentä¼šéšç€ç³»ç»Ÿè®¾ç½®çš„æ›´æ”¹è€Œæ”¹å˜ï¼Œcurrentæ˜¯å›ºå®šçš„ã€‚</p><p>ä½†æ˜¯æˆ‘å¹¶æ²¡æœ‰å‘ç°è¿™ä¸¤è€…çš„åŒºåˆ«ï¼Œå½“ç”¨æˆ·ä¿®æ”¹ç³»ç»Ÿè¯­è¨€æˆ–è€…æ‰€åœ¨åœ°åŒºä»¥åæ‰€æœ‰appéƒ½ä¼šé‡å¯ï¼Œä¸ç®¡ä½¿ç”¨é‚£ç§æ–¹å¼éƒ½ä¼šé‡æ–°è·å–æœ€æ–°çš„ç³»ç»Ÿè®¾ç½®ï¼Œè€Œå¦‚æœåªæ˜¯ä¿®æ”¹æ—¥å†çš„è¯appä¸ä¼šé‡å¯ä½†æ˜¯<code>autoupdatingCurrent</code>æ–¹æ³•è·å–åˆ°çš„localeä¹Ÿä¸ä¼šæ”¹å˜ã€‚</p><p>æˆ‘ä¸çŸ¥é“è¿™æ˜¯ç”±äºå®˜æ–¹æ–‡æ¡£æ²¡æœ‰åŠæ—¶æ›´æ–°è¿˜æ˜¯ç”±äºæˆ‘æ²¡æœ‰æ‰¾åˆ°è¿™ä¸¤ä¸ªæ–¹æ³•ä¹‹é—´çš„åŒºåˆ«ï¼Œå¦‚æœä½ çŸ¥é“ä»–ä»¬çš„åŒºåˆ«éº»çƒ¦å‘Šè¯‰æˆ‘ã€‚</p><ol start="2"><li>è·å–Localeå¯¹è±¡åŒ…å«çš„æœ¬åœ°åŒ–ä¿¡æ¯</li></ol><p>æœ¬åœ°åŒ–ä¿¡æ¯ä¼šéšç€è¯­è¨€ã€åœ°åŸŸã€æ–‡åŒ–çš„ä¸åŒè€Œä¸åŒï¼Œæ€»å…±åŒ…å«äº†å¤§æ¦‚åå‡ ä¸ªæ¡ç›®ï¼Œä¸‹é¢åˆ—ä¸¾å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ¡ç›®å¹¶ä¸”ä»¥å¤§é™†åœ°åŒºä¸ºä¾‹æ¥ç»™å‡ºç»“æœã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥ä¸­å›½å¤§é™†åœ°åŒºä¸ºä¾‹</span></span><br><span class="line"><span class="keyword">let</span> currentLocale <span class="operator">=</span> <span class="type">Locale</span>.autoupdatingCurrent</span><br><span class="line">currentLocale.identifier <span class="comment">// zh_CN</span></span><br><span class="line">currentLocale.languageCode <span class="operator">??</span> <span class="string">&quot;&quot;</span> <span class="comment">// zh</span></span><br><span class="line">currentLocale.regionCode <span class="operator">??</span> <span class="string">&quot;&quot;</span> <span class="comment">// CN</span></span><br><span class="line">currentLocale.scriptCode <span class="operator">??</span> <span class="string">&quot;&quot;</span> <span class="comment">// &quot;&quot;</span></span><br><span class="line">currentLocale.variantCode <span class="operator">??</span> <span class="string">&quot;&quot;</span> <span class="comment">// &quot;&quot;</span></span><br><span class="line">currentLocale.calendar <span class="comment">// gregorian (current)</span></span><br><span class="line">currentLocale.usesMetricSystem <span class="comment">// true</span></span><br><span class="line">currentLocale.currencySymbol <span class="operator">??</span> <span class="string">&quot;&quot;</span> <span class="comment">// Â¥</span></span><br><span class="line">currentLocale.currencyCode <span class="operator">??</span> <span class="string">&quot;&quot;</span> <span class="comment">// CNY</span></span><br><span class="line">currentLocale.quotationBeginDelimiter <span class="operator">??</span> <span class="string">&quot;&quot;</span> <span class="comment">// â€œ å‰å¼•å·</span></span><br><span class="line">currentLocale.quotationEndDelimiter <span class="operator">??</span> <span class="string">&quot;&quot;</span> <span class="comment">// â€ åå¼•å·</span></span><br></pre></td></tr></table></figure><ol start="3"><li>è·å–å½“å‰è¯­è¨€å’Œæ–¹è¨€</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> languageId <span class="operator">=</span> <span class="type">Bundle</span>.main.preferredLocalizations.first<span class="operator">!</span> <span class="comment">// zh-Hans</span></span><br><span class="line"><span class="keyword">let</span> locale <span class="operator">=</span> <span class="type">Locale</span>.current</span><br><span class="line"><span class="keyword">let</span> languageName <span class="operator">=</span> locale.localizedString(forLanguageCode: languageId)<span class="operator">!</span> <span class="comment">// ä¸­æ–‡</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„languageIdæ˜¯å¼€å‘è€…éœ€è¦çš„è€Œä¸åº”è¯¥è®©ç”¨æˆ·çœ‹åˆ°ï¼ŒlanguageNameæ˜¯å±•ç¤ºç»™ç”¨æˆ·çš„ã€‚</p><h1 id="æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´"><a href="#æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´" class="headerlink" title="æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´"></a>æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´</h1><ol><li>ä½¿ç”¨é¢„è®¾çš„æ ¼å¼</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> date <span class="operator">=</span> <span class="type">DateFormatter</span>.localizedString(from: <span class="type">Date</span>(), dateStyle: .short, timeStyle: .short) <span class="comment">// 2021/4/11 ä¸‹åˆ9:15:16</span></span><br></pre></td></tr></table></figure><p>æ ¹æ®å½“å‰æ‰€åœ¨çš„Localeï¼Œå°†å½“å‰æ—¶é—´æ ¼å¼åŒ–ï¼Œå…¶ä¸­æ—¥æœŸä½¿ç”¨â€œçŸ­æ ¼å¼â€ã€æ—¶é—´ä½¿ç”¨â€œä¸­æ ¼å¼ã€‚ä¸‹é¢æ˜¯å®˜æ–¹æ–‡æ¡£ä¸Šé¢çš„ä¸€ä¸ªå¯¹ä¸åŒæ ¼å¼çš„ç¤ºä¾‹ï¼š</p><table><thead><tr><th>Style</th><th>Date</th><th>Time</th><th>Description</th></tr></thead><tbody><tr><td>Short</td><td>6/10/13</td><td>11:03 AM</td><td>åªæœ‰æ•°å­—</td></tr><tr><td>Medium</td><td>Jun 10, 2013</td><td>11:03:15 AM</td><td>ç®€çŸ­æ–‡æœ¬</td></tr><tr><td>Long</td><td>June 10, 2013</td><td>11:03:15 AM PDT</td><td>å®Œæ•´æ–‡æœ¬</td></tr><tr><td>Full</td><td>Friday, June 10, 2013</td><td>11:03:15 AM Pacific Daylight Time</td><td>æ›´å¤šç»†èŠ‚</td></tr></tbody></table><p>ä¸‹é¢æ˜¯åœ¨ä¸åŒçš„è¯­è¨€å’Œåœ°åŒºä¸­ä¸­é•¿å’ŒçŸ­æ–‡æœ¬çš„æ—¶é—´æ ¼å¼ï¼š</p><table><thead><tr><th>Language (Region)</th><th>Medium style</th><th>Short style</th></tr></thead><tbody><tr><td>English (United States)</td><td>Jun 6, 2013</td><td>10:14 AM</td></tr><tr><td>French (France)</td><td>6 Jun 2013</td><td>10:14</td></tr><tr><td>Chinese (China)</td><td>2013å¹´6æœˆ6æ—¥</td><td>ä¸Šåˆ10:14</td></tr></tbody></table><ol start="2"><li>ä½¿ç”¨è‡ªå®šä¹‰çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dateFormatter <span class="operator">=</span> <span class="type">DateFormatter</span>()</span><br><span class="line"><span class="keyword">let</span> formatterString <span class="operator">=</span> <span class="type">DateFormatter</span>.dateFormat(fromTemplate: <span class="string">&quot;MMM d&quot;</span>, options: <span class="number">0</span>, locale: dateFormatter.locale)<span class="operator">!</span>  <span class="comment">// 4æœˆ11æ—¥</span></span><br><span class="line"><span class="comment">//        let formaterString = &quot;MMM d&quot; // 4æœˆ 11</span></span><br><span class="line">dateFormatter.dateFormat <span class="operator">=</span> formatterString </span><br><span class="line"><span class="keyword">let</span> date2 <span class="operator">=</span> dateFormatter.string(from: <span class="type">Date</span>()) </span><br></pre></td></tr></table></figure><p>åˆ†ä¸¤ç§æ–¹å¼åˆ›å»ºformatterStringï¼Œå½“ä½¿ç”¨<code>fromTemplate:options:locale</code>æ—¶å¾—åˆ°çš„dateStringæ˜¯4æœˆ11æ—¥ï¼›ç›´æ¥ä½¿ç”¨æ™®é€šæ–‡æœ¬æ—¶å¾—åˆ°çš„dateStringæ˜¯4æœˆ11ã€‚</p><p>ä¸‹é¢æ˜¯å‡ ä¸ªä¸åŒè¯­è¨€å’Œåœ°åŒºåˆ†åˆ«åœ¨ä½¿ç”¨å’Œä¸ä½¿ç”¨åœ°åŒºæ ¼å¼åŒ–ä¸‹çš„æ—¥æœŸï¼š</p><table><thead><tr><th>Language (Region)</th><th>Date using format string â€œMMM dâ€</th><th>Date using templat â€œdMMMâ€</th></tr></thead><tbody><tr><td>English (United States)</td><td>Nov 13</td><td>Nov 13</td></tr><tr><td>French (France)</td><td>nov. 13</td><td>13 nov.</td></tr><tr><td>Chinese (China)</td><td>11æœˆ13</td><td>11æœˆ13æ—¥ï½œ</td></tr></tbody></table><h1 id="æ•°å­—æ ¼å¼åŒ–"><a href="#æ•°å­—æ ¼å¼åŒ–" class="headerlink" title="æ•°å­—æ ¼å¼åŒ–"></a>æ•°å­—æ ¼å¼åŒ–</h1><ol><li>ä½¿ç”¨é¢„è®¾æ ·å¼æ ¼å¼åŒ–æ•°å­—</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myNumber: <span class="type">NSNumber</span> <span class="operator">=</span> <span class="number">234231.231</span></span><br><span class="line"><span class="keyword">let</span> numberString <span class="operator">=</span> <span class="type">NumberFormatter</span>.localizedString(from: myNumber, number: .decimal)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;numberString = <span class="subst">\(numberString)</span>&quot;</span>) <span class="comment">// numberString = 234,231.231</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é¢„è®¾æ ¼å¼è¿›è¡Œæ ¼å¼åŒ–æ•°å­—æ—¶ï¼Œåœ¨ä¸åŒçš„è¯­è¨€å’Œåœ°åŒºä¸‹çš„ä¾‹å­ï¼š</p><table><thead><tr><th>Style</th><th>Formatted string, <br> English (United States)</th><th>Formatted string,<br> Language (Region)</th></tr></thead><tbody><tr><td>Decimalï¼ˆå°æ•°ï¼‰</td><td>1,234.56</td><td>1.234,56 <br>Italian (Italy)</td></tr><tr><td>Currencyï¼ˆè´§å¸ï¼‰</td><td>$1,234.56</td><td>Â¥1,234.56<br>Chinese (China)</td></tr><tr><td>Percentï¼ˆç™¾åˆ†æ•°ï¼‰</td><td>123,456%</td><td><img src="../../images/international-data-format/arabic_percent.svg" width="72.548" height="13.019"><br>Arabic (Egypt)</td></tr><tr><td>Scientificï¼ˆç§‘å­¦è®¡æ•°æ³•ï¼‰</td><td>1.23456E+03</td><td>1,23456E3<br>Italian (Italy)</td></tr><tr><td>Spell Outï¼ˆè¯»ï¼‰</td><td>one thousand two hundred thirty-four point five six</td><td>ä¸€åƒäºŒç™¾ä¸‰åå››ç‚¹äº”å…­<br>Chinese (China)</td></tr></tbody></table><ol start="2"><li>è·å–ç”¨æˆ·è¾“å…¥çš„æ•°å­—</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> formatter <span class="operator">=</span> <span class="type">NumberFormatter</span>()</span><br><span class="line">formatter.numberStyle <span class="operator">=</span> .decimal</span><br><span class="line">formatter.isLenient <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> number <span class="operator">=</span> formatter.number(from: <span class="string">&quot;1,234,123.23&quot;</span>)<span class="operator">!</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;number = <span class="subst">\(number)</span>&quot;</span>) <span class="comment">// number = 1234123.23</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ç³»ç»Ÿå½“å‰çš„è¯­è¨€å’Œåœ°åŒºæŠŠç”¨æˆ·è¾“å…¥çš„å¸¦æœ‰å½“åœ°ç‰¹è‰²çš„æ•°å­—å­—ç¬¦ä¸²è½¬åŒ–æˆ<code>Number</code>æ ¼å¼ã€‚å…¶ä¸­<code>isLenient</code>è¡¨ç¤ºæ˜¯å¦å…è®¸æ ¼å¼ä¸å®Œå…¨æŒ‰ç…§æ ‡å‡†æ ¼å¼ï¼Œä¾‹å¦‚å¦‚æœè¿™é‡Œä½¿ç”¨<code>formatter.isLenient = false</code>ï¼Œå½“è¾“å…¥å­—ç¬¦ä¸²åªè¦ä¸æ˜¯æ ‡å‡†çš„<em>1,234,123.23</em>è€Œæ˜¯<em>1,23,4123.23</em>æˆ–è€…1,234123.23å°±ä¼šè¿”å›nilã€‚</p><h1 id="å…³äºæ—¥å†çš„æœ¬åœ°åŒ–"><a href="#å…³äºæ—¥å†çš„æœ¬åœ°åŒ–" class="headerlink" title="å…³äºæ—¥å†çš„æœ¬åœ°åŒ–"></a>å…³äºæ—¥å†çš„æœ¬åœ°åŒ–</h1><p>ä¸åŒåœ°åŒºä¹‹é—´çš„çºªå¹´æ–¹æ³•æœ‰å¾ˆå¤§çš„å·®åˆ«ï¼Œæ—¥æœ¬çš„å¹´ä»£å˜åŒ–å¾ˆå¿«ï¼ˆä»–ä»¬è¿˜åœ¨ç”¨å¤©çš‡çºªå¹´ï¼Œå°±åƒå’±ä»¬ä¸­å›½çš„å°å»ºç¤¾ä¼šï¼‰è€Œå…¬å†æˆ–è€…å†œå†çš„å¹´ä»£å˜åŒ–å°±ç›¸å¯¹è¾ƒæ…¢ï¼Œè€Œæœ‰çš„åœ°åŒºä¸€å¹´æœ‰13ä¸ªæœˆï¼Œä¸åŒçš„æ—¥å†å¯¹æ¯å‘¨çš„ç¬¬ä¸€å¤©å®šä¹‰ä¹Ÿä¸åŒï¼ˆå‘¨å…­ã€å‘¨æ—¥ã€å‘¨ä¸€éƒ½æœ‰ï¼‰ã€‚è¦å¤„ç†è¿™ä¹ˆå¤æ‚å¤šå˜çš„æ—¥å†ç›¸å…³é—®é¢˜å°±ä¸€å®šè¦ç”¨åˆ°<code>Calender</code>ç±»ã€‚</p><p>è·å–ç”¨æˆ·å½“å‰ä½¿ç”¨çš„æ—¥å†ä½¿ç”¨<code>Calendar.current</code>ã€‚</p><p>è·å–ä¸€ä¸ªæ—¥æœŸçš„ç»„æˆéƒ¨åˆ†ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> calendar <span class="operator">=</span> <span class="type">Calendar</span>.current</span><br><span class="line"><span class="keyword">let</span> components <span class="operator">=</span> calendar.dateComponents([.era, .year, .month, .weekday, .day, .hour, .minute, .second], from: <span class="type">Date</span>())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å½“å‰æ—¶é—´ç»„ä»¶ï¼š<span class="subst">\(String(describing: components.era<span class="operator">!</span>))</span>, <span class="subst">\(String(describing: components.year<span class="operator">!</span>))</span>, <span class="subst">\(String(describing: components.month<span class="operator">!</span>))</span>, <span class="subst">\(String(describing: components.weekday<span class="operator">!</span>))</span>, <span class="subst">\(String(describing: components.day<span class="operator">!</span>))</span>, <span class="subst">\(String(describing: components.hour<span class="operator">!</span>))</span>, <span class="subst">\(String(describing: components.minute<span class="operator">!</span>))</span>, <span class="subst">\(String(describing: components.second<span class="operator">!</span>))</span>&quot;</span>) <span class="comment">// å½“å‰æ—¶é—´ç»„ä»¶ï¼š1, 2021, 4, 1, 11, 22, 32, 4</span></span><br></pre></td></tr></table></figure><blockquote><p>å½“ä½¿ç”¨æ—¥æœ¬å†æˆ–è€…ä½›æ•™æ—¥å†çš„æ—¶å€™ï¼Œæ¯æ¬¡è·å–æˆ–è€…è®¾ç½®å¹´ä»½ä¸€å®šè¦åŒæ—¶è·å–æˆ–è€…è®¾ç½®å¹´ä»£ã€‚</p></blockquote><p>æ›´å¤šå…³äºæ—¥å†çš„å†…å®¹å¯ä»¥å‚è€ƒä¸€ä¸‹<a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html#//apple_ref/doc/uid/10000039i">å®˜æ–¹æ–‡æ¡£</a></p><h1 id="Localeå’Œæ—¶åŒºç›¸å…³çš„é€šçŸ¥"><a href="#Localeå’Œæ—¶åŒºç›¸å…³çš„é€šçŸ¥" class="headerlink" title="Localeå’Œæ—¶åŒºç›¸å…³çš„é€šçŸ¥"></a>Localeå’Œæ—¶åŒºç›¸å…³çš„é€šçŸ¥</h1><p>è¦åŠæ—¶çš„è·å–Localeæˆ–è€…æ—¶åŒºå˜åŒ–çš„é€šçŸ¥å¯ä»¥ç›‘å¬<code>NSCurrentLocaleDidChangeNotification</code>å’Œ<code>NSSystemTimeZoneDidChangeNotification</code>é€šçŸ¥ã€‚</p><p>è·å–é€šçŸ¥åœ¨ç”¨æˆ·è¿›è¡Œè·¨å›½é•¿é€”æ—…è¡Œçš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œå½“ç”¨æˆ·æ—¶åŒºæ”¹å˜åappèƒ½å¤ŸåŠæ—¶å˜åŒ–å¯ä»¥ç»™ç”¨æˆ·ä¸€ä¸ªéå¸¸æ£’çš„ä½“éªŒã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æƒ³è¦å¾ˆå®Œå–„çš„æœ¬åœ°åŒ–ä¸€ä¸ªAppæ˜¯ä¸å®¹æ˜“çš„ï¼Œä¸ä»…è¦æŠŠæ–‡å­—æœ¬åœ°åŒ–è¿˜è¦æŠŠæ—¥æœŸã€æ—¶é—´ã€æ—¥å†ã€æ•°å­—ç­‰å†…å®¹æœ¬åœ°åŒ–ï¼Œè¿™äº›å†…å®¹åœ¨ä¸€ä¸ªappä¸­æ˜¯æ— å¤„ä¸åœ¨çš„ï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬è¦éšæ—¶è®°ç€è‡ªå·±æ˜¯åœ¨åšä¸€ä¸ªå›½é™…åŒ–çš„Appã€‚ä¸ºäº†èƒ½ç»™å…¨ä¸–ç•Œå„åœ°çš„ç”¨æˆ·ä¸€ä¸ªæ›´å¥½çš„ä½¿ç”¨ä½“éªŒï¼Œå°½åŠ›åšå¥½è¿™é¡¹å·¥ä½œå§ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Xcode </tag>
            
            <tag> å›½é™…åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‹¹æœå®˜æ–¹çš„iOS Appå›½é™…åŒ–å·¥ä½œæµ</title>
      <link href="xcode/international-user-facing-text/"/>
      <url>xcode/international-user-facing-text/</url>
      
        <content type="html"><![CDATA[<p>å›½é™…åŒ–æ˜¯å‡ºæµ·åº”ç”¨éå¸¸é‡è¦çš„ä¸€ä¸ªåŸºç¡€æ­¥éª¤ï¼Œå…¶ä¸­å¤šè¯­è¨€çš„é€‚é…æ˜¯é‡ä¸­ä¹‹é‡ã€‚Xcodeè‡ªå¸¦äº†å¸®åŠ©å¼€å‘è€…è¿›è¡ŒAppæœ¬åœ°åŒ–çš„åŠŸèƒ½ï¼Œå…¶ä¸­åŒ…æ‹¬å¤šè¯­è¨€æ–‡ä»¶çš„å¯¼å…¥å’Œå¯¼å‡ºï¼Œä½¿ç”¨è¿™äº›åŠŸèƒ½å¯ä»¥å¾ˆä¸æ»‘çš„å®Œæˆå¤šè¯­è¨€çš„å·¥ä½œã€‚</p><a id="more"></a><p><img src="../../images/first/international-user-facing-text.png" alt="iOSå›½é™…åŒ–"></p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p>Appä¸­æœ‰ä¸€äº›å›ºå®šå†…å®¹çš„æ§ä»¶æ˜¯å¯ä»¥ç›´æ¥åˆ©ç”¨IBæ–‡ä»¶æ¥åšå¤šè¯­è¨€çš„ï¼Œå…·ä½“æ–¹æ³•å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ä¹‹å‰çš„<a href="https://www.iosprogrammer.tech/xcode/language-internalization-ib/">è¿™ç¯‡æ–‡ç« </a>ï¼Œæ–‡ç« ä¸­ä¹Ÿè®²äº†æ€ä¹ˆæ·»åŠ å¤šè¯­è¨€çš„æ“ä½œã€‚</p><p>é™¤äº†ä¸€äº›å›ºå®šå†…å®¹çš„æ§ä»¶ä¹‹å¤–è¿˜ä¼šæœ‰ä¸€äº›å…¶ä»–å†…å®¹éœ€è¦å¼€å‘è€…é€šè¿‡ä»£ç çš„å½¢å¼æ¥æœ¬åœ°åŒ–ï¼Œæ¯”å¦‚å¯å˜å†…å®¹çš„æ§ä»¶ã€é”™è¯¯æç¤ºä¿¡æ¯ã€å¯Œæ–‡æœ¬ã€Appåç§°ç­‰ã€‚é€šè¿‡ä¸‹é¢å‡ ä¸ªæ­¥éª¤å¯ä»¥ç»™è¿™äº›å†…å®¹æ·»åŠ å¤šè¯­è¨€ã€‚</p><h1 id="æ ‡è®°éœ€è¦æœ¬åœ°åŒ–çš„æ–‡æœ¬"><a href="#æ ‡è®°éœ€è¦æœ¬åœ°åŒ–çš„æ–‡æœ¬" class="headerlink" title="æ ‡è®°éœ€è¦æœ¬åœ°åŒ–çš„æ–‡æœ¬"></a>æ ‡è®°éœ€è¦æœ¬åœ°åŒ–çš„æ–‡æœ¬</h1><p>Foundationæ¡†æ¶ä¸­ä½¿ç”¨<code>NSLocalizedString(_:tableName:bundle:value:comment:)</code>æ¥æ ‡è®°éœ€è¦æœ¬åœ°åŒ–çš„æ–‡æœ¬ï¼Œé€šå¸¸tableName/bundleå’Œvalueç›´æ¥ä½¿ç”¨é»˜è®¤å€¼å°±å¯ä»¥äº†ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NSLocalizedString</span>(<span class="string">&quot;Label1&quot;</span>, comment: <span class="string">&quot;This is the first label&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šé¢çš„ä»£ç æœ€ç»ˆçš„æ ·å­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* This is the first label */</span></span><br><span class="line"><span class="string">&quot;Label1&quot;</span> <span class="operator">=</span> <span class="string">&quot;First Label 111&quot;</span>;</span><br></pre></td></tr></table></figure><p>ç¿»è¯‘æ–‡ä»¶æ˜¯key-valueçš„æ ¼å¼ï¼Œå…¶ä¸­keyæ˜¯<code>NSLocalizedString</code>å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåœ¨è¿™é‡Œå°±æ˜¯<em>Label1</em>ã€‚é»˜è®¤çš„valueä¹Ÿæ˜¯<em>Label1</em>ã€‚</p><p><code>comment</code>å‚æ•°æ˜¯è¿™å¯¹key-valueçš„æ³¨é‡Šï¼Œä¸»è¦æ˜¯åœ¨è¿›è¡Œäººå·¥ç¿»è¯‘çš„æ—¶å€™æä¾›ä¸€ä¸ªè¯´æ˜ä½œç”¨ï¼Œå°¤å…¶æ˜¯å½“æœ‰å¤šä¸ªç›¸ä¼¼çš„æ–‡æœ¬æ—¶è¿™ä¸ªæ³¨é‡Šå°±æœ‰ä½œç”¨äº†ã€‚</p><h1 id="ä½¿ç”¨Xcodeå¯¼å‡ºæœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶"><a href="#ä½¿ç”¨Xcodeå¯¼å‡ºæœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨Xcodeå¯¼å‡ºæœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶"></a>ä½¿ç”¨Xcodeå¯¼å‡ºæœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶</h1><p>å½“è¿˜æ²¡æœ‰è¿›è¡Œç¿»è¯‘çš„æ—¶å€™ï¼Œä½¿ç”¨<code>NSLocalizedString</code>çš„åœ°æ–¹å°±ä¼šæ˜¾ç¤º<em>key</em>æ–‡æœ¬ï¼ŒXcodeä¼šåœ¨å¯¼å‡ºå¤šè¯­è¨€æ–‡ä»¶çš„æ—¶å€™åœ¨é¡¹ç›®ä¸­æœå¯»è¿™ä¸ªå‡½æ•°ã€‚</p><p>å¯¼å‡ºå¤šè¯­è¨€æ–‡ä»¶çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ä½¿ç”¨Xcodeæ‰“å¼€é¡¹ç›®</li><li>åœ¨å·¦ä¾§çš„ç›®å½•å¯¼èˆªæ ä¸­ç‚¹å‡»é¡¹ç›®åæ‰“å¼€.xcodeproj</li><li>åœ¨PROJECTä¸­é€‰æ‹©é¡¹ç›®åï¼Œå¹¶åœ¨Infoé€‰é¡¹å¡çš„Locationsä¸­æ·»åŠ ä¸Šå…¶ä»–è¯­è¨€</li><li>ç‚¹å‡»Xcodeèœå•æ ä¸­Editoré€‰é¡¹çš„Export for Localization</li><li>é€‰æ‹©å¯¼å‡ºçš„æ–‡ä»¶å¤¹å¹¶å‘½ååç‚¹å‡»å¯¼å‡º</li></ol><h1 id="ä¿®æ”¹æœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶"><a href="#ä¿®æ”¹æœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹æœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶"></a>ä¿®æ”¹æœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶</h1><p>å¯¼å‡ºçš„æ–‡ä»¶ä¸­åŒ…å«å¤šä¸ª.xclocå­æ–‡ä»¶å¤¹ï¼Œæ¯ä¸€ä¸ªxlocæ–‡ä»¶å¤¹ä¸­çš„Localized Contentsä¸‹çš„.xliffæ–‡ä»¶å°±æ˜¯è¦å¡«å†™ç¿»è¯‘å†…å®¹çš„æ–‡ä»¶ã€‚</p><p>æ‰“å¼€xliffæ–‡ä»¶å¹¶åœ¨å…¶ä¸­æœç´¢â€œ<source>â€ï¼Œæœç´¢åˆ°çš„æ–‡æœ¬å°±æ˜¯éœ€è¦ç¿»è¯‘çš„å†…å®¹ã€‚æ¯ä¸ª<source>å¯¹åº”ä¸€ä¸ª<target>ï¼ŒæŠŠè¯‘æ–‡æ”¾åˆ°<target>å’Œ</target>ä¸­é—´ã€‚å°±åƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;source&gt;First Label 111&lt;&#x2F;source&gt;</span><br><span class="line">&lt;target&gt;ç¬¬ä¸€ä¸ªæ–‡æœ¬&lt;&#x2F;target&gt;</span><br></pre></td></tr></table></figure><p>sourceæ˜¯Development Languageçš„è¯­è¨€æ–‡æœ¬ï¼Œtargetæ˜¯è¯‘æ–‡ã€‚ä¸Šé¢è¿™ä¸ªä¾‹å­çš„Development Languageæ˜¯è‹±æ–‡ï¼Œtargetæ˜¯ä¸­æ–‡ã€‚</p><p>sourceä¸æ˜¯<code>NSLocalizedString</code>ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„keyï¼Œè€Œæ˜¯Development Languageä¸‹keyå¯¹åº”çš„valueï¼Œæ‰€ä»¥å¦‚æœå¼€å‘è¯­è¨€çš„è¯‘æ–‡å˜äº†ï¼Œè¿™é‡Œçš„sourceä¹Ÿä¼šå˜ã€‚</p><h1 id="ä½¿ç”¨Xcodeå¯¼å…¥æœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶"><a href="#ä½¿ç”¨Xcodeå¯¼å…¥æœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨Xcodeå¯¼å…¥æœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶"></a>ä½¿ç”¨Xcodeå¯¼å…¥æœ¬åœ°åŒ–å¤šè¯­è¨€æ–‡ä»¶</h1><p>æŠŠæ‰€æœ‰éœ€è¦ç¿»è¯‘çš„å†…å®¹ç¿»è¯‘å®Œæˆåï¼Œä½¿ç”¨Xcodeæ‰“å¼€é¡¹ç›®ï¼Œå¹¶æ‰“å¼€.xcodeprojåé€‰æ‹©Editor-&gt;Import Localizationsï¼Œæ‰“å¼€ç¿»è¯‘æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•æŠŠ.xclocæŒ¨ä¸ªå¯¼å…¥å°±å¯ä»¥äº†ã€‚</p><p>è¿™é‡Œå»ºè®®å…ˆç¿»è¯‘å¹¶å¯¼å…¥Development Languageçš„.xclocæ–‡ä»¶å¤¹ï¼Œå†æ‰§è¡Œä¸€æ¬¡å¯¼å‡ºæ“ä½œåå†ç¿»è¯‘å…¶ä»–è¯­è¨€å¹¶å¯¼å…¥ã€‚å› ä¸ºç¬¬ä¸€æ¬¡å¯¼å‡ºæ—¶sourceæ˜¯NSLocalizedStringçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œè¿™ä¸ªå‚æ•°å¯èƒ½å¹¶ä¸æ˜¯ä¸»è¯­è¨€çš„æœ€ç»ˆç¿»è¯‘ï¼Œå¦‚æœå…¶ä»–è¯­è¨€éƒ½æŠŠç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºsourceæ¥ç¿»è¯‘å°±ä¼šé€ æˆæ‰¾ä¸åˆ°å¯¹åº”ç¿»è¯‘çš„é—®é¢˜ã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>iOSå’ŒMacOSç³»ç»Ÿä»¥åŠå®ƒä»¬è‡ªå¸¦çš„Appåœ¨æœ¬åœ°åŒ–æ–¹é¢åšçš„éå¸¸å‡ºè‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ²¡æœ‰ç‰¹æ®Šè¦æ±‚çš„æƒ…å†µä¸‹å°½é‡ä¾èµ–Xcodeæä¾›çš„åŠŸèƒ½æ¥å®ç°æœ¬åœ°åŒ–çš„éœ€æ±‚ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Xcode </tag>
            
            <tag> å›½é™…åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿…çœ‹ï¼2ä¸ªå…³äºiOSå¼€å‘å¤šè¯­è¨€çš„çŸ¥è¯†ç‚¹</title>
      <link href="xcode/iphone-selected-language/"/>
      <url>xcode/iphone-selected-language/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æŠŠAppè¿›è¡Œå›½é™…åŒ–çš„è¿‡ç¨‹ä¸­ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œè¿™ç¯‡æ–‡ç« æ¥çœ‹ä¸€ä¸‹Development Languageæ˜¯ä»€ä¹ˆä»¥åŠæ€ä¹ˆä¿®æ”¹å®ƒï¼Œå¹¶ä¸”çœ‹ä¸€ä¸‹ç³»ç»Ÿæ˜¯æ€ä¹ˆæ¥é€‰æ‹©ä½¿ç”¨å“ªä¸ªè¯­è¨€çš„ã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="ä»€ä¹ˆæ˜¯Development-Languageå’Œæ€ä¹ˆä¿®æ”¹å®ƒ"><a href="#ä»€ä¹ˆæ˜¯Development-Languageå’Œæ€ä¹ˆä¿®æ”¹å®ƒ" class="headerlink" title="ä»€ä¹ˆæ˜¯Development Languageå’Œæ€ä¹ˆä¿®æ”¹å®ƒ"></a>ä»€ä¹ˆæ˜¯Development Languageå’Œæ€ä¹ˆä¿®æ”¹å®ƒ</h1><p>åœ¨è¿›è¡Œå›½é™…åŒ–çš„è¿‡ç¨‹ä¸­éœ€è¦æŠŠAppä¸­çš„æ–‡å­—ç¿»è¯‘æˆå¤šä¸ªè¯­è¨€ï¼Œå…¶ä¸­æœ‰ä¸€ç§è¯­è¨€æ˜¯Development Languageï¼Œå½“æ²¡æœ‰ä»»ä½•ä¸€ç§è¯­è¨€æ»¡è¶³å½“å‰è®¾å¤‡çš„æ—¶å€™ç³»ç»Ÿä¼šä½¿ç”¨Development Languageã€‚</p><p>å¯ä»¥é€šè¿‡ä¿®æ”¹<em>project.pbxproj</em>æ–‡ä»¶æ¥ä¿®æ”¹Development Languageã€‚</p><ol><li>æ‰“å¼€é¡¹ç›®æ‰€åœ¨æ–‡ä»¶å¤¹</li><li>å³å‡».xcodeprojæ–‡ä»¶å¹¶é€‰æ‹©*Show package Content(æ˜¾ç¤ºåŒ…å†…å®¹)*ï¼ˆåº”è¯¥æ˜¯ç¬¬ä¸‰ä¸ªé€‰é¡¹ï¼‰</li><li>åŒå‡»<em>project.phxproj</em>æ‰“å¼€æ–‡ä»¶</li><li>æœç´¢<em>developmentRegion</em>ï¼Œå¹¶å°†å†…å®¹ä¿®æ”¹ä¸ºæƒ³è¦çš„è¯­è¨€ã€‚è¿™ä¸ªåœ°æ–¹çš„è¯­è¨€æ˜¯åœ¨æˆ‘ä»¬æ·»åŠ å¤šè¯­è¨€æ—¶çš„ç¼©å†™ï¼Œæ¯”å¦‚English=enã€Chinese, Simpilied=zh-Hansç­‰ç­‰ã€‚</li></ol><h1 id="iPhoneæ˜¯æ€ä¹ˆé€‰æ‹©å½“å‰ä½¿ç”¨çš„è¯­è¨€çš„"><a href="#iPhoneæ˜¯æ€ä¹ˆé€‰æ‹©å½“å‰ä½¿ç”¨çš„è¯­è¨€çš„" class="headerlink" title="iPhoneæ˜¯æ€ä¹ˆé€‰æ‹©å½“å‰ä½¿ç”¨çš„è¯­è¨€çš„"></a>iPhoneæ˜¯æ€ä¹ˆé€‰æ‹©å½“å‰ä½¿ç”¨çš„è¯­è¨€çš„</h1><ol><li>åœ¨iPhoneæ‰‹æœºçš„è®¾ç½®ä¸­â€œè¯­è¨€ä¸åœ°åŒºâ€é€‰æ‹©çš„â€œiPhoneè¯­è¨€â€æ˜¯æœ€é«˜ä¼˜å…ˆçº§ï¼Œå¦‚æœAppçš„å¤šè¯­è¨€åŒ…å«è¿™é‡Œè®¾ç½®çš„è¯­è¨€ä¼šç›´æ¥ä½¿ç”¨ã€‚</li><li>å¦‚æœAppçš„å¤šè¯­è¨€ä¸åŒ…å«â€œiPhoneè¯­è¨€â€ï¼Œé‚£ä¹ˆä¼šæŸ¥æ‰¾â€œé¦–é€‰è¯­è¨€é¡ºåºâ€ä¸­æ˜¯å¦æœ‰åŒ…å«åœ¨å¤šè¯­è¨€ä¸­çš„è¯­è¨€ï¼ŒæŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ‰¾åˆ°ä¸€ä¸ªè¯­è¨€åä¼šç›´æ¥ä½¿ç”¨è¿™ä¸ªè¯­è¨€ã€‚</li><li>å¦‚æœâ€œé¦–é€‰è¯­è¨€é¡ºåºâ€ä¸­ä¹Ÿæ²¡æœ‰ç¬¦åˆè¦æ±‚çš„ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨Development Languageä½œä¸ºAppçš„è¯­è¨€ã€‚</li></ol><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div>]]></content>
      
      
      
        <tags>
            
            <tag> Xcode </tag>
            
            <tag> å›½é™…åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS Appå›½é™…åŒ–å¿…çœ‹ï¼ä½¿ç”¨Xibä½¿Appå®Œæˆå›½é™…åŒ–åŠŸèƒ½</title>
      <link href="xcode/language-internalization-ib/"/>
      <url>xcode/language-internalization-ib/</url>
      
        <content type="html"><![CDATA[<p>åˆ©ç”¨Xibæˆ–è€…Storyboardæ¥åšiOSçš„å›½é™…åŒ–æ˜¯ä¸€ç§ç‰¹åˆ«æ–¹ä¾¿ä¸”é«˜æ•ˆçš„æ–¹å¼ã€‚é€šè¿‡ç®€å•çš„è®¾ç½®åå°±å¯ä»¥åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­æŠŠå†…å®¹ç¿»è¯‘ä¸ºä¸åŒçš„è¯­ç§ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹åˆ©ç”¨IBæ¥åšå›½é™…åŒ–è¦æ³¨æ„çš„ä¸€äº›é—®é¢˜ï¼Œå¸Œæœ›èƒ½å¤Ÿå¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../images/xcode-internaiton-ib/cover.png"></p><h1 id="å®Œæ•´äº†è§£å›½é™…åŒ–æ­¥éª¤"><a href="#å®Œæ•´äº†è§£å›½é™…åŒ–æ­¥éª¤" class="headerlink" title="å®Œæ•´äº†è§£å›½é™…åŒ–æ­¥éª¤"></a>å®Œæ•´äº†è§£å›½é™…åŒ–æ­¥éª¤</h1><p><img src="../../images/xcode-internaiton-ib/overview.png"></p><ol><li>å¢åŠ å›½é™…åŒ–è¯­è¨€ã€‚åœ¨xcodeå·¦ä¾§çš„é¡¹ç›®ç›®å½•æ ‘ä¸­ç‚¹å‡»<strong>é¡¹ç›®åç§°-&gt;ç‚¹å‡»â€œPROJECTâ€ä¸­çš„é¡¹ç›®åç§°-&gt;Info-&gt;Locatlizations</strong>ï¼Œä¹‹åç‚¹å‡»+å·å°±å¯ä»¥å¢åŠ è‡ªå·±éœ€è¦çš„è¯­è¨€äº†ã€‚</li><li>åœ¨é€‰æ‹©è¦å¢åŠ çš„è¯­è¨€ä¹‹åä¼šå¼¹å‡ºè®¾ç½®å¼¹çª—ï¼ŒæŠŠéœ€è¦å›½é™…åŒ–çš„IBï¼ˆXibã€Storyboardï¼‰æ–‡ä»¶å‹¾é€‰ä¸Šï¼Œå¹¶ä¸”åœ¨File Typesé€‰é¡¹ä¸­é€‰æ‹©<em>Localizable Strings</em>ã€‚</li><li>é¡¹ç›®ç›®å½•æ ‘ä¸­å¯¹åº”çš„IBæ–‡ä»¶å°±ä¼šæˆä¸ºæ–‡ä»¶å¤¹çš„å½¢å¼ï¼Œå¯ä»¥çœ‹åˆ°åˆšåˆšæ·»åŠ çš„è¯­è¨€æ–‡ä»¶ï¼ˆ*.strings(xxx)ï¼‰ã€‚</li></ol><h1 id="æ·»åŠ è¿‡è¯­è¨€ååˆè¦å¢åŠ UILabelç­‰æ§ä»¶å›½é™…åŒ–"><a href="#æ·»åŠ è¿‡è¯­è¨€ååˆè¦å¢åŠ UILabelç­‰æ§ä»¶å›½é™…åŒ–" class="headerlink" title="æ·»åŠ è¿‡è¯­è¨€ååˆè¦å¢åŠ UILabelç­‰æ§ä»¶å›½é™…åŒ–"></a>æ·»åŠ è¿‡è¯­è¨€ååˆè¦å¢åŠ UILabelç­‰æ§ä»¶å›½é™…åŒ–</h1><p>éšç€ç‰ˆæœ¬çš„å‡çº§æˆ–è€…éœ€æ±‚çš„æ”¹å˜ï¼Œæˆ‘ä»¬çš„IBæ–‡ä»¶å¾ˆå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨äº†IBæ–‡ä»¶è¿›è¡Œå›½é™…åŒ–ï¼Œåˆä¸èƒ½æ¯æ¬¡æ”¹ç‰ˆé‡æ–°åšä¸€éå›½é™…åŒ–çš„å·¥ä½œï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬å¯ä»¥å®šä½åˆ°æ–°å¢çš„æ§ä»¶å¹¶è®¾ç½®è¯­è¨€ã€‚</p><p>åœ¨xxx.storyboad(Base)æ–‡ä»¶ä¸­é€‰ä¸­å¢åŠ çš„æ§ä»¶ï¼Œæ‰“å¼€å³ä¾§å¸®åŠ©æ ï¼Œæ‰¾åˆ°ç¬¬å››ä¸ªé€‰é¡¹å¡(Show the Identity Inspector)ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª<strong>Object ID</strong>ã€‚</p><p>æŠŠè¿™ä¸ªIDå¤åˆ¶åˆ°å…¶ä»–è¯­è¨€çš„.stringsæ–‡ä»¶ä¸­ï¼Œå°±å¯ä»¥è®¾ç½®å¯¹åº”çš„è¯­è¨€ç¿»è¯‘äº†ã€‚å…¶ä¸­UILabelã€UIButtonå’ŒUITextFiledçš„placehoderçš„è®¾ç½®æ–¹æ³•å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;* Class &#x3D; &quot;UITextField&quot;; placeholder &#x3D; &quot;ios&quot;; ObjectID &#x3D; &quot;RCg-HC-Mcn&quot;; *&#x2F;</span><br><span class="line">&quot;RCg-HC-Mcn.placeholder&quot; &#x3D; &quot;ios&quot;;</span><br><span class="line"></span><br><span class="line">&#x2F;* Class &#x3D; &quot;UIButton&quot;; normalTitle &#x3D; &quot;Button&quot;; ObjectID &#x3D; &quot;isH-qk-FQm&quot;; *&#x2F;</span><br><span class="line">&quot;isH-qk-FQm.normalTitle&quot; &#x3D; &quot;Button&quot;;</span><br><span class="line"></span><br><span class="line">&#x2F;* Class &#x3D; &quot;UILabel&quot;; text &#x3D; &quot;iosprogrammer.tech&quot;; ObjectID &#x3D; &quot;pLC-qp-tdZ&quot;; *&#x2F;</span><br><span class="line">&quot;pLC-qp-tdZ.text&quot; &#x3D; &quot;iosprogrammer.tech&quot;;</span><br></pre></td></tr></table></figure><h1 id="ä¸€äº›æ€»ç»“"><a href="#ä¸€äº›æ€»ç»“" class="headerlink" title="ä¸€äº›æ€»ç»“"></a>ä¸€äº›æ€»ç»“</h1><ol><li>å¦‚æœä¸€ä¸ªç”¨æˆ·çš„è®¾å¤‡ç³»ç»Ÿè¯­è¨€æ˜¯æ²¡æœ‰è¿›è¡Œé€‚é…çš„ï¼Œä»–ä¸‹è½½äº†åº”ç”¨åï¼Œå°†ä¼šä½¿ç”¨Baseè¯­è¨€ã€‚æ¯”å¦‚ä¸€ä¸ªè‘¡è„è¨€è¯­çš„ç”¨æˆ·ä¸‹è½½äº†ä¸€ä¸ªé€‚é…äº†æ—¥æ–‡å’ŒéŸ©æ–‡çš„appï¼Œå¹¶ä¸”è¿™ä¸ªappçš„Baseè¯­è¨€æ˜¯æ—¥æ–‡ï¼Œé‚£ä¹ˆè¿™ä¸ªç”¨æˆ·å°†ä¼šçœ‹åˆ°æ—¥æ–‡ã€‚</li><li>ä»ä¸€ä¸ªå·²ç»é€‚é…çš„è¯­è¨€åˆ‡æ¢åˆ°ä¸€ä¸ªæ²¡æœ‰é€‚é…çš„è¯­è¨€ï¼Œä»ç„¶ä¼šä½¿ç”¨åˆ‡æ¢å‰çš„è¯­è¨€ã€‚æ¯”å¦‚ä»é€‚é…äº†çš„ä¸­æ–‡ç®€ä½“åˆ‡æ¢åˆ°äº†æ²¡æœ‰é€‚é…çš„æ—¥æ–‡ï¼Œé‚£ç”¨æˆ·çœ‹åˆ°çš„ä»ç„¶ä¼šæ˜¯ä¸­æ–‡ç®€ä½“ã€‚</li></ol><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€šè¿‡è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å­¦ä¹ äº†å‡ ä¸ªåœ¨ä½¿ç”¨IBæ¥åšiOSå›½é™…åŒ–çš„è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå¦‚æœæƒ³è¦å……åˆ†äº†è§£åˆ°è¿™æ–¹é¢çš„çŸ¥è¯†å»ºè®®é€šç¯‡é˜…è¯»ä¸€ä¸‹<a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPInternational/Introduction/Introduction.html#//apple_ref/doc/uid/10000171i-CH1-SW1">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Xcode </tag>
            
            <tag> å›½é™…åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘Šè¯‰ä½ 3ä¸ªå®¹æ˜“è¢«å¿½ç•¥çš„å¯èƒ½é€ æˆå¾ªç¯å¼•ç”¨çš„æƒ…å†µå’Œ2ç§ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨çš„æƒ…å†µ</title>
      <link href="ios/retain-cycle-problems/"/>
      <url>ios/retain-cycle-problems/</url>
      
        <content type="html"><![CDATA[<p>å¾ªç¯å¼•ç”¨æ˜¯iOSå¼€å‘ç§ååˆ†å¸¸è§çš„ä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯é¢è¯•ä¸­å‡ºç°é¢‘ç‡å¾ˆé«˜çš„ä¸€ç±»é—®é¢˜ï¼Œæœ‰äº›ç»éªŒçš„å¼€å‘è€…å¯¹å¾ªç¯å¼•ç”¨éƒ½æœ‰æ‰€äº†è§£ï¼Œä¹Ÿèƒ½åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°½é‡é¿å…æ­¤ç±»é—®é¢˜ï¼Œä½†æ˜¯éšç€é¡¹ç›®çš„æ‰©å¤§å’Œå¼€å‘æ—¶é—´æœ‰é™æœ‰æ—¶ä¼šä¸ç»æ„è§ç»™å¼•ç”¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p><p>è¿™ç±»é—®é¢˜è™½ç„¶å¾ˆå¤šæ—¶å€™ä¸ä¼šå‡ºç°ä¸¥é‡çš„å½±å“ï¼Œä½†æ˜¯åœ¨å…¶ä»–ä¸€äº›æ¡ä»¶ä¸‹å¯èƒ½ä¼šå¸¦æ¥å¾ˆè¹Šè··çš„ç°è±¡ï¼Œæœ¬äººå°±æ·±å—å…¶å®³ã€‚æ‰€ä»¥åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹å…³äºå¾ªç¯å¼•ç”¨çš„ä¸€äº›å¸¸ç”¨çŸ¥è¯†ï¼Œä¹Ÿå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="ä»€ä¹ˆæ˜¯å¾ªç¯å¼•ç”¨"><a href="#ä»€ä¹ˆæ˜¯å¾ªç¯å¼•ç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯å¾ªç¯å¼•ç”¨"></a>ä»€ä¹ˆæ˜¯å¾ªç¯å¼•ç”¨</h1><p>é€ æˆå¾ªç¯å¼•ç”¨é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯iOSçš„å¼•ç”¨è®¡æ•°æœºåˆ¶ï¼Œè€Œåœ¨å¼•ç”¨è®¡æ•°æœºåˆ¶ä¸‹å¦‚æœæœ‰å¼•ç”¨ä¸èƒ½å¾—åˆ°å³æ—¶çš„é‡Šæ”¾å°±ä¼šé€ æˆäº†å†…å­˜æ³„æ¼ï¼Œè¿™å°±æ˜¯å¾ªç¯å¼•ç”¨ã€‚</p><p>å¹¶ä¸”ä¸ºäº†ç»´æŒAppçš„é«˜æ€§èƒ½ï¼Œè‹¹æœå¹¶ä¸æ²¡æœ‰ä¹Ÿä¸æ‰“ç®—å¼•å…¥ç±»ä¼¼Androidä¸­çš„åƒåœ¾å›æ”¶æœºåˆ¶ã€‚è¿™å°±é€ æˆäº†å¦‚æœæˆ‘ä»¬å¯¼è‡´äº†å¾ªç¯å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™å—å†…å­˜å°±æ— æ³•å¾—åˆ°å›æ”¶ã€‚</p><p>æ³„æ¼çš„å†…å­˜å¤šäº†ä¼šé€ æˆç³»ç»Ÿå¼ºåˆ¶killæ‰æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œè™½ç„¶è¿™ç§ç°è±¡æˆ‘è¿˜æ²¡æœ‰è§åˆ°è¿‡ä¸è¿‡åŸç†ä¸Šæ¥è¯´ä¼šå‡ºç°è¿™ç§æƒ…å†µçš„ã€‚</p><p>ä¸€æ—¦æœ‰æ²¡æœ‰å¾—åˆ°å³æ—¶å›æ”¶çš„å¯¹è±¡å†…å­˜ï¼Œè¿˜å¯èƒ½é€ æˆä¸€äº›æ— å¯é¢„æœŸçš„é—®é¢˜ã€‚æ¯”æ–¹è¯´æˆ‘é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼šç”±äºä¸€ä¸ªVCæ²¡æœ‰å¾—åˆ°å³æ—¶é‡Šæ”¾ï¼Œå¯¼è‡´é‡Œé¢çš„ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ä¸åœæ‰§è¡Œï¼Œæœ€ç»ˆå¯¼è‡´äº†è¥æ”¶ä¸åŠé¢„æœŸã€‚</p><p>æ‰€ä»¥å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ä¸€å®šè¦é‡è§†èµ·æ¥ã€‚</p><h1 id="ä¸‹é¢3ç§æƒ…å†µä¼šé€ æˆå¾ªç¯å¼•ç”¨"><a href="#ä¸‹é¢3ç§æƒ…å†µä¼šé€ æˆå¾ªç¯å¼•ç”¨" class="headerlink" title="ä¸‹é¢3ç§æƒ…å†µä¼šé€ æˆå¾ªç¯å¼•ç”¨"></a>ä¸‹é¢3ç§æƒ…å†µä¼šé€ æˆå¾ªç¯å¼•ç”¨</h1><p>ä¼šé€ æˆå¾ªç¯å¼•ç”¨é—®é¢˜çš„æƒ…å½¢å¾ˆå¤šï¼Œä¸‹é¢æˆ‘åˆ—ä¸¾äº†3ç§æƒ…å†µï¼Œå…¶ä¸­æœ‰ä¸€äº›æ˜¯è€ç”Ÿé•¿è°ˆï¼Œæœ‰äº›æ˜¯éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ï¼Œæœ‰äº›çœŸçš„æ˜¯æ‰‹æ»‘é€ æˆçš„ã€‚</p><p>åœ¨ç¼–ç è¿‡ç¨‹ä¸­æ—¶åˆ»è°¨è®°è¿™äº›æƒ…å†µçœŸçš„å¯ä»¥é¿å…å¾ˆå¤šé”™è¯¯å‘ç”Ÿã€‚</p><h3 id="block"><a href="#block" class="headerlink" title="block"></a>block</h3><p>è¿™é‡Œçš„blockæŒ‡çš„æ˜¯viewå¯¹vcçš„å›è°ƒã€modelå¯¹vcçš„å›è°ƒæˆ–è€…å­viewå¯¹çˆ¶viewçš„å›è°ƒã€‚</p><p>ä¸è®ºæ˜¯å­viewè¿˜æ˜¯vcä¸­çš„modelï¼Œæˆ‘ä»¬éƒ½ä¹ æƒ¯äºç”¨strongæ¥ä¿®é¥°å®ƒä»¬ï¼Œè¿™æ—¶å€™åœ¨å®ƒä»¬çš„blockå›è°ƒé‡Œé¢ç”¨åˆ°<code>self</code>çš„æ—¶å€™ä¸€å®šè¦ç”¨<code>weak self</code>ã€‚</p><p>å¹¶ä¸”ï¼Œåˆ‡è®°æˆå‘˜å˜é‡<code>_xxx</code>å¦‚æœåœ¨è¿™ç§blockä¸­ä½¿ç”¨ä¹Ÿä¼šé€ æˆå¾ªç¯å¼•ç”¨ã€‚ä½¿ç”¨å¼±æŒ‡é’ˆæ¥æŒ‡å‘æˆå‘˜å˜é‡æ˜¯ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå°±åƒè¿™æ ·<code>self-&gt;_redView.backgroundColor = [UIColor greenColor];</code></p><h3 id="strongä¿®é¥°çš„delegate"><a href="#strongä¿®é¥°çš„delegate" class="headerlink" title="strongä¿®é¥°çš„delegate"></a>strongä¿®é¥°çš„delegate</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“delegateè¦ä½¿ç”¨weakæ¥ä¿®é¥°ï¼Œä¸è¿‡åœ¨ç¼–ç è¿‡ç¨‹ä¸­ç”±äºç–å¿½å¯èƒ½ä¼šè¯¯ç”¨strongæ¥ä¿®é¥°delegateï¼Œæ‰€ä»¥å¦‚æœå½“ä½ é‡åˆ°å¾ªç¯å¼•ç”¨å¯æ˜¯æ€ä¹ˆä¹Ÿæ‰¾ä¸åˆ°åŸå› æ—¶ï¼Œä¸å¦¨ä»è¿™ä¸ªæ€è·¯æ‰¾æ‰¾ã€‚æˆ‘å°±é‡åˆ°è¿‡è¿™ç§æƒ…å†µğŸ˜­ ã€‚</p><h3 id="ä¸€äº›å¼‚æ­¥å›è°ƒ"><a href="#ä¸€äº›å¼‚æ­¥å›è°ƒ" class="headerlink" title="ä¸€äº›å¼‚æ­¥å›è°ƒ"></a>ä¸€äº›å¼‚æ­¥å›è°ƒ</h3><p>æœ‰ä¸€äº›å¼‚æ­¥å›è°ƒæ˜¯ä½¿ç”¨blockçš„å½¢å¼æ¥å¤„ç†çš„ï¼Œè¿™å°±å¯èƒ½å¼•èµ·å¾ªç¯å¼•ç”¨ã€‚</p><p>æœ‰ä¸€äº›ç³»ç»Ÿçš„åŠŸèƒ½æ¯”æ–¹è¯´NSTimerçš„å®šæ—¶ä»»åŠ¡å°±ä¼šå¯¹selfé€ æˆå¼ºå¼•ç”¨ã€‚</p><p>è¿˜æœ‰ä¸€äº›æ˜¯æˆ‘ä»¬è‡ªå·±çš„åŠŸèƒ½æ¯”æ–¹è¯´ç½‘ç»œè¯·æ±‚.</p><h1 id="ä¸‹é¢2ç§æƒ…å†µä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨"><a href="#ä¸‹é¢2ç§æƒ…å†µä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨" class="headerlink" title="ä¸‹é¢2ç§æƒ…å†µä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨"></a>ä¸‹é¢2ç§æƒ…å†µä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨</h1><h3 id="ç”¨Masonryç»™viewæ·»åŠ çº¦æŸ"><a href="#ç”¨Masonryç»™viewæ·»åŠ çº¦æŸ" class="headerlink" title="ç”¨Masonryç»™viewæ·»åŠ çº¦æŸ"></a>ç”¨Masonryç»™viewæ·»åŠ çº¦æŸ</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span>.redView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.top.equalTo(@<span class="number">130</span>);</span><br><span class="line">    make.left.equalTo(<span class="keyword">self</span>.view.mas_left).offset(<span class="number">10</span>);</span><br><span class="line">    make.width.equalTo(@<span class="number">60</span>);</span><br><span class="line">    make.height.equalTo(@<span class="number">40</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>è¿™ç§ç”¨æ³•æ˜¯ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨çš„ï¼Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSArray</span> *)mas_makeConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *))block &#123;</span><br><span class="line">    <span class="keyword">self</span>.translatesAutoresizingMaskIntoConstraints = <span class="literal">NO</span>;</span><br><span class="line">    MASConstraintMaker *constraintMaker = [[MASConstraintMaker alloc] initWithView:<span class="keyword">self</span>];</span><br><span class="line">    block(constraintMaker);</span><br><span class="line">    <span class="keyword">return</span> [constraintMaker install];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»æºç æ¥çœ‹ï¼Œè¿™é‡Œçš„blockå…¶å®æ˜¯ä¸€ä¸ªåŒæ­¥çš„æ–¹æ³•ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨çš„ã€‚</p><h3 id="ä½¿ç”¨UIViewé™æ€æ–¹æ³•å®ç°åŠ¨ç”»"><a href="#ä½¿ç”¨UIViewé™æ€æ–¹æ³•å®ç°åŠ¨ç”»" class="headerlink" title="ä½¿ç”¨UIViewé™æ€æ–¹æ³•å®ç°åŠ¨ç”»"></a>ä½¿ç”¨UIViewé™æ€æ–¹æ³•å®ç°åŠ¨ç”»</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">UIView</span> animateWithDuration:<span class="number">3</span> animations:^&#123;</span><br><span class="line">    <span class="keyword">self</span>.redView.backgroundColor = [<span class="built_in">UIColor</span> greenColor];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µè™½ç„¶åœ¨blocké‡Œé¢å¼•ç”¨åˆ°äº†selfï¼Œä½†æ˜¯ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨ã€‚å› ä¸º<code>animateWithDuration:</code>æ˜¯ä¸€ä¸ªç±»æ–¹æ³•ã€‚</p><h1 id="å¼€å‘ä¸­æ€ä¹ˆè§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜"><a href="#å¼€å‘ä¸­æ€ä¹ˆè§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜" class="headerlink" title="å¼€å‘ä¸­æ€ä¹ˆè§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜"></a>å¼€å‘ä¸­æ€ä¹ˆè§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜</h1><p>é¦–å…ˆè¿™é‡Œçš„æ–¹æ³•å¹¶ä¸æ˜¯ä»€ä¹ˆå·¥ç¨‹çº§åˆ«çš„é«˜æ·±æ–¹æ³•ï¼Œåªæ˜¯æˆ‘åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ€»ç»“åˆ°çš„ä¸€äº›å®ç”¨ã€ä¾¿æ·çš„å°æŠ€å·§ã€‚</p><p>å½“æ€€ç–‘æŸä¸ªæ§åˆ¶å™¨æ²¡æœ‰å¾—åˆ°å³æ—¶çš„é‡Šæ”¾æ—¶ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ§åˆ¶å™¨é‡Œé¢é‡å†™<code>dealloc</code>å‡½æ•°ç„¶åæ‰“å°ä¸€è¡Œæ–‡å­—ï¼Œå†åœ¨è¿™è¡Œæ–‡å­—ä¸ŠåŠ ä¸€ä¸ªæ–­ç‚¹ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿›å‡ºè¿™ä¸ªæ§åˆ¶å™¨æ¥çœ‹åˆ°å®ƒçš„<code>dealloc</code>æ–¹æ³•æ˜¯ä¸æ˜¯å³æ—¶è¢«è°ƒç”¨äº†ã€‚å¦‚æœæ²¡æœ‰å³æ—¶è°ƒç”¨é‚£å°±æ˜¯æœ‰å¾ªç¯å¼•ç”¨äº§ç”Ÿï¼Œç›¸ååˆ™æ²¡æœ‰ã€‚</p><p>ç¡®å®šäº†æŸä¸ªæ§åˆ¶å™¨å†…ç¡®å®å‡ºç°äº†å¾ªç¯å¼•ç”¨ä¹‹åï¼Œå°±éœ€è¦å®šä½æ˜¯å“ªé‡Œå¯¼è‡´çš„å¾ªç¯å¼•ç”¨äº†ã€‚</p><p>æˆ‘ä¸ªäººä¹ æƒ¯å…ˆçœ‹æ˜¯ä¸æ˜¯blockå¯¼è‡´çš„ï¼Œè¦æƒ³å¿«é€Ÿçš„æœç´¢åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢æ‰€æœ‰çš„blockå¯ä»¥é€šè¿‡æœç´¢<code>^&#123;</code>æ¥å®šä½ï¼Œä¹‹åå°±æ˜¯æ£€æŸ¥æ¯ä¸ªblocké‡Œé¢æ˜¯ä¸æ˜¯æŒ‰è§„èŒƒä½¿ç”¨äº†<code>self</code>ã€‚æ£€æŸ¥è¿‡ç¨‹ä¸€å®šè¦ä»”ç»†ï¼Œä¸ç„¶ä½ å¾ˆå¯èƒ½è¿˜å¾—é‡æ¥ä¸€éğŸ˜­ ã€‚</p><p>æ£€æŸ¥å®Œæ‰€æœ‰çš„blockåæœ‰99%çš„å¯èƒ½å·²ç»è§£å†³äº†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œä¸ç„¶çš„è¯å°±å†å»æ£€æŸ¥ä¸€ä¸‹delegateå’Œæ˜¯ä¸æ˜¯ä½¿ç”¨äº†<code>NSTimer</code>ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹ä¸‹æ¥100%å¯ä»¥è§£å†³æ‰å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå¦åˆ™ä½ æ¥å…¬ä¼—å·æ‰¾æˆ‘ã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SwiftUIæ€ä¹ˆå®ç°UISearchBar</title>
      <link href="swiftui/swiftui-searchbar/"/>
      <url>swiftui/swiftui-searchbar/</url>
      
        <content type="html"><![CDATA[<p>SwiftUIæ²¡æœ‰æä¾›UISearchBarï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨TextFieldæ¥è‡ªå·±å®ç°SeachBarçš„æ•ˆæœï¼Œä¸è¿‡è¦æƒ³å®ç°ä¸€ä¸ªå’ŒUISearchBaråŒæ ·çš„æ§ä»¶å¹¶ä¸å®¹æ˜“ï¼Œå°¤å…¶æ˜¯æ¸…é™¤æŒ‰é’®å’Œæœç´¢å›¾æ ‡ã€‚</p><p>è¿™é‡Œæ¨èç›´æ¥ä½¿ç”¨UISearchBarå’ŒUIViewRepresentableåè®®æ¥ä¸€ä¸ªSearchBarã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../images/first/swiftui-uisearchbar.png"></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SearchBar</span>: <span class="title">UIViewRepresentable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Binding</span> <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> placeholder: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> onCommit: ((<span class="keyword">_</span> text: <span class="type">String</span>) -&gt; <span class="type">Void</span>)<span class="operator">?</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeUIView</span><span class="params">(context: UIViewRepresentableContext&lt;SearchBar&gt;)</span></span> -&gt; <span class="type">UISearchBar</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> searchBar <span class="operator">=</span> <span class="type">UISearchBar</span>(frame: .zero)</span><br><span class="line">        searchBar.delegate <span class="operator">=</span> context.coordinator</span><br><span class="line"></span><br><span class="line">        searchBar.placeholder <span class="operator">=</span> placeholder</span><br><span class="line">        searchBar.autocapitalizationType <span class="operator">=</span> .none</span><br><span class="line">        searchBar.searchBarStyle <span class="operator">=</span> .minimal</span><br><span class="line">        <span class="keyword">return</span> searchBar</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateUIView</span><span class="params">(<span class="keyword">_</span> uiView: UISearchBar, context: UIViewRepresentableContext&lt;SearchBar&gt;)</span></span> &#123;</span><br><span class="line">        uiView.text <span class="operator">=</span> text</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span><span class="params">()</span></span> -&gt; <span class="type">SearchBar</span>.<span class="type">Coordinator</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Coordinator</span>(text: <span class="variable">$text</span>, onCommit: <span class="keyword">self</span>.onCommit)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Coordinator</span>: <span class="title">NSObject</span>, <span class="title">UISearchBarDelegate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Binding</span> <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line">        <span class="keyword">var</span> onCommit: ((<span class="keyword">_</span> text: <span class="type">String</span>) -&gt; <span class="type">Void</span>)<span class="operator">?</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">init</span>(text: <span class="type">Binding</span>&lt;<span class="type">String</span>&gt;, onCommit: ((<span class="keyword">_</span> text: <span class="type">String</span>) -&gt; <span class="type">Void</span>)<span class="operator">?</span>) &#123;</span><br><span class="line">            _text <span class="operator">=</span> text</span><br><span class="line">            <span class="keyword">self</span>.onCommit <span class="operator">=</span> onCommit</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">searchBar</span><span class="params">(<span class="keyword">_</span> searchBar: UISearchBar, textDidChange searchText: String)</span></span> &#123;</span><br><span class="line">            text <span class="operator">=</span> searchText</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">searchBarSearchButtonClicked</span><span class="params">(<span class="keyword">_</span> searchBar: UISearchBar)</span></span> &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> onCommit <span class="operator">=</span> <span class="keyword">self</span>.onCommit &#123;</span><br><span class="line">                onCommit(searchBar.text <span class="operator">??</span> <span class="string">&quot;&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>UIViewRepresentable</code>æ˜¯SwiftUIæ¡†æ¶ä¸­æä¾›çš„ç”¨äºå°†UIViewè½¬æ¢æˆSwiftUIä¸­Viewçš„åè®®ã€‚</p><p><code>func makeUIView(context: Self.Context) -&gt; Self.UIViewType</code>ç”¨æ¥åˆ›å»ºViewçš„æ–¹æ³•ï¼Œéµå®ˆUIViewRepresentableåè®®çš„ç±»å¿…é¡»è¦å®ç°è¿™ä¸ªæ–¹æ³•ã€‚å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªUIViewç±»çš„å®ä¾‹ã€‚è¿™ä¸ªæ–¹æ³•åªä¼šåœ¨åˆ›å»ºViewæ—¶è°ƒç”¨ä¸€æ¬¡ï¼Œå½“Viewéœ€è¦æ›´æ–°æ—¶ä¼šè°ƒç”¨ä¸‹é¢çš„è¿™ä¸ªæ–¹æ³•ã€‚</p><p><code>func updateUIView(_ uiView: Self.UIViewType, context: Self.Context)</code>å½“UIViewå‘ç”Ÿä»»ä½•éœ€è¦æ›´æ–°çŠ¶æ€çš„äº‹ä»¶æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å°±ä¼šè¢«è°ƒç”¨æ¥æ›´æ–°Viewçš„çŠ¶æ€ã€‚</p><p><code>func makeCoordinator() -&gt; Self.Coordinator</code>éœ€è¦ä¸€ä¸ª<code>Coordinator</code>çš„å®ä¾‹ä½œä¸ºè¿”å›å€¼ã€‚å®ƒé€šå¸¸ç”¨æ¥å¤„ç†ä¸€äº›äº‹ä»¶ï¼ˆç‚¹å‡»ã€æ—¶é—´ã€delegateã€é€šçŸ¥ï¼‰å¼•èµ·äº†UIViewçš„çŠ¶æ€å˜åŒ–åï¼Œèƒ½å¤Ÿå°†æ–°çš„çŠ¶æ€åæ˜ åˆ°Viewä¸Šã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSè®¾ç½®æ¸å˜è‰²ï¼Œç»™borderè®¾ç½®æ¸å˜è‰²</title>
      <link href="ios/ios-gradient-color/"/>
      <url>ios/ios-gradient-color/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»4è¡Œä»£ç å‡ºå‘ç»™ä¸€ä¸ªviewè®¾ç½®æ¸å˜è‰²ï¼Œåˆ†åˆ«ä¼šè°ˆåˆ°å‡ ä¸ªé‡è¦çš„æ¸å˜è‰²ç›¸å…³å±æ€§ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰å‡ ä¸ªéœ€è¦ç‰¹åˆ«å…³æ³¨çš„ç‚¹ã€‚</p><p>ç»™ä¸€ä¸ªviewçš„borderè®¾ç½®æ¸å˜è‰²æ˜¯æ¯”è¾ƒé«˜é˜¶çš„ç”¨æ³•ï¼Œå¸Œæœ›æœ¬æ–‡å¯ä»¥åœ¨è¿™ä¸ªæ–¹é¢å¸®åŠ©åˆ°ä½ ã€‚</p><a id="more"></a><p><img src="../../images/first/ios-gradient-color-border.png" alt="iosæ¸å˜è‰²"></p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="ç»™viewè®¾ç½®æ¸å˜è‰²"><a href="#ç»™viewè®¾ç½®æ¸å˜è‰²" class="headerlink" title="ç»™viewè®¾ç½®æ¸å˜è‰²"></a>ç»™viewè®¾ç½®æ¸å˜è‰²</h1><p>é€šè¿‡4è¡Œä»£ç å°±å¯ä»¥ç»™ä¸€ä¸ªviewè®¾ç½®æ¸å˜è‰²ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> view <span class="operator">=</span> <span class="type">UIView</span>(frame: <span class="type">CGRect</span>(x: <span class="number">100</span>, y: <span class="number">100</span>, width: <span class="number">100</span>, height: <span class="number">100</span>))</span><br><span class="line"><span class="keyword">let</span> gradientLayer <span class="operator">=</span> <span class="type">CAGradientLayer</span>()</span><br><span class="line">gradientLayer.frame <span class="operator">=</span> view.bounds</span><br><span class="line"><span class="comment">// @[(__bridge id)[UIColor redColor].CGColor, (__bridge id)[UIColor yellowColor].CGColor]</span></span><br><span class="line">gradientLayer.colors <span class="operator">=</span> [<span class="type">UIColor</span>.red.cgColor, <span class="type">UIColor</span>.yellow.cgColor]</span><br><span class="line">view.layer.addSublayer(gradientLayer)</span><br></pre></td></tr></table></figure><p>åœ¨åˆ›å»º<code>CAGradientLayer</code>ä»¥åéœ€è¦è®¾ç½®<code>frame</code>æ‰èƒ½å±•ç¤ºå‡ºæ¥ï¼Œå¦åˆ™å®ƒçš„å¤§å°ä¼šä½¿ç”¨é»˜è®¤çš„0ã€‚</p><p>æ¸å˜è‰²ä¼šæ ¹æ®<code>colors</code>æ•°ç»„æ¥å±•ç¤ºï¼Œè¿™ä¸ªæ•°ç»„çš„ç±»å‹æ˜¯<code>CGColorRef</code>ï¼Œæ‰€ä»¥éœ€è¦ç”¨<code>.cgColor</code>å¼ºåˆ¶è½¬æ¢ï¼›å¦‚æœä½¿ç”¨çš„OCè¯­æ³•ï¼Œå¿…é¡»åŠ ä¸Š<code>(__bridge id)</code>ï¼Œå¦åˆ™æ¸å˜è‰²ä¼šæ˜¾ç¤ºä¸å‡ºæ¥ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹æ¸å˜ä¼šä»ä¸Šè‡³ä¸‹ï¼Œå¯æ˜¯é€šè¿‡è®¾ç½®<code>startPoint</code>å’Œ<code>endPoint</code>æ¥æ”¹å˜è¿™ä¸ªé¡ºåºï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gradientLayer.startPoint <span class="operator">=</span> <span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">0</span>)</span><br><span class="line">gradientLayer.endPoint <span class="operator">=</span> <span class="type">CGPoint</span>(x: <span class="number">1</span>, y: <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªç‚¹çš„èŒƒå›´æ˜¯ä»0åˆ°1ï¼Œä¹Ÿå°±æ˜¯è¯´æœ€å·¦è¾¹å’Œæœ€ä¸Šè¾¹æ˜¯0ï¼Œæœ€ä¸‹å’Œæœ€å³æ˜¯1ã€‚è¿™ä¸ªä¾‹å­ä¸­æ¸å˜ä¼šå˜æˆä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’ã€‚</p><p>æ¸å˜è‰²è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å±æ€§æ˜¯<code>locations</code>ï¼Œè¿™ä¸ªå±æ€§æ˜¯ç”¨æ¥æŒ‡å®š<code>colors</code>ä¸­è®¾ç½®çš„æ¯ä¸ªé¢œè‰²çš„ç»ˆç‚¹çš„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradientLayer.locations <span class="operator">=</span> [<span class="number">0.2</span>, <span class="number">0.8</span>]</span><br></pre></td></tr></table></figure><p>locationsä¸­å…ƒç´ çš„èŒƒå›´æ˜¯ä»0åˆ°1ã€‚åœ¨è¿™é‡Œï¼Œæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ <em>0.2</em>æŒ‡å®šäº†colorsæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ <em>çº¢è‰²</em>çš„ç»ˆç‚¹æ˜¯0.2ï¼Œä¹Ÿå°±æ˜¯è¯´æŠŠæ•´ä¸ªæ¸å˜è‰²èŒƒå›´åˆ†æˆ10ä»½ï¼Œä»å¼€å§‹åˆ°<em>2/10</em>å¤„éƒ½æ˜¯çº¯çº¢è‰²ï¼Œä»<em>2/10</em>åˆ°<em>8/10</em>å¤„æ˜¯çº¯çº¢è‰²åˆ°çº¯é»„è‰²çš„æ¸å˜ï¼Œè€Œä»<em>8/10</em>åˆ°<em>10/10</em>æ˜¯çº¯é»„è‰²ã€‚</p><h1 id="ç»™viewçš„borderè®¾ç½®æ¸å˜è‰²"><a href="#ç»™viewçš„borderè®¾ç½®æ¸å˜è‰²" class="headerlink" title="ç»™viewçš„borderè®¾ç½®æ¸å˜è‰²"></a>ç»™viewçš„borderè®¾ç½®æ¸å˜è‰²</h1><p>ä½¿ç”¨<code>UIBezierPath</code>æ¥åˆ›å»ºä¸€ä¸ªå¸¦åœ†è§’çš„<code>CAShapeLayer</code>ï¼Œå¹¶ä¸”æŠŠå®ƒçš„åœ†è§’è®¾ç½®æˆviewçš„åœ†è§’ï¼Œå°±å¯ä»¥æŠŠä¸€ä¸ªviewçš„borderè®¾ç½®ä¸ºæ¸å˜è‰²ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">...</span> <span class="comment">// åŒä¸Šç»™viewè®¾ç½®gradientLayer</span></span><br><span class="line">        </span><br><span class="line"><span class="keyword">let</span> shapeLayer <span class="operator">=</span> <span class="type">CAShapeLayer</span>()</span><br><span class="line">shapeLayer.borderWidth <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">shapeLayer.path <span class="operator">=</span> <span class="type">UIBezierPath</span>(roundedRect: gradientLayer.bounds, cornerRadius: <span class="number">10</span>).cgPath</span><br><span class="line">shapeLayer.fillColor <span class="operator">=</span> <span class="type">UIColor</span>.clear.cgColor <span class="comment">// å¿…é¡»è¦è®¾ç½®æˆclearColoræˆ–è€…nilï¼Œé»˜è®¤æ˜¯é»‘è‰²</span></span><br><span class="line">shapeLayer.strokeColor <span class="operator">=</span> <span class="type">UIColor</span>.white.cgColor <span class="comment">// éšä¾¿è®¾ç½®ä¸€ä¸ªéclearColorçš„é¢œè‰²</span></span><br><span class="line">        </span><br><span class="line">gradientLayer.mask <span class="operator">=</span> shapeLayer</span><br><span class="line"></span><br><span class="line">view.layer.addSublayer(gradientLayer)</span><br></pre></td></tr></table></figure><ol><li><em>borderWidth</em> shapeLayerçš„borderå®½åº¦å’Œviewçš„ç›¸åŒï¼Œå¯ä»¥æ ¹æ®è®¾è®¡å›¾æ¥è®¾ç½®ã€‚</li><li><em>cornerRadius</em> UIBezierPathçš„åœ†è§’å’Œviewçš„åœ†è§’ç›¸åŒï¼›<em>roundedRect</em>å’Œ<em>CAGradientLayer</em>çš„å¤§å°ç›¸åŒã€‚</li><li><em>fillColor</em> æ˜¯shapeLayerçš„å¡«å……è‰²ï¼Œé»˜è®¤æ˜¯é»‘è‰²ï¼Œå»ºè®®è®¾ç½®æˆnilæˆ–è€…æ˜¯é€æ˜è‰²<code>clearColor</code></li><li><em>strokeColor</em> æ˜¯borderçš„æè¾¹è‰²ï¼Œå¦‚æœè®¾ç½®æˆclearColorçš„è¯å°±ä¸ä¼šç»˜åˆ¶å‡ºæ¥borderäº†ï¼Œè¿™é‡Œéšä¾¿ä¸€ä¸ªé¢œè‰²å°±æ˜¯è®©å…¶èƒ½å¤Ÿç»˜åˆ¶å‡ºæ¥ï¼Œå®é™…ä½¿ç”¨çš„æ˜¯æ¸å˜è‰²</li><li><em>mask</em> ç”¨shapeLayerä½œä¸ºgradientLayerçš„maskï¼Œå¯ä»¥è®©gradientLayerå†…éƒ¨æŒ–ç©ºï¼Œåªä¿ç•™è¾¹ç¼˜borderçš„æ¸å˜é¢œè‰²</li><li>æœ€ç»ˆæŠŠæ¸å˜è‰²layeræ·»åŠ åˆ°view.layerä¸Šï¼ŒshapeLayeråªæ˜¯ç”¨æ¥ä¿®é¥°gradientlayerçš„ï¼Œç›®çš„æ˜¯æŠŠgradientlayerçš„å†…éƒ¨æŒ–ç©ºï¼Œå¹¶ä¸”æŠŠborderå’Œåœ†è§’åšå‡ºæ¥ã€‚</li></ol><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€šè¿‡è¿™ç¯‡æ–‡ç« æˆ‘ä»¬äº†è§£äº†æ€ä¹ˆç»™ä¸€ä¸ªviewè®¾ç½®æ¸å˜è‰²ï¼Œå¹¶è¯¦ç»†é˜è¿°äº†æ¸å˜è‰²çš„å‡ ä¸ªé‡è¦å±æ€§ã€‚å…³äºç»™borderè®¾ç½®æ¸å˜è‰²æ˜¯ä¸€ä¸ªè¿›é˜¶çš„çŸ¥è¯†ç‚¹ã€‚</p><p>å¸Œæœ›æœ¬ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠæ–‡ç« åˆ†äº«åˆ°æœ‹å‹åœˆæˆ–å¾®åšã€‚</p><p>æœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥åˆ°å…¬ä¼—å·ç»™æˆ‘å‘ä¿¡æ¯ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>environmentå’ŒenvironmentObjectçš„åŒºåˆ«åŠé€‚ç”¨åœºæ™¯</title>
      <link href="swiftui/environment-vs-environmentObject/"/>
      <url>swiftui/environment-vs-environmentObject/</url>
      
        <content type="html"><![CDATA[<p>SwiftUIä¸­ä¼ é€’ç¯å¢ƒå˜é‡æ—¶ä¼šå‘ç°ä¸¤ä¸ªç›¸ä¼¼çš„æ–¹æ³•ï¼š<code>environment&lt;V&gt;(_ keyPath:, _ value:)</code>å’Œ<code>environmentObject&lt;T&gt;(_ object:)</code>ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªæ–¹æ³•çš„ä¸åŒä¹‹å¤„å’Œåˆ†åˆ«çš„é€‚ç”¨åœºæ™¯ã€‚</p><a id="more"></a><p><img src="../../images/first/swiftui-environmentobject-environment.png" alt="Swiftç¯å¢ƒå˜é‡å¯¹æ¯”"></p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><p>é¦–å…ˆè¦æ˜ç¡®çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ç”¨æ¥è®¾ç½®ç¯å¢ƒå˜é‡çš„ï¼Œè€Œç¯å¢ƒå˜é‡ä¼šå½±å“åˆ°è¢«è®¾ç½®å˜é‡çš„è§†å›¾ä»¥åŠå®ƒçš„æ‰€æœ‰å­è§†å›¾ï¼Œå¹¶ä¸”è¿™ä¸ªä¼ é€’è¿‡ç¨‹ä¸éœ€è¦æ˜ç¡®æŒ‡å‡ºã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾æœ‰ä¸‰ä¸ªè§†å›¾ï¼Œview1ã€view2ã€view3ï¼Œå…¶ä¸­view2å’Œview3æ˜¯view1çš„å­è§†å›¾ï¼Œè¦æƒ³åœ¨view2å’Œview3ä¸­ä½¿ç”¨view1è®¾ç½®çš„ç¯å¢ƒå˜é‡çš„è¯ï¼Œåªéœ€è¦ç›´æ¥åœ¨viewä¸­ä½¿ç”¨<code>@EnvironmentObject</code>æˆ–è€…<code>@Environment</code>è€Œä¸éœ€è¦åœ¨åˆ›å»ºview2å’Œview3çš„æ—¶å€™æ˜¾å¼ä¼ å‚ã€‚</p><h1 id="EnvironmentObject"><a href="#EnvironmentObject" class="headerlink" title="@EnvironmentObject"></a>@EnvironmentObject</h1><p>ä¸‹é¢ä»¥<code>@EnvironmentObject</code>ä¸¾ä¾‹è¯´æ˜ä¸Šé¢çš„è¿™æ®µè¯ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¬ä¼—å·â€”â€”iOSå¼€å‘æ ˆ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OfficalAccount</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> amount <span class="operator">=</span> <span class="number">3000</span> <span class="comment">// è®¢é˜…äººæ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DetailView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@EnvironmentObject</span> <span class="keyword">var</span> account: <span class="type">OfficalAccount</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;Increase Score in detailView&quot;</span>) &#123;</span><br><span class="line">                account.amount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;account: <span class="subst">\(account.amount)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DetailView2</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@EnvironmentObject</span> <span class="keyword">var</span> account: <span class="type">OfficalAccount</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Score: <span class="subst">\(account.amount)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@StateObject</span> <span class="keyword">var</span> account <span class="operator">=</span> <span class="type">OfficalAccount</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;Increase Score&quot;</span>) &#123;</span><br><span class="line">                account.amount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="type">DetailView</span>()</span><br><span class="line">            <span class="type">DetailView2</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        .environmentObject(account)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­æ˜¯ä»¥æˆ‘çš„å…¬ä¼—å·ï¼ˆâ€iOSå¼€å‘æ ˆâ€œï¼‰çš„è®¢é˜…äººæ•°åšè¯´æ˜ï¼Œå¯ä»¥çœ‹å‡º<em>ContentView</em>åˆ›å»º<em>DetailView</em>å’Œ<em>DetailView2</em>æ—¶å¹¶æ²¡æœ‰ç›´æ¥ä¼ é€’å˜é‡<em>accout</em>ï¼Œä½†æ˜¯ç»“æœæ˜¯è¿™ä¸¤ä¸ªå­è§†å›¾ä¸­çš„æ•°é‡æ˜¾ç¤ºä¼šéšç€ç‚¹å‡»æŒ‰é’®è€Œå¢åŠ ã€‚</p><p>å¯¹ä¸Šé¢ä½¿ç”¨<code>environmentObject</code>è¿›è¡Œç¯å¢ƒå˜é‡ä¼ é€’æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ul><li>ä½¿ç”¨<code>@Environment</code>ã€<code>@StateObject</code>ã€<code>@ObservedObject</code>åŒ…è£…çš„ç±»å¿…é¡»éµå®ˆ<code>ObservableObject</code>åè®®ï¼Œå¹¶ä¸”åªèƒ½æ˜¯ç±»ä¸èƒ½æ˜¯ç»“æ„ä½“ï¼Œå¦åˆ™ä¼šæŠ¥é”™ <mark class="label danger">Non-class type OfficalAccount cannot conform to class protocol ObservableObject</mark></li><li><code>@Published</code>ä¹Ÿåªèƒ½åœ¨<em>class</em>ä¸­ä½¿ç”¨ï¼Œå¦‚æœæ”¾åœ¨äº†structä¸­ï¼Œä¼šæŠ¥é”™<mark class="label danger">'wrappedValue' is unavailable: </mark></li><li>ä½¿ç”¨<code>@EnvironmentObject</code>åŒ…è£…çš„å˜é‡æ˜¯ä¸éœ€è¦åˆå§‹åŒ–çš„ï¼Œç¼–è¯‘å™¨ä¼šä»ç¯å¢ƒå˜é‡ä¸­è·å–è¿™ä¸ªå¯¹è±¡çš„å€¼</li><li>åœ¨å­è§†å›¾ä¸­å¯ä»¥ä¿®æ”¹äº†ç¯å¢ƒå˜é‡çš„å€¼ï¼Œå¹¶ä¸”è¿™ä¸ªæ”¹å˜ä¼šåœ¨å½“å‰çš„è§†å›¾å±‚çº§ä¸­ä¼ é€’</li></ul><h1 id="Environment"><a href="#Environment" class="headerlink" title="@Environment"></a>@Environment</h1><p>è€Œå¯¹äº<code>@Environment</code>æ¥è¯´ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ¥å¤„ç†ä¸€äº›å½“å‰çš„ç³»ç»Ÿè®¾ç½®çš„ï¼Œæ¯”å¦‚è¯´è¯­è¨€ã€æ—¶åŒºã€é»‘æš—æ¨¡å¼ã€CoreDataçš„Contextç­‰ã€‚</p><p>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸€ä¸ªå¾ˆå¤§çš„ä¸åŒæ˜¯ï¼Œ<code>@Environment(_ keyPath:)</code>éœ€è¦æŒ‡å®šä¸€ä¸ªç±»å‹ä¸º<code>KeyPath</code>çš„å‚æ•°ï¼Œè€Œè¿™ä¸ªå‚æ•°å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨çš„<code>EnvironmentValues</code>ä¸­å·²ç»å®šä¹‰å¥½çš„ï¼Œæ¯”å¦‚<code>managedObjectContext</code>/<code>locale</code>ç­‰ã€‚</p><p>ä¸‹é¢ä»¥ä½¿ç”¨<em>CoreData</em>ä¸ºä¾‹è¯´æ˜ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="keyword">let</span> persistenceController <span class="operator">=</span> <span class="type">PersistenceController</span>.shared</span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">Scene</span> &#123;</span><br><span class="line">    <span class="type">WindowGroup</span> &#123;</span><br><span class="line">        <span class="type">ContentView</span>()</span><br><span class="line">            .environment(\.managedObjectContext, persistenceController.container.viewContext)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="operator">...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ContentView.swift</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="meta">@Environment</span>(\.managedObjectContext) <span class="keyword">private</span> <span class="keyword">var</span> viewContext</span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="keyword">let</span> newItem <span class="operator">=</span> <span class="type">Item</span>(context: viewContext)</span><br><span class="line">newItem.platform <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="operator">...</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨<em>App.swift</em>ä¸­åˆ›å»ºäº†<code>persistenceController</code>å¹¶é€šè¿‡è°ƒç”¨<code>.environment</code>æŠŠå€¼ä¼ é€’ç»™äº†<em>ContentView</em>ã€‚<em>ContentView</em>ä¸­ä½¿ç”¨<code>@Environment(\.managedObjectContext) private var viewContext</code>è·å–åˆ°äº†è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚</p><p>é™¤äº†éœ€è¦ä¸€ä¸ªKeyPathå’Œä¸Šé¢æåˆ°çš„ä¸»è¦ç”¨æ¥å¤„ç†ç³»ç»Ÿè‡ªå¸¦çš„ç¯å¢ƒå˜é‡å¤–ï¼Œ<code>@Environment</code>å’Œ<code>@EnvironmentObject</code>åœ¨ç”¨æ³•ä¸Šç›¸å·®ä¸å¤§ã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€šè¿‡çµæ´»ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥è®©å¼€å‘è¿‡ç¨‹æ›´åŠ ç®€å•ï¼Œé¡µé¢ä¹‹é—´å¯ä»¥å†™æ›´å°‘çš„å€¼ä¼ é€’ï¼ˆæ­£å‘ã€åç›¸ï¼‰ç›¸å…³ä»£ç ã€‚é€šè¿‡æœ¬æ–‡å¯¹<code>Environment</code>å’Œ<code>EnvironmentObject</code>çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬æ›´æ·±å…¥çš„äº†è§£äº†SwiftUIä¸­ç¯å¢ƒå˜é‡çš„ä¸€äº›ä½¿ç”¨ç»†èŠ‚ã€‚</p><p>å¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©è¯·å¸®å¿™åˆ†äº«åˆ°æœ‹å‹åœˆæˆ–è€…å¾®åšã€‚</p><p>å¦‚æœæœ‰ä»»ä½•é—®é¢˜ä¹Ÿå¯ä»¥åˆ°å…¬ä¼—å·è”ç³»æˆ‘ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨SwiftUIä¸­å®ç°UISegmentControl</title>
      <link href="swiftui/swiftui-uisegmentcontrol/"/>
      <url>swiftui/swiftui-uisegmentcontrol/</url>
      
        <content type="html"><![CDATA[<p>åœ¨SwiftUIä¸­å®˜æ–¹æŠŠæ§ä»¶åšäº†ç²¾ç®€ï¼Œé€ æˆæœ‰äº›åœ¨UIKitä¸­ä½¿ç”¨çš„æ§ä»¶æ‰¾ä¸åˆ°äº†ã€‚è¿™ç¯‡æ–‡ç« æ¥çœ‹ä¸€ä¸‹UIPickerViewåœ¨SwiftUIä¸­æ˜¯æ€ä¹ˆè¡¨ç¤ºçš„ã€‚</p><a id="more"></a><p>äº†è§£äº†ä¸€äº›SwiftUIçš„åŸºç¡€çŸ¥è¯†ä»¥åï¼Œåº”è¯¥å°±çŸ¥é“æœ‰ä¸€ä¸ª<code>Picker</code>æ§ä»¶ï¼Œæƒ³è¦å®ç°UISegmentControlçš„æ•ˆæœå°±è¦ç”¨åˆ°è¿™ä¸ªæ§ä»¶ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="keyword">var</span> platform <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">VStack</span> &#123;</span><br><span class="line">        <span class="type">Picker</span>(<span class="string">&quot;å¹³å°åç§°&quot;</span>, selection: <span class="variable">$platform</span>) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;æ”¯ä»˜å®&quot;</span>).tag(<span class="number">1</span>).navigationTitle(<span class="string">&quot;é€‰æ‹©å¹³å°&quot;</span>)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;äº¬ä¸œé‡‘è&quot;</span>).tag(<span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .pickerStyle(<span class="type">SegmentedPickerStyle</span>())</span><br><span class="line">        </span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;<span class="subst">\(platform)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿™æ®µä»£ç å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªUISegmentControlæ•ˆæœçš„Pickeräº†ã€‚</p><p>å…¶ä¸­å…³é”®éƒ¨åˆ†æ˜¯<code>.pickerStyle(SegmentedPickerStyle())</code>ï¼ŒpickerStyleæ˜¯ä¸€ä¸ªè®¾ç½®Pickeræ ·å¼çš„Modifierï¼Œ<code>SegmentedPickerStyle</code>å°±æ˜¯å¤–å‹å’ŒUISegmentControlä¸€æ‘¸ä¸€æ ·çš„æ•ˆæœã€‚</p><p>é™¤äº†SegmentedPickerStyleä»¥å¤–ï¼ŒpickerStyleè¿˜æœ‰ä¸‹é¢å‡ ç§ç±»å‹ï¼š</p><ul><li><code>DefaultPickerStyle</code> åœ¨ä¸åŒå¹³å°æœ‰ä¸åŒçš„å±•ç°å½¢å¼ã€‚iOSå¹³å°ä¸Šå’Œ<em>InlinePickerStyle</em>ç›¸åŒéƒ½æ˜¯æ»šè½®æ ·å¼ï¼›MacOSå¹³å°å’Œ<em>MenuPickerStyle</em>ç›¸åŒï¼›tvOSå¹³å°ä¸Šå’Œ<em>SegmentedPickerStyle</em>ç›¸åŒ</li><li><code>InlinePickerStyle</code>/<code>WheelPickerStyle</code> æ»šè½®æ ·å¼</li><li><code>MenuPickerStyle</code> ç‚¹å‡»åPickerçš„textåå¼¹å‡ºé€‰é¡¹ï¼Œæœ‰ç‚¹ç±»ä¼¼äº<code>MenuController</code></li><li><code>RadioGroupPickerStyle</code> MacOSä¸Šä½¿ç”¨çš„ï¼Œæ‰€æœ‰é€‰é¡¹ä¸€å­—æ’å¼€ï¼Œæ¯ä¸ªå‰é¢éƒ½æœ‰ä¸€ä¸ªå¤é€‰æ¡†â˜‘ï¸</li><li><code>SegmentedPickerStyle</code> ä¸Šé¢è¯´çš„æ¨¡ä»¿UISegmentControlçš„å¤–å½¢ï¼Œä½¿ç”¨è¿™ç§styleçš„æ—¶å€™ï¼ŒPickerçš„contentåªèƒ½æ˜¯Textæˆ–è€…Image</li></ul><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3ä¸ªå…³äºSwiftUIä¸­TextFieldä¸å¾—ä¸çœ‹çš„çŸ¥è¯†ç‚¹</title>
      <link href="swiftui/swiftui-textfield/"/>
      <url>swiftui/swiftui-textfield/</url>
      
        <content type="html"><![CDATA[<p>å‡ ä¹æ¯ä¸€ä¸ªiOS Appéƒ½éœ€è¦å¤„ç†ç”¨æˆ·äº¤äº’ï¼Œè¾“å…¥æ¡†ä½œä¸ºè·å–ç”¨æˆ·è¾“å…¥å†…å®¹çš„æœ€å¸¸ç”¨æ§ä»¶ä¹‹ä¸€æ˜¯å¼€å‘è€…ç»å¸¸ç”¨åˆ°çš„ä¸€ä¸ªæ§ä»¶ã€‚è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åœ¨iOS14ä¸­æ€ä¹ˆä½¿ç”¨å…¨æ–°çš„SwiftUIæ¡†æ¶æ¥å¤„ç†TextFieldã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../images/first/swiftui-textfiled.png" alt="SwiftUI TextFieldçŸ¥è¯†ç‚¹"></p><h1 id="SwiftUIåˆ›å»ºä¸€ä¸ªåŸºç¡€çš„TextField"><a href="#SwiftUIåˆ›å»ºä¸€ä¸ªåŸºç¡€çš„TextField" class="headerlink" title="SwiftUIåˆ›å»ºä¸€ä¸ªåŸºç¡€çš„TextField"></a>SwiftUIåˆ›å»ºä¸€ä¸ªåŸºç¡€çš„TextField</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> aStr <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">TextField</span>(<span class="string">&quot;å…¬ä¼—å·&lt;iOSå¼€å‘æ ˆ&gt;&quot;</span>, text: <span class="variable">$aStr</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="type">Text</span>(aStr)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ª<code>TextField</code>éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªå ä½ç¬¦å’Œä¸€ä¸ª<a href="https://www.iosprogrammer.tech/swiftui/swiftui-data-flow.html"><code>Bind&lt;Binding&lt;String</code></a>ã€‚</p><h1 id="TextFieldStyle"><a href="#TextFieldStyle" class="headerlink" title="TextFieldStyle"></a>TextFieldStyle</h1><p>é€šè¿‡è®¾ç½®<code>textFieldStyle</code>å¯ä»¥ä¿®æ”¹<code>TextField</code>çš„å±•ç°æ ·å¼ï¼Œåœ¨SwiftUIä¸­ç³»ç»Ÿè‡ªå¸¦äº†UIKitæ¡†æ¶ä¸­çš„å‡ ä¸ªæ ·å¼ï¼š<code>DefaultTextFieldStyle</code>/<code>PlainTextFieldStyle</code>/<code>RoundedBorderTextFieldStyle</code>ã€‚</p><p>è®¾ç½®çš„æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TextField</span>(<span class="string">&quot;å…¬ä¼—å·&lt;iOSå¼€å‘æ ˆ&gt;&quot;</span>, text: <span class="variable">$aStr</span>)</span><br><span class="line">    .textFieldStyle(<span class="type">DefaultTextFieldStyle</span>())</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœç³»ç»Ÿè‡ªå¸¦çš„è¿™ä¸‰ç§æ ·å¼éƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰TextFieldçš„æ ·å¼</p></blockquote><h1 id="TextFieldæ–‡æœ¬å¯¹é½æ–¹å¼"><a href="#TextFieldæ–‡æœ¬å¯¹é½æ–¹å¼" class="headerlink" title="TextFieldæ–‡æœ¬å¯¹é½æ–¹å¼"></a>TextFieldæ–‡æœ¬å¯¹é½æ–¹å¼</h1><p>åœ¨SwiftUIä¸­è®¾ç½®TextFieldçš„æ–‡æœ¬å¯¹é½æ–¹å¼ä½¿ç”¨çš„modifieræ˜¯<code>multilineTextAlignment</code>ï¼Œå…¶ä¸­åŒ…å«<code>leading</code>/<code>center</code>/<code>trailing</code>ä¸‰ç§å¯¹é½æ–¹å¼ã€‚</p><p>ä½¿ç”¨è¿™ä¸ªmodifierçš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TextField</span>(<span class="string">&quot;å…¬ä¼—å·&lt;iOSå¼€å‘æ ˆ&gt;&quot;</span>, text: <span class="variable">$aStr</span>)</span><br><span class="line">    .multilineTextAlignment(.trailing)</span><br></pre></td></tr></table></figure><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™ç¯‡æ–‡ç« å¯¹SwiftUIæ¡†æ¶ä¸­çš„<code>TextFiled</code>æ§ä»¶è¿›è¡Œäº†è®²è§£ï¼Œä¸»è¦æ¶‰åŠäº†åˆ›å»ºæ–¹æ³•ã€ä¿®æ”¹å±•ç¤ºæ ·å¼å’Œè®¾ç½®æ–‡æœ¬å¯¹é½æ–¹æ³•ä¸‰ä¸ªæ–¹é¢ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SwiftUIç»™Coloræ·»åŠ æ‰©å±•æ”¯æŒåå…­è¿›åˆ¶å­—ç¬¦ä¸²</title>
      <link href="swiftui/SwiftUI-Color-Hex/"/>
      <url>swiftui/SwiftUI-Color-Hex/</url>
      
        <content type="html"><![CDATA[<p>SwiftUIä¸­ä½¿ç”¨<code>Color</code>è¡¨ç¤ºé¢œè‰²ï¼Œä¸ºäº†èƒ½å¤Ÿå°½é‡ç‹¬ç«‹çš„ä½¿ç”¨SwiftUIç‰¹æ€§ï¼Œæˆ‘ä»¬é€šè¿‡ç»™Coloræ·»åŠ ä¸€ä¸ªç®€å•çš„æ‰©å±•æ¥æ»¡è¶³å¯¹åå…­è¿›åˆ¶é¢œè‰²çš„ä½¿ç”¨ã€‚</p><a id="more"></a><p>ä¸‹é¢æ˜¯è¿™ä¸ªæ‰©å±•çš„æ‰€æœ‰ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Color</span> </span>&#123;</span><br><span class="line">    <span class="keyword">init</span>(hex: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> hex <span class="operator">=</span> hex.trimmingCharacters(<span class="keyword">in</span>: <span class="type">CharacterSet</span>.alphanumerics.inverted)</span><br><span class="line">        <span class="keyword">var</span> int: <span class="type">UInt64</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="type">Scanner</span>(string: hex).scanHexInt64(<span class="operator">&amp;</span>int)</span><br><span class="line">        <span class="keyword">let</span> a, r, g, b: <span class="type">UInt64</span></span><br><span class="line">        <span class="keyword">switch</span> hex.count &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">// RGB (12-bit)</span></span><br><span class="line">            (a, r, g, b) <span class="operator">=</span> (<span class="number">255</span>, (int <span class="operator">&gt;&gt;</span> <span class="number">8</span>) <span class="operator">*</span> <span class="number">17</span>, (int <span class="operator">&gt;&gt;</span> <span class="number">4</span> <span class="operator">&amp;</span> <span class="number">0xF</span>) <span class="operator">*</span> <span class="number">17</span>, (int <span class="operator">&amp;</span> <span class="number">0xF</span>) <span class="operator">*</span> <span class="number">17</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: <span class="comment">// RGB (24-bit)</span></span><br><span class="line">            (a, r, g, b) <span class="operator">=</span> (<span class="number">255</span>, int <span class="operator">&gt;&gt;</span> <span class="number">16</span>, int <span class="operator">&gt;&gt;</span> <span class="number">8</span> <span class="operator">&amp;</span> <span class="number">0xFF</span>, int <span class="operator">&amp;</span> <span class="number">0xFF</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>: <span class="comment">// ARGB (32-bit)</span></span><br><span class="line">            (a, r, g, b) <span class="operator">=</span> (int <span class="operator">&gt;&gt;</span> <span class="number">24</span>, int <span class="operator">&gt;&gt;</span> <span class="number">16</span> <span class="operator">&amp;</span> <span class="number">0xFF</span>, int <span class="operator">&gt;&gt;</span> <span class="number">8</span> <span class="operator">&amp;</span> <span class="number">0xFF</span>, int <span class="operator">&amp;</span> <span class="number">0xFF</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            (a, r, g, b) <span class="operator">=</span> (<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(</span><br><span class="line">            .sRGB,</span><br><span class="line">            red: <span class="type">Double</span>(r) <span class="operator">/</span> <span class="number">255</span>,</span><br><span class="line">            green: <span class="type">Double</span>(g) <span class="operator">/</span> <span class="number">255</span>,</span><br><span class="line">            blue:  <span class="type">Double</span>(b) <span class="operator">/</span> <span class="number">255</span>,</span><br><span class="line">            opacity: <span class="type">Double</span>(a) <span class="operator">/</span> <span class="number">255</span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Color</span>(hex: <span class="string">&quot;#FF6D5D&quot;</span>)</span><br></pre></td></tr></table></figure><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¦è§£SwiftUIä¸­Dividerå’ŒSpacerçš„ç”¨æ³•å’ŒåŒºåˆ«ï¼ˆæœ€æ–°ï¼‰</title>
      <link href="swiftui/swiftui-divide-spacer/"/>
      <url>swiftui/swiftui-divide-spacer/</url>
      
        <content type="html"><![CDATA[<p>Dividerå’ŒSpaceréƒ½å¯ä»¥ç”¨åˆ°åˆ†å‰²ä¸¤ä¸ªè§†å›¾ï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿæœ‰ä¸€äº›åŒºåˆ«ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°†å­¦åˆ°è¿™ä¸¤ä¸ªæ§ä»¶çš„ä½¿ç”¨æ–¹å¼å’Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../images/first/SwiftUI-Divider-Spacer.jpg" alt="SwiftUI-Divider-vs-Spacer"></p><h1 id="Spacer"><a href="#Spacer" class="headerlink" title="Spacer"></a>Spacer</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Top&quot;</span>).background(<span class="type">Color</span>.red)</span><br><span class="line">            <span class="type">Spacer</span>()</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Bottom&quot;</span>).background(<span class="type">Color</span>.red)</span><br><span class="line">        &#125;</span><br><span class="line">        .frame(width: <span class="number">100</span>, height: <span class="number">400</span>, alignment: .center)</span><br><span class="line">        .background(<span class="type">Color</span>.yellow)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨â€œTopâ€å’Œâ€œBottomâ€ä¹‹é—´æ·»åŠ ä¸€ä¸ª<code>Spacer</code>æ§ä»¶ï¼Œä¼šæŠŠè¿™ä¸¤ä¸ªæ–‡å­—éš”å¼€ï¼Œä½¿è¿™ä¸¤ä¸ªæ–‡å­—åˆ†åˆ«ä½äºæœ€ä¸Šå’Œæœ€ä¸‹é¢ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Spacer</span>(minLength: <span class="number">30</span>)</span><br></pre></td></tr></table></figure><p>é€šè¿‡è®¾ç½®<code>minLength</code>å¯ä»¥æŒ‡å®šè¢«åˆ†å¼€çš„ä¸¤ä¸ªè§†å›¾çš„æœ€å°è·ç¦»ï¼Œå¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„è·ç¦»ã€‚</p><h1 id="Divider"><a href="#Divider" class="headerlink" title="Divider"></a>Divider</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Top&quot;</span>).background(<span class="type">Color</span>.red)</span><br><span class="line">    <span class="type">Divider</span>().background(<span class="type">Color</span>.red)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Bottom&quot;</span>).background(<span class="type">Color</span>.red)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Topå’ŒBottomä¹‹é—´æ·»åŠ ä¸€ä¸ªDivideræ§ä»¶å¯ä»¥åœ¨ä¸¤ä¸ªè§†å›¾ä¹‹é—´æ·»åŠ ä¸€ä¸ªé—´éš”ï¼Œå’Œä¸Šé¢çš„<code>Spacer</code>ä¸åŒçš„æ˜¯ä¸­é—´ä¼šå‡ºç°ä¸€æ ¹çº¿ï¼Œ<code>background</code>è®¾ç½®çš„é¢œè‰²ä¼šå½±å“åˆ°è¿™æ ¹çº¿çš„é¢œè‰²ã€‚</p><p>å¹¶ä¸”ï¼Œè¢«Divideråˆ†å‰²çš„ä¸¤ä¸ªè§†å›¾ä¸­é—´çš„è·ç¦»æ˜¯å›ºå®šçš„ï¼Œå®ƒä»¬ä¸ä¼šç§»åŠ¨åˆ°çˆ¶è§†å›¾çš„ä¸¤ç«¯ã€‚</p><p>å¦å¤–ï¼ŒæŠŠ<code>Divider</code>çš„é«˜åº¦åˆ†åˆ«è®¾ç½®ä¸º0ä¹‹åï¼Œè¢«å®ƒåˆ†å‰²çš„ä¸¤ä¸ªè§†å›¾ä¸ä¼šé åœ¨ä¸€èµ·ã€‚ä½†æ˜¯æŠŠ<code>Spacer</code>çš„é«˜åº¦è®¾ç½®ä¸º0ï¼Œè¢«å®ƒåˆ†å‰²çš„ä¸¤ä¸ªè§†å›¾ä¼šé åœ¨ä¸€èµ·ï¼Œå°±å’Œæ²¡æœ‰è¢«åˆ†å‰²ä¸€æ ·ã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™ç¯‡æ–‡ç« å­¦ä¹ äº†SwiftUIä¸­<code>Spacer</code>å’Œ<code>Divider</code>çš„ç”¨æ³•ä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œè¿™ä¸¤ä¸ªæ§ä»¶åœ¨SwiftUIä¸­è™½ç„¶ç®€å•ä½†æ˜¯éå¸¸çš„å¸¸ç”¨ï¼Œæˆ‘ä»¬ä¸€å®šè¦ç†Ÿæ‚‰ã€‚å¦‚æœä½ æœ‰ä»»ä½•çš„é—®é¢˜ã€å»ºè®®éƒ½å¯ä»¥é€šè¿‡<a href="https://weibo.com/7414691003/profile">å¾®åš</a>æˆ–<a href="mailto:shizhiang@126.com">é‚®ä»¶</a>è”ç³»åˆ°æˆ‘æœ¬äººã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSå®Œæ•´é›†æˆadmobæ•™ç¨‹ï¼ˆ2021ï¼‰</title>
      <link href="ios/ios-integrate-admob/"/>
      <url>ios/ios-integrate-admob/</url>
      
        <content type="html"><![CDATA[<p>Admobæ˜¯è°·æ­Œæ¨å‡ºçš„å¹¿å‘ŠæœåŠ¡ï¼Œå…¶ä¸­åŒ…å«çš„å¹¿å‘Šç±»å‹æœ‰ï¼šbannerã€æ’å±ã€æ¿€åŠ±ã€å¼€å±ï¼ˆæœ€è¿‘æ·»åŠ çš„ï¼‰ã€‚åˆ©ç”¨Admobçš„ä¸­ä»‹ç»„å¯ä»¥å¼•å…¥å…¶ä»–å¹¿å‘Šå•†çš„å¹¿å‘Šï¼Œæ¯”å¦‚FaceBookã€unityç­‰10å¤šå®¶å¹³å°ã€‚å¯¹äºå‡ºæµ·çš„Appé›†æˆAdmobæ˜¯éå¸¸å¿…è¦çš„å˜ç°æ‰‹æ®µã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../images/admob/admob.png" alt="Admob é›†æˆ"></p><h1 id="é€šè¿‡Cocoapodså¯¼å…¥Admob-SDK"><a href="#é€šè¿‡Cocoapodså¯¼å…¥Admob-SDK" class="headerlink" title="é€šè¿‡Cocoapodså¯¼å…¥Admob SDK"></a>é€šè¿‡Cocoapodså¯¼å…¥Admob SDK</h1><p>é€šè¿‡Cocoapodså¯¼å…¥SDKæ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œå¦‚æœä¸çŸ¥é“Cocoapodsçš„ä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹ä¸€ä¸‹<a href="https://cocoapods.org/">å®˜æ–¹æ–‡æ¡£</a>ã€‚åœ¨Podfileä¸­æ·»åŠ ä¸€è¡Œä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &#39;Google-Mobile-Ads-SDK&#39;</span><br></pre></td></tr></table></figure><p>ä¹‹ååœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install --repo-update</span><br></pre></td></tr></table></figure><h1 id="ä¿®æ”¹ä¸»å·¥ç¨‹çš„info-plistæ–‡ä»¶"><a href="#ä¿®æ”¹ä¸»å·¥ç¨‹çš„info-plistæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ä¸»å·¥ç¨‹çš„info.plistæ–‡ä»¶"></a>ä¿®æ”¹ä¸»å·¥ç¨‹çš„info.plistæ–‡ä»¶</h1><p>åœ¨ä¸»å·¥ç¨‹çš„info.plistæ–‡ä»¶ä¸­æ·»åŠ ä¸¤ä¸ªé”®å€¼å¯¹ï¼š</p><ol><li><code>GADApplicationIdentifier</code>å¯¹åº”çš„æ˜¯ä½ çš„appåœ¨Admobç”³è¯·åˆ°çš„App IDã€‚</li><li><code>SKAdNetworkItems</code>å¯¹åº”çš„æ˜¯ä¸€ä¸ªå›ºå®šçš„<code>cstr6suwn9.skadnetwork</code>ã€‚</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;GADApplicationIdentifier&lt;&#x2F;key&gt;</span><br><span class="line">&lt;string&gt;ca-app-pub-3940256099942544~1458002511&lt;&#x2F;string&gt;</span><br><span class="line">&lt;key&gt;SKAdNetworkItems&lt;&#x2F;key&gt;</span><br><span class="line">  &lt;array&gt;</span><br><span class="line">    &lt;dict&gt;</span><br><span class="line">      &lt;key&gt;SKAdNetworkIdentifier&lt;&#x2F;key&gt;</span><br><span class="line">      &lt;string&gt;cstr6suwn9.skadnetwork&lt;&#x2F;string&gt;</span><br><span class="line">    &lt;&#x2F;dict&gt;</span><br><span class="line">  &lt;&#x2F;array&gt;</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä¹‹åçš„info.plistæ•ˆæœï¼š<br><img src="../../images/admob/quick_start_skadnetwork.png" alt="info.plistæ·»åŠ Admob"></p><p>å…³äºæ³¨å†ŒAdmobè´¦å·å’Œè·å–App IDçš„å†…å®¹å¯ä»¥åˆ°<a href="https://apps.admob.com/v2/home">Admobçš„å®˜æ–¹ç½‘ç«™</a>æŸ¥çœ‹ã€‚</p><h1 id="åˆå§‹åŒ–Admob-SDK"><a href="#åˆå§‹åŒ–Admob-SDK" class="headerlink" title="åˆå§‹åŒ–Admob SDK"></a>åˆå§‹åŒ–Admob SDK</h1><p>åœ¨<code>AppDelegate</code>ä¸­æ·»åŠ åˆå§‹åŒ–Admob SDKçš„ä»£ç </p><div class="tabs" id="initialize-admob-sdk"><ul class="nav-tabs"><li class="tab active"><a href="#initialize-admob-sdk-1">Objective-C</a></li><li class="tab"><a href="#initialize-admob-sdk-2">Swift</a></li></ul><div class="tab-content"><div class="tab-pane active" id="initialize-admob-sdk-1"><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> GoogleMobileAds;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AppDelegate</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">    didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line"></span><br><span class="line">  [[GADMobileAds sharedInstance] startWithCompletionHandler:<span class="literal">nil</span>];</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="initialize-admob-sdk-2"><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> GoogleMobileAds</span><br><span class="line"></span><br><span class="line"><span class="keyword">@UIApplicationMain</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">UIResponde</span>, <span class="title">UIApplicationDelegate</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="keyword">_</span> application: UIApplication,</span></span></span><br><span class="line"><span class="function"><span class="params">      didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: <span class="keyword">Any</span>]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">GADMobileAds</span>.sharedInstance().start(completionHandler: <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®éœ€è¦æ¥åœ¨Appçš„ä¸åŒä½ç½®æ·»åŠ éœ€è¦çš„å¹¿å‘Šç±»å‹äº†ã€‚</p><p>å› ä¸ºç±»å‹æ¯”è¾ƒå¤šï¼Œè¿™é‡Œå¦‚æœåˆ†åˆ«ä»‹ç»çš„è¯ç¯‡å¹…å°±å¤ªé•¿äº†ã€‚æ‰€ä»¥åœ¨è¿™ç¯‡æ–‡ç« åªè¯´ä¸€ä¸‹éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œè¯¦ç»†çš„é›†æˆæ–¹æ³•å¯ä»¥åˆ°<a href="https://developers.google.com/admob/ios/quick-start">Admobå¼€å‘å®˜ç½‘</a>æŸ¥çœ‹ã€‚</p><h1 id="å„ç§Admobå¹¿å‘Šç±»å‹çš„æœ€ä½³å®è·µæ–¹æ¡ˆ"><a href="#å„ç§Admobå¹¿å‘Šç±»å‹çš„æœ€ä½³å®è·µæ–¹æ¡ˆ" class="headerlink" title="å„ç§Admobå¹¿å‘Šç±»å‹çš„æœ€ä½³å®è·µæ–¹æ¡ˆ"></a>å„ç§Admobå¹¿å‘Šç±»å‹çš„æœ€ä½³å®è·µæ–¹æ¡ˆ</h1><p>ä¸åŒç±»å‹çš„Admobå¹¿å‘Šé€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼ŒæŒ‰ç…§åœºæ™¯æ”¾å¹¿å‘Šä¸ä»…æ›´èƒ½è¢«ç”¨æˆ·æ¥å—ï¼Œè€Œä¸”å¯¹å¹¿å‘Šè¥æ”¶æœ‰ä¸€å®šçš„ç›Šå¤„ã€‚ç›¸åï¼Œå¦‚æœä¸æŒ‰ç…§æ¨èæ–¹æ³•æ¥å±•ç¤ºå¹¿å‘Šæœ‰å¯èƒ½ä¼šè¢«å¹¿å‘Šå•†è­¦å‘Šï¼Œä¸¥é‡çš„è¯å¯èƒ½ä¼šè¢«ç¦æ­¢æŠ•æ”¾ï¼ˆæˆ‘ä»¬å°±è¢«Facebookè­¦å‘Šäº†ï¼‰ã€‚</p><ol><li>Bannerå¹¿å‘Šæ˜¯é‚£ç§é•¿æ¡çŠ¶çš„æ¨ªå¹…å½¢å¼ï¼Œå»ºè®®æ”¾åœ¨å±å¹•çš„è¾¹ç¼˜å¤„ï¼Œå¯¹äºæ‰‹æœºå±å¹•å»ºè®®æ”¾åœ¨å±å¹•çš„æœ€ä¸Šé¢æˆ–è€…æœ€ä¸‹é¢ã€‚</li><li>æ’å±å¹¿å‘Šæ˜¯ä¸€ç§å…¨å±å±•ç¤ºçš„å¹¿å‘Šï¼Œå¯èƒ½æ˜¯ä¸€å¼ å›¾ç‰‡æˆ–è€…ä¸€ä¸ªè§†é¢‘ï¼Œåªæœ‰ç”¨æˆ·ç‚¹å‡»å…³é—­æŒ‰é’®æ˜¯æ‰ä¼šå…³é—­ã€‚è¿™ç§å¹¿å‘Šå¯¹ç”¨æˆ·æ‰“æ‰°éå¸¸å¤§ï¼Œå»ºè®®æ”¾åœ¨ç•Œé¢åˆ‡æ¢çš„æ—¶å€™æ‰å±•ç¤ºè¿™ç§å¹¿å‘Šï¼Œ<strong>å¹¶ä¸”ä¸èƒ½åœ¨pushåˆ°ä¸€ä¸ªæ–°é¡µé¢ä»¥åå†å±•ç¤º</strong>ï¼Œæ¯”å¦‚è¯´ä¸èƒ½åœ¨åˆ°ä¸€ä¸ªæ–°é¡µé¢åç½‘ç»œè¯·æ±‚æœåŠ¡ç«¯çš„è¿‡ç¨‹ä¸­å±•ç¤ºè¿™ä¸ªå¹¿å‘Šã€‚</li><li>Nativeå¹¿å‘Šï¼ˆåŸç”Ÿå¹¿å‘Šï¼‰æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„å¹¿å‘Šå½¢å¼ï¼Œå®ƒé€šè¿‡SDKæ¥å®ç°å¹¿å‘ŠåŠ è½½ï¼ŒåŠ è½½åˆ°çš„æ˜¯å¹¿å‘Šçš„ä¸€äº›ç»„ä»¶ï¼ˆæ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ç»„ä»¶çš„å±•ç¤ºä½ç½®å’Œå¤§å°ã€‚<strong>è¿™ç§å¹¿å‘Šé€‚åˆç”¨åœ¨å¯åŠ¨å›¾æˆ–è€…åˆ—è¡¨ï¼ˆUITableView/UICollectionViewï¼‰ä¸­ã€‚</strong></li><li>æ¿€åŠ±è§†é¢‘å¹¿å‘Šæ˜¯ä¸€ç§å¯ä»¥è®©ç”¨æˆ·é€šè¿‡è§‚çœ‹å¹¿å‘Šè·å–Appå†…å¥–åŠ±çš„å¹¿å‘Šå½¢å¼ï¼Œåœ¨æ¸¸æˆç±»Appä¸­ååˆ†å¸¸è§ã€‚åœ¨å¼¹å‡ºè¿™ç§å¹¿å‘Šå‰ä¸€å®šè¦è®©ç”¨æˆ·é€‰æ‹©æ˜¯å¦è¦é€šè¿‡çœ‹å¹¿å‘Šè·å–â€œæ›´å¤šå¥–åŠ±â€ã€‚</li></ol><h1 id="ä½¿ç”¨Admobä¸­ä»‹ç»„èšåˆå¤šä¸ªå¹³å°å¹¿å‘Š"><a href="#ä½¿ç”¨Admobä¸­ä»‹ç»„èšåˆå¤šä¸ªå¹³å°å¹¿å‘Š" class="headerlink" title="ä½¿ç”¨Admobä¸­ä»‹ç»„èšåˆå¤šä¸ªå¹³å°å¹¿å‘Š"></a>ä½¿ç”¨Admobä¸­ä»‹ç»„èšåˆå¤šä¸ªå¹³å°å¹¿å‘Š</h1><p>è°·æ­Œå¹¿å‘Šå¹³å°ä¸ä»…æœ‰è‡ªå®¶çš„Admobå¹¿å‘Šè¿˜æœ‰å¾ˆå¤šå…¶ä»–å¹¿å‘Šå¹³å°çš„èµ„æºï¼Œæˆ‘ä»¬åœ¨é›†æˆäº†<code>Google-Mobile-Ads-SDK</code>çš„åŸºç¡€ä¸Šé€šè¿‡æ·»åŠ ä¸åŒå¹³å°çš„ä¸­ä»‹ç»„ï¼ˆMediationï¼‰æ¥å¿«é€Ÿè·å–ä¸åŒå¹³å°çš„å¹¿å‘Šã€‚</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬ä»…ä»¥é›†æˆFacebookçš„å¹¿å‘Šä¸ºä¾‹åšä¸€ä¸‹è¯´æ˜ï¼Œå…¶ä»–å¹³å°çš„å¹¿å‘Šä¹Ÿéƒ½å¤§åŒå°å¼‚ã€‚å¦‚æœåœ¨é›†æˆè¿‡ç¨‹ä¸­æœ‰ä»€ä¹ˆé—®é¢˜ä¹Ÿå¯ä»¥åˆ°å…¬ä¼—å·â€œiOSå¼€å‘æ ˆâ€é—®æˆ‘ã€‚</p><p>åœ¨<code>Podfile</code>æ–‡ä»¶ä¸­æ·»åŠ Admob SDKå’ŒFacebookçš„ä¸­ä»‹ç»„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod &#39;Google-Mobile-Ads-SDK&#39;,</span><br><span class="line">pod &#39;GoogleMobileAdsMediationFacebook&#39;</span><br></pre></td></tr></table></figure><p>ä¹‹ååœ¨ç»ˆç«¯åˆ‡æ¢åˆ°é¡¹ç›®æ‰€åœ¨ç›®å½•ï¼Œå¹¶æ‰§è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &lt;å½“å‰é¡¹ç›®ç›®å½•&gt;</span><br><span class="line">pod install --repo-update</span><br></pre></td></tr></table></figure><p>å®‰è£…å®ŒAdmob SDkå’ŒFBçš„å¹¿å‘Šä¸­ä»‹ç»„ä»¥åï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨å¯¹åº”çš„å¹¿å‘Šå½¢å¼äº†ã€‚å¯¹åº”å¹¿å‘Šå½¢å¼çš„ä½¿ç”¨æ–¹å¼å¯ä»¥åˆ°ä¸Šä¸€èŠ‚æŸ¥çœ‹ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦å¼ºè°ƒçš„æ˜¯åœ¨åˆå§‹åŒ–ä¸åŒçš„å¹¿å‘Šå½¢å¼éœ€è¦è°ƒç”¨<code>initWithAdUnitID:</code>æ–¹æ³•ï¼Œè¿™é‡Œçš„<em>UnitID</em>æ˜¯å¹¿å‘Šä½†æ„¿IDï¼Œå¯ä»¥åœ¨Admobçš„ç®¡ç†åå°-&gt;å¹¿å‘Šå•å…ƒé¡µé¢æŸ¥çœ‹ã€‚</p><p><img src="../../images/admob/UnitId.png" alt="Admob UnitID"></p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è°·æ­Œçš„AdmobæœåŠ¡å’Œå…¶ä»–å¹¿å‘Šå•†ç›¸æ¯”æ–‡æ¡£æ›´åŠ å…¨é¢ï¼ˆä¸è¿‡æ–‡æ¡£ä¸­ä¹Ÿå¯èƒ½æœ‰é”™è¯¯ï¼‰ï¼Œç¤¾åŒºä¹Ÿéå¸¸æ´»è·ƒï¼ˆæˆ‘æ›¾ç»æè¿‡ä¸€ä¸ªé—®é¢˜ï¼Œå¾ˆå¿«å¯ä»¥å¾—åˆ°å›å¤ï¼‰ã€‚è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›æ€»ç»“ï¼Œé‡Œé¢é™¤äº†åŸºç¡€çš„é›†æˆæ–¹æ³•å¤–ï¼Œå¤§éƒ½æ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­çš„æ³¨æ„äº‹é¡¹ï¼Œè‡³äºè¯¦ç»†çš„é›†æˆè¿‡ç¨‹æ¨èåˆ°<a href="https://developers.google.com/admob/ios/quick-start">å®˜æ–¹æ–‡æ¡£</a>ä¸­æŸ¥çœ‹ã€‚å¦‚æœä½ æœ‰ä»»ä½•çš„é—®é¢˜ã€å»ºè®®éƒ½å¯ä»¥é€šè¿‡<a href="https://weibo.com/7414691003/profile">å¾®åš</a>æˆ–<a href="mailto:shizhiang@126.com">é‚®ä»¶</a>è”ç³»åˆ°æˆ‘æœ¬äººã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¦è§£SwiftUIæ•°æ®æµæ˜¯æ€ä¹ˆåœ¨Viewé—´ä¼ é€’çš„</title>
      <link href="swiftui/swiftui-data-flow/"/>
      <url>swiftui/swiftui-data-flow/</url>
      
        <content type="html"><![CDATA[<p>ä½œä¸ºä¸€ä¸ªå£°æ˜å¼çš„UIæ¡†æ¶ï¼ŒSwiftUIå¸®æˆ‘ä»¬å¤„ç†äº†å‡ ä¹æ‰€æœ‰å…³äºUIå’Œæ•°æ®ä¹‹é—´çš„äº¤äº’ï¼Œè¿™ä½¿æˆ‘ä»¬ä¸å†éœ€è¦å…³æ³¨æ•°æ®å˜åŒ–æ—¶åˆ·æ–°UIå’Œç”¨æˆ·äº¤äº’ä»¥åæ›´æ–°æ•°æ®çš„é€»è¾‘ã€‚</p><p>ä¸ºäº†å®ç°æ•°æ®å’ŒUIçš„ç»‘å®šï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨Swiftçš„ä¸€äº›å…³å±æ€§åŒ…è£…å™¨æ¥å‘SwiftUIæè¿°å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><p><img src="../../image/../images/first/SwiftUI-Data-Flow.jpg"></p><h1 id="State-Properties-State"><a href="#State-Properties-State" class="headerlink" title="State Properties @State"></a>State Properties @State</h1><p>åœ¨<a href="https://www.iosprogrammer.tech/swiftui/what-is-the-different-between-foreach-and-list">å‰é¢çš„ä¸€ç¯‡æ–‡ç« </a>ä¸­å½“æˆ‘ä»¬ç»™æ•°ç»„æ·»åŠ æˆ–è€…åˆ é™¤å…ƒç´ æ—¶ï¼Œ<a href="https://www.iosprogrammer.tech/swiftui/swiftui-concept-essential.md">åˆ—è¡¨</a>ä¼šè‡ªåŠ¨å“åº”å˜åŒ–ï¼Œæ­£æ˜¯å› ä¸ºä½¿ç”¨äº†<code>@State</code>æ¥æ ‡è®°Viewä¸­çš„modelã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> title: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;<span class="subst">\(title)</span>&quot;</span>)</span><br><span class="line">            <span class="type">TextField</span>(<span class="string">&quot;Please Enter Title&quot;</span>, text: <span class="variable">$title</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>@State</code>åŒ…è£…çš„å˜é‡æ˜¯å¯ä»¥è¢«SwiftUIè¯»å–çš„å€¼ï¼Œè¿™äº›å€¼é€šå¸¸æ˜¯ä¸€äº›å­—ç¬¦ä¸²æˆ–æ•°å­—ç­‰å¸¸é‡å€¼ã€‚</p><p>å½“è¢«StateåŒ…è£…çš„å±æ€§æ”¹å˜æ—¶ï¼ŒSwiftUIä¼šé‡æ–°è®¡ç®—å’Œç»˜åˆ¶ä½¿ç”¨åˆ°è¯¥å±æ€§çš„è§†å›¾æ‰€åœ¨çš„æ•´ä¸ªè§†å›¾å±‚çº§ï¼Œé€šå¸¸æ˜¯è¯´å˜é‡æ‰€åœ¨Viewçš„Bodyä¼šè¢«é‡æ–°ç»˜åˆ¶ï¼Œåœ¨æœ¬ä¾‹å­ä¸­å°±æ˜¯æŒ‡<code>ContentView</code>çš„bodyã€‚</p><blockquote><p>è¢«<code>@State</code>åŒ…è£…çš„å˜é‡ä¸€å®šè¦ç”¨<code>private</code>ä¿®é¥°ï¼Œå¹¶ä¸”è¿™ä¸ªå˜é‡åªèƒ½åœ¨å½“å‰viewä»¥åŠå…¶å­Viewçš„bodyä¸­ä½¿ç”¨ã€‚</p></blockquote><p>æ­£å¦‚TextFieldä¸­çš„<code>$title</code>ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡*$*å‰ç¼€æŠŠå˜é‡å’Œå¦ä¸€ä¸ªviewç»‘å®šèµ·æ¥ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å¦ä¸€ä¸ªviewä¸­å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œä¿®æ”¹äº†ã€‚ä¸‹é¢çš„ä»£ç ä½¿ç”¨ä¸€ä¸ªToggleæ¥æ§åˆ¶Wi-Fiçš„å¼€å…³ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> isOn <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Wi-Fi State: <span class="subst">\(isOn <span class="operator">?</span> <span class="string">&quot;On&quot;</span> : <span class="string">&quot;Off&quot;</span>)</span>&quot;</span>)</span><br><span class="line">            <span class="type">Image</span>(systemName: <span class="string">&quot;<span class="subst">\(isOn <span class="operator">?</span> <span class="string">&quot;wifi&quot;</span> : <span class="string">&quot;wifi.slash&quot;</span>)</span>&quot;</span>)</span><br><span class="line">            <span class="type">Toggle</span>(<span class="string">&quot;Wi-Fi State&quot;</span>, isOn: <span class="variable">$isOn</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä¸Šé¢çš„ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨<code>isOn</code>å±æ€§å’ŒToggleæ§ä»¶ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªç»‘å®šã€‚Toggleå¯ä»¥ä¿®æ”¹isOnçš„å€¼ï¼Œå¦å¤–å½“isOnæ”¹å˜çš„æ—¶å€™ï¼ŒTextå’ŒImageçš„å†…å®¹éƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><h1 id="State-Binding-çŠ¶æ€ç»‘å®š"><a href="#State-Binding-çŠ¶æ€ç»‘å®š" class="headerlink" title="State Binding çŠ¶æ€ç»‘å®š"></a>State Binding çŠ¶æ€ç»‘å®š</h1><p>ä½¿ç”¨@stateåŒ…è£…çš„å±æ€§åªåœ¨å®ƒæ‰€å±viewçš„å†…éƒ¨ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å®ƒçš„å­è§†å›¾è¦è®¿é—®è¿™ä¸ªå±æ€§çš„æ—¶å€™å°±è¦ç”¨åˆ°<code>@binding</code>äº†ã€‚å°±åƒä¸Šé¢ä¾‹å­ç”¨åˆ°çš„<code>Toggle</code>ï¼Œæˆ‘ä»¬æŠŠTextå’ŒImageæ”¾åˆ°ä¸€ä¸ªè‡ªå®šä¹‰çš„Viewä¸­ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">WiFiView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Binding</span> <span class="keyword">var</span> isOn: <span class="type">Bool</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Wi-Fi State: <span class="subst">\(isOn <span class="operator">?</span> <span class="string">&quot;On&quot;</span> : <span class="string">&quot;Off&quot;</span>)</span>&quot;</span>)</span><br><span class="line">        <span class="type">Image</span>(systemName: <span class="string">&quot;<span class="subst">\(isOn <span class="operator">?</span> <span class="string">&quot;wifi&quot;</span> : <span class="string">&quot;wifi.slash&quot;</span>)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†<code>@Binding</code>æ¥åˆ›å»ºæ•°æ®å’Œç•Œé¢ä¹‹é—´çš„ä¾èµ–ï¼Œå®ƒå’Œ<code>@State</code>ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œbindingçš„å±æ€§å¹¶ä¸è¢«å½“å‰çš„è§†å›¾æ‰€æŒæœ‰ï¼Œå¹¶ä¸”bindingçš„å€¼æ˜¯å¯ä»¥è¢«stateçš„å±æ€§å€¼å¯¼å‡ºçš„ã€‚</p><p>åœ¨è¿™é‡Œå¦‚æœæŠŠ@Bindingæ¢æˆ@Stateå°±ä¼šä½¿WiFiViewå’Œå®ƒçš„çˆ¶è§†å›¾åˆ†åˆ«æ‹¥æœ‰å„è‡ªçš„isOnå±æ€§ï¼Œå…¶ä¸­ä¸€ä¸ªä¿®æ”¹ä¸ä¼šå½±å“åˆ°å¦ä¸€ä¸ªï¼Œè€Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚</p><h1 id="ä½¿ç”¨Combineæ¡†æ¶çš„Publisher"><a href="#ä½¿ç”¨Combineæ¡†æ¶çš„Publisher" class="headerlink" title="ä½¿ç”¨Combineæ¡†æ¶çš„Publisher"></a>ä½¿ç”¨<em>Combine</em>æ¡†æ¶çš„<em>Publisher</em></h1><p>ä½¿ç”¨@StateåŒ…è£…çš„å±æ€§åªèƒ½åœ¨å½“å‰Viewå†…éƒ¨æˆ–è€…å®ƒçš„å­è§†å›¾ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”stateå±æ€§æ—¶ä¸´æ—¶çš„â€”â€”ç”±äºstateåŒ…è£…çš„å±æ€§æ˜¯éš¶å±äºå®ƒæ‰€åœ¨viewçš„ï¼Œå½“viewè¢«é”€æ¯æ—¶å¯¹åº”çš„stateå±æ€§ä¹Ÿä¼šæ¶ˆå¤±ï¼Œè¿™æ˜æ˜¾æ˜¯ä¸å¤Ÿçš„ï¼Œå¦å¤–æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­è¿˜è¦å¤„ç†ä¸€äº›éç•Œé¢çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´<em>Timer</em>ã€<em>Notification</em>ç­‰ï¼Œå®ƒä»¬æºå¸¦çš„ä¿¡æ¯é€šå¸¸ä¹Ÿä¼šæœ‰æ›´æ–°ç•Œé¢çš„éœ€æ±‚ã€‚è¿™ç§æƒ…å†µå°±è¦ç”¨åˆ°Combineä¸­çš„Publisheräº†ã€‚</p><p><em>Combine</em>æ˜¯åœ¨iOS13ä¸­è¢«å¼•å…¥çš„ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å¤„ç†Appä¸­çš„å„ç§äº‹ä»¶æ¶ˆæ¯ã€‚å¦‚æœä½ ä¹‹å‰æ¥è§¦è¿‡<em>RxSwift</em>æˆ–è€…<em>ReactiveCocoa</em>é‚£ä½ å¯¹è¿™ä¸ªæ¦‚å¿µåº”è¯¥å¾ˆå®¹æ˜“ç†è§£ï¼Œå®ƒçš„åŸç†å°±æ˜¯å‘å¸ƒè€…å’Œè®¢é˜…è€…çš„æ¨¡å¼ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Contact</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, age: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> xiaowang <span class="operator">=</span> <span class="type">Contact</span>(name: <span class="string">&quot;xiaowang&quot;</span>, age: <span class="number">21</span>)</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;å°ç‹ï¼š<span class="subst">\(xiaowang.name)</span>&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// è¿™é‡Œåªæ˜¯ä¸€ä¸ªä¾‹å­ï¼Œé€šå¸¸ä¸ä¼šåœ¨è¿™é‡Œå¯¹Publisherè¿›è¡Œä¿®æ”¹</span></span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;ä¿®æ”¹è”ç³»äºº&quot;</span>) &#123;</span><br><span class="line">                xiaowang.name <span class="operator">=</span> <span class="string">&quot;å°ç‹&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªéµå®ˆ<em>ObservableObject</em>åè®®çš„è”ç³»äººç±»ï¼Œç„¶ååœ¨SwiftUIè§†å›¾ä¸­æ·»åŠ ä¸€ä¸ªè¢«<em>ObservedObject</em>åŒ…è£…çš„å˜é‡ï¼Œåœ¨bodyä¸­ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œå½“è¢«<em><em>@Published</em></em>åŒ…è£…çš„å˜é‡æ”¹å˜æ—¶ï¼Œbodyä¼šä½¿ç”¨æ–°å€¼é‡æ–°åŠ è½½ã€‚</p><blockquote><p>å¦‚æœä½ åœ¨çœ‹WWDC2019çš„<a href="https://developer.apple.com/wwdc19/226">Introducing Combile</a>è§†é¢‘çš„æ—¶å€™å‘ç°<em>BindableObject</em>/<em>didChange.send()</em>/<em>onReceive</em>ï¼Œè¿™äº›å†…å®¹ç°åœ¨å·²ç»è¢«<a href="https://developer.apple.com/forums/thread/127243">ç§»é™¤äº†</a>ã€‚</p></blockquote><blockquote><p>åªæœ‰classå¯ä»¥éµå®ˆObservableObjectåè®®ï¼Œå¦åˆ™ä¼šæŠ¥é”™ <mark class="label danger">Non-class type Contact cannot conform to class protocol ObservableObject</mark></p></blockquote><p>åœ¨iOS14ä¸­ï¼Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„<em><em>@StateObject</em></em>æ¥ä¸°å¯Œè¿™ç§ä½¿ç”¨åœºæ™¯ã€‚å®ƒå’ŒObservedObjectçš„åŒºåˆ«åœ¨äºå½“viewåˆ·æ–°æ—¶è¢«ObservedObjectåŒ…è£…çš„å±æ€§ä¼šé‡ç½®åˆ°åˆå§‹å€¼ï¼Œè€Œè¢«StateObjectä½¿ç”¨çš„ä¸ä¼šã€‚</p><blockquote><p>é™¤éåœ¨æŸäº›å¿…è¦çš„æƒ…å†µä¸‹éœ€è¦ä½¿ç”¨ObservedObjectä¹‹å¤–ï¼Œå¤§å¤šæ•°æƒ…å†µéƒ½é€‚ç”¨äºStateObjectã€‚</p></blockquote><h1 id="ç¯å¢ƒå˜é‡-Evironment-Objects"><a href="#ç¯å¢ƒå˜é‡-Evironment-Objects" class="headerlink" title="ç¯å¢ƒå˜é‡ Evironment Objects"></a>ç¯å¢ƒå˜é‡ Evironment Objects</h1><p>é™¤äº†ä»¥ä¸Šåˆ—å‡ºçš„å‡ ä¸ªåœºæ™¯ä¹‹å¤–ï¼Œå‡è®¾æˆ‘ä»¬çš„appéœ€è¦ä»ä¸€ä¸ªé¡µé¢è·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„åœºæ™¯ï¼Œå¹¶ä¸”åœ¨åä¸€ä¸ªé¡µé¢è¦ç”¨åˆ°å‰é¢é¡µé¢çš„ä¸€äº›å±æ€§ã€‚é€šå¸¸å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationLink</span>(destination: nextView(aModel: aModel)) &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Detail&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç”¨åˆ°äº†<strong><em>NavigationLink</em></strong>æ¥åšå¯¼èˆªï¼Œdestinationæ˜¯è¦å¼¹å‡ºçš„é¡µé¢ï¼Œåˆå§‹åŒ–æ—¶å¸¦ç€å½“å‰é¡µé¢çš„ä¸€ä¸ªå±æ€§ã€‚</p><p>è¿™æ ·å¤„ç†æ²¡æœ‰ä»€ä¹ˆå¤§çš„é—®é¢˜ï¼Œä¸è¿‡å¦‚æœå±‚çº§å˜å¤šï¼Œåé¢å±‚çº§åˆå‡ºç°å¾ˆå¤šæ–°å±‚çº§ï¼Œå†æœ‰åå‘ä¼ å€¼çš„è¯å°±ä¼šå¾ˆå¤æ‚å®¹æ˜“å‡ºé”™â€”â€”å°±åƒä½¿ç”¨UIKitçš„æ—¶å€™ã€‚è€Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒSwiftUIå¼•å…¥äº†<strong><em>Evironment Objects</em></strong>ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DataSource.swift</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataSource</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> counter <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ContentView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> dataSource <span class="operator">=</span> <span class="type">DataSource</span>()</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationView</span> &#123;</span><br><span class="line">            <span class="type">VStack</span> &#123;</span><br><span class="line">                <span class="type">Button</span>(<span class="string">&quot;Click&quot;</span>) &#123;</span><br><span class="line">                    dataSource.counter <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">NavigationLink</span>(</span><br><span class="line">                    destination: <span class="type">ContactView</span>()) &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="string">&quot;Enter Next Page&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .environmentObject(dataSource)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ContactView.swift</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContactView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@EnvironmentObject</span> <span class="keyword">var</span> dataSource: <span class="type">DataSource</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;<span class="subst">\(dataSource.counter)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Environment Objectå’ŒObservedObject/StateObjectç”¨æ³•éå¸¸ç›¸ä¼¼ï¼Œé¦–å…ˆDataSourceéµå®ˆObservableObjectåè®®ï¼Œè¦è§‚å¯Ÿçš„å±æ€§counterä½¿ç”¨PublisheråŒ…è£…ã€‚</p><p>è¢«<em><em>@EnvironmentObject</em></em>åŒ…è£…çš„å±æ€§ä¼šéšç€Publisedå±æ€§çš„æ”¹å˜è€Œå˜åŒ–ï¼Œæ‰€åœ¨çš„viewä¹Ÿä¼šé‡æ–°åŠ è½½ã€‚</p><p><em>.environmentObject</em>æ˜¯ä¸€ä¸ª<a href="https://www.iosprogrammer.tech/swiftui-concept-essential">Modifier</a>ï¼Œå®ƒå‘ç¯å¢ƒå˜é‡ä¸­æ³¨å…¥ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœä¸åœ¨ä½¿ç”¨@EnvironmentObjectä¹‹å‰ä½¿ç”¨æŠŠå±æ€§æ³¨å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œå°±ä¼šåŒ…é”™ <mark class="label danger">MissingEnvironmentObjectError: Missing EnvironmentObject</mark></p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å­¦ä¹ äº†SwiftUIæ¡†æ¶ä¸­æ•°æ®çš„æµåŠ¨ç›¸å…³çŸ¥è¯†ï¼Œå…¶ä¸­ä¸»è¦æ¶‰åŠäº†å‡ ä¸ªå¸¸ç”¨çš„å±æ€§åŒ…è£…å™¨ï¼ˆproperty wrapperï¼‰ï¼š@State @Binding @ObservedObject @StateObject @EnvironmentObjectç”¨æ³•å’Œé€‚ç”¨åœºæ™¯ï¼Œå¸Œæœ›å¯¹ä½ æ‰€æœ‰å¸®åŠ©ã€‚å¦‚æœä½ æœ‰ä»»ä½•çš„é—®é¢˜ã€å»ºè®®éƒ½å¯ä»¥é€šè¿‡<a href="https://weibo.com/7414691003/profile">å¾®åš</a>æˆ–<a href="mailto:shizhiang@126.com">é‚®ä»¶</a>è”ç³»åˆ°æˆ‘æœ¬äººã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€æ–‡è§£å†³UIKeyboardçš„ç–‘éš¾æ‚ç—‡</title>
      <link href="UIScrollView-Keyboard/"/>
      <url>UIScrollView-Keyboard/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨iOSçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸è¦åœ¨åŒ…å«UIScrollViewçš„viewä¸­ç›‘å¬é”®ç›˜çš„é€šçŸ¥ï¼Œæœ‰æ—¶å€™ä¼šå‡ºç°ä¸€äº›bugï¼Œæ¯”æ–¹è¯´<code>UIKeyboardWillShowNotification</code>å¯èƒ½ä¼šè°ƒç”¨å¤šæ¬¡ã€‚</p><p>é€šè¿‡è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥è®¨è®ºå‡ ä¸ªç»å¸¸å‡ºç°çš„é—®é¢˜ï¼Œå¹¶ä¸”äº†è§£ä¸€ä¸‹å¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><p><img src="../../images/first/UIkeyBoard.jpg" alt="UIkeyboardçš„bugs"></p><h1 id="UIScrollViewé€€å‡ºé”®ç›˜"><a href="#UIScrollViewé€€å‡ºé”®ç›˜" class="headerlink" title="UIScrollViewé€€å‡ºé”®ç›˜"></a>UIScrollViewé€€å‡ºé”®ç›˜</h1><p>æ‹–åŠ¨UIScrollViewé€€å‡ºé”®ç›˜çš„æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, UIScrollViewKeyboardDismissMode) &#123;</span><br><span class="line">    UIScrollViewKeyboardDismissModeNone,</span><br><span class="line">    UIScrollViewKeyboardDismissModeOnDrag,      &#x2F;&#x2F; dismisses the keyboard when a drag begins</span><br><span class="line">    UIScrollViewKeyboardDismissModeInteractive, &#x2F;&#x2F; the keyboard follows the dragging touch off screen, and may be pulled upward again to cancel the dismiss</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@property(nonatomic) UIScrollViewKeyboardDismissMode keyboardDismissMode &#x2F;&#x2F; é»˜è®¤æ˜¯Noneï¼ŒUIScrollViewå’ŒKeyboarä¸ä¼šæœ‰ä»»ä½•äº¤äº’æ•ˆæœ</span><br></pre></td></tr></table></figure><ul><li><code>UIScrollViewKeyboardDismissModeOnDrag</code> å½“å¼€å§‹æ‹–åŠ¨æ—¶ï¼Œkeyboardä¼šé€€å‡ºå±å¹•ã€‚åœ¨iOS14çš„æ¨¡æ‹Ÿå™¨ä¸ŠåŠ¨ç”»æœ‰ç‚¹ä¸æµç•…ã€‚</li><li><code>UIScrollViewKeyboardDismissModeInteractive</code> <strong>å½“æ‹–åŠ¨æ‰‹åŠ¿è¿›å…¥é”®ç›˜åŒºåŸŸæ—¶</strong>ï¼Œé”®ç›˜ä¼šè·Ÿéšæ‹–åŠ¨ä¸Šå‡æˆ–è€…ä¸‹é™ã€‚</li></ul><h1 id="UIKeyboardWillShowNotificationå¤šæ¬¡é‡å¤é€šçŸ¥"><a href="#UIKeyboardWillShowNotificationå¤šæ¬¡é‡å¤é€šçŸ¥" class="headerlink" title="UIKeyboardWillShowNotificationå¤šæ¬¡é‡å¤é€šçŸ¥"></a><code>UIKeyboardWillShowNotification</code>å¤šæ¬¡é‡å¤é€šçŸ¥</h1><p>å¤šä¸ªTextFieldæˆ–è€…TextViewä¹‹é—´åˆ‡æ¢æ—¶ï¼Œ<code>UIKeyboardWillShowNotification</code>ã€<code>UIKeyboardWillChangeFrameNotification</code>æ¯æ¬¡éƒ½ä¼šè°ƒç”¨ï¼ˆä½†æ˜¯<code>UIKeyboardWillHideNotification</code>å´ä¸ä¼šè°ƒç”¨ï¼‰ï¼Œå½“ä½ ä½¿ç”¨ä¸Šé¢æåˆ°çš„<code>UIScrollViewKeyboardDismissModeInteractive</code>æ—¶ï¼Œé€šçŸ¥ç”šè‡³ä¼šåœ¨ä¸€ä¸ªåŠ¨ç”»è¿‡ç¨‹ä¸­é¢‘ç¹è°ƒç”¨ã€‚</p><p>æˆ‘ä»¬åœ¨å¤„ç†ä¸€äº›ä¸šåŠ¡é€»è¾‘çš„æ—¶å€™éœ€è¦è°¨è®°è¿™ä¸ªç‰¹ç‚¹ï¼Œä¸è¦å¯„å¸Œæœ›äºåªä¼šè°ƒç”¨ä¸€æ¬¡ã€‚æ¯”æ–¹è¯´è¦åœ¨<code>UIKeyboardWillShowNotification</code>çš„å›è°ƒä¸­æŠŠæŸä¸ªè§†å›¾ä¸Šç§»ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willShow:) name:UIKeyboardWillShowNotification object:nil]; &#x2F;&#x2F; è®¢é˜…é€šçŸ¥</span><br><span class="line"></span><br><span class="line">âŒ</span><br><span class="line">- (void)willShow:(NSNotification *)noti &#123;</span><br><span class="line">    NSLog(@&quot;willShow&quot;);</span><br><span class="line">    CGRect keyboarFrame &#x3D; [noti.userInfo[UIKeyboardFrameBeginUserInfoKey] CGRectValue];</span><br><span class="line">    CGRect bottomViewFrame &#x3D; _bottomView.frame;</span><br><span class="line">    bottomViewFrame.origin.y -&#x3D; keyboarFrame.size.height;</span><br><span class="line">    _bottomView.frame &#x3D; bottomViewFrame;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">âœ…</span><br><span class="line">&#x2F;&#x2F; ä½¿ç”¨å›ºå®šé«˜åº¦çš„æ–¹æ³•</span><br><span class="line">- (void)willShow:(NSNotification *)noti &#123;</span><br><span class="line">    NSLog(@&quot;willShow&quot;);</span><br><span class="line">    CGRect keyboarFrame &#x3D; [noti.userInfo[UIKeyboardFrameEndUserInfoKey] CGRectValue];</span><br><span class="line">    CGRect bottomViewFrame &#x3D; _bottomView.frame;</span><br><span class="line">    bottomViewFrame.origin.y &#x3D; self.view.bounds.size.height - keyboarFrame.size.height - _bottomView.bounds.size.height;</span><br><span class="line">    _bottomView.frame &#x3D; bottomViewFrame;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">âœ…</span><br><span class="line">&#x2F;&#x2F; ä½¿ç”¨å…¨å±€å˜é‡çš„æ–¹æ³•</span><br><span class="line">[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didHide:) name:UIKeyboardDidHideNotification object:nil]; &#x2F;&#x2F; è®¢é˜…é”®ç›˜æ¶ˆå¤±çš„é€šçŸ¥</span><br><span class="line"></span><br><span class="line">static BOOL keyboarShow &#x3D; NO;</span><br><span class="line"></span><br><span class="line">- (void)willShow:(NSNotification *)noti &#123;</span><br><span class="line">    NSLog(@&quot;willShow&quot;);</span><br><span class="line">    if (keyboarShow &#x3D;&#x3D; YES) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    keyboarShow &#x3D; YES;</span><br><span class="line">    CGRect keyboarFrame &#x3D; [noti.userInfo[UIKeyboardFrameEndUserInfoKey] CGRectValue];</span><br><span class="line">    CGRect bottomViewFrame &#x3D; _bottomView.frame;</span><br><span class="line">    bottomViewFrame.origin.y &#x3D; self.view.bounds.size.height - keyboarFrame.size.height - _bottomView.bounds.size.height;</span><br><span class="line">    _bottomView.frame &#x3D; bottomViewFrame;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)didHide:(NSNotification *)noti &#123;</span><br><span class="line">    NSLog(@&quot;didHide&quot;);</span><br><span class="line">    keyboarShow &#x3D; NO;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ç‚¹å‡»UIScrollViewè§¦å‘UIKeyboardWillShowNotificationé€šçŸ¥"><a href="#ç‚¹å‡»UIScrollViewè§¦å‘UIKeyboardWillShowNotificationé€šçŸ¥" class="headerlink" title="ç‚¹å‡»UIScrollViewè§¦å‘UIKeyboardWillShowNotificationé€šçŸ¥"></a>ç‚¹å‡»UIScrollViewè§¦å‘<code>UIKeyboardWillShowNotification</code>é€šçŸ¥</h1><p>ç‚¹å‡»TextFiledæˆ–è€…TextViewåï¼Œå†ç‚¹å‡»UIScrollViewï¼Œ<code>UIKeyboardWillShowNotification</code>çš„å›è°ƒä¼šè¢«è§¦å‘ï¼Œæˆ‘ä¸èƒ½ç¡®å®šé€ æˆè¿™ä¸ªç°è±¡çš„åŸå› æ˜¯ä»€ä¹ˆï¼Œä¸è¿‡çŒœæµ‹æ˜¯å› ä¸ºiOSçš„äº‹ä»¶ç®¡ç†ç³»ç»Ÿçš„å†…éƒ¨bugå¯¼è‡´çš„ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ç»ˆææ–¹æ³•å’Œæˆ‘ä»¬ä¸Šé¢â¬†ï¸ç”¨çš„æ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€šè¿‡è¿™ç¯‡æ–‡ç« æˆ‘ä»¬è®¨è®ºäº†åœ¨ä½¿ç”¨<code>UIScrollView</code>çš„æ—¶å€™ä¼šå‡ºç°çš„ä¸€äº›å…³äºé”®ç›˜çš„é—®é¢˜ï¼Œå¹¶ä¸”ç»™å‡ºäº†å…·ä½“çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥åŠç”¨åˆ°äº†UIKeybaordçš„ä¸€äº›é€šçŸ¥ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p><p>å¦‚æœä½ æœ‰ä»»ä½•çš„é—®é¢˜ã€å»ºè®®éƒ½å¯ä»¥é€šè¿‡<a href="https://weibo.com/7414691003/profile">å¾®åš</a>æˆ–<a href="mailto:shizhiang@126.com">é‚®ä»¶</a>è”ç³»åˆ°æˆ‘æœ¬äººã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨SwiftUIä¸­ä½¿ç”¨ForEachå’ŒListæ¨¡ä»¿UITableViewã€UICollectionView</title>
      <link href="swiftui/what-is-the-different-between-foreach-and-list/"/>
      <url>swiftui/what-is-the-different-between-foreach-and-list/</url>
      
        <content type="html"><![CDATA[<p>ForEachå’ŒListéƒ½å¯ä»¥åˆ›å»ºåˆ—è¡¨ï¼Œå®ƒä»¬éƒ½æ˜¯SwiftUIé‡è¦çš„ç»„ä»¶ï¼Œå®ƒä»¬ç”¨æ¥æ›¿ä»£UIKitä¸­çš„UITableViewã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°†å­¦ä¹ åˆ°ForEachå’ŒListçš„ç›¸å…³ç”¨æ³•ã€‚</p><p>è¿™ç¯‡æ–‡ç« éå¸¸é€‚åˆSwiftUIå…¥é—¨çš„åŒå­¦ã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><p><img src="../../images/swiftui-list/blog-main-picture.png"></p><h2 id="Listçš„ç”¨æ³•"><a href="#Listçš„ç”¨æ³•" class="headerlink" title="Listçš„ç”¨æ³•"></a>Listçš„ç”¨æ³•</h2><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹<code>List</code>ã€‚Listæœ€ç®€å•çš„ç”¨æ³•</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span>(<span class="number">0</span><span class="operator">..&gt;</span><span class="number">10</span>) &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hellow, SwiftUI&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·åªæ˜¯ç®€å•çš„æŠŠä¸€ä¸ªæ–‡å­—è¿­ä»£äº†10éç»„æˆä¸€ä¸ªåˆ—è¡¨ã€‚ä¸‹é¢å‡è®¾æœ‰ä¸€ä¸ªå­¦ç”Ÿæ•°ç»„ï¼Œæ•°ç»„æ˜¯ç”±20ä¸ªå­—å…¸ç»„æˆï¼Œæ¯ä¸ªå­—å…¸åŒ…å«å­¦ç”Ÿçš„idå’Œå§“åä¸¤ä¸ªå…ƒç´ ã€‚</p><p><img src="../../images/swiftui-list/2.png" alt="SwiftUI Listç”¨æ³•"></p><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<code>List</code>çš„åˆ›å»ºæ–¹æ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span>(students, id: \.id) &#123; student <span class="keyword">in</span></span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;student id:<span class="subst">\(student.id)</span> name:<span class="subst">\(student.name)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Listçš„åˆå§‹åŒ–ç”¨åˆ°äº†3ä¸ªå‚æ•°ï¼š</p><ol><li>ä¸€ä¸ªæœªå‘½åçš„<code>data</code>ï¼Œè¢«è¿­ä»£çš„æ•°ç»„ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨çš„æ˜¯<code>students</code>ã€‚</li><li>keypathç±»å‹çš„<code>id</code>å‚æ•°ï¼Œç”¨æ¥å”¯ä¸€åŒºåˆ†å½“å‰è¿­ä»£åˆ°çš„å…ƒç´ æ˜¯æ•°ç»„ä¸­çš„å“ªä¸€ä¸ªã€‚</li><li>æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œæ¯ä¸€æ¬¡è¿­ä»£éƒ½ä¼šæŠŠé—­åŒ…ä¸­çš„viewç»„æˆä¸€ä¸ªæ–°çš„viewã€‚å› ä¸ºè¿™æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨å°¾éšé—­åŒ…ã€‚</li></ol><h2 id="ForEachçš„ç”¨æ³•"><a href="#ForEachçš„ç”¨æ³•" class="headerlink" title="ForEachçš„ç”¨æ³•"></a>ForEachçš„ç”¨æ³•</h2><p><code>ForEach</code>å’Œ<code>List</code>ä¸€æ ·éƒ½å¯ä»¥è¿›è¡Œæ•°ç»„è¿­ä»£æ¥åˆ›å»ºåˆ—è¡¨ï¼ŒæŠŠä¸Šé¢çš„ä¾‹å­ç”¨ForEachå®ç°ã€‚</p><p><img src="../../images/swiftui-list/3.png" alt="SwiftUI ForEachç”¨æ³•"></p><p><code>ForEach</code>çš„å‚æ•°å’Œ<code>List</code>å‡ ä¹ä¸€æ ·ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><h2 id="Listå’ŒForEachçš„ä¸åŒ"><a href="#Listå’ŒForEachçš„ä¸åŒ" class="headerlink" title="Listå’ŒForEachçš„ä¸åŒ"></a>Listå’ŒForEachçš„ä¸åŒ</h2><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºForEachå’ŒListçš„è¯­æ³•éå¸¸çš„ç›¸ä¼¼ï¼Œä¸è¿‡ForEachåœ¨<em>Preview</em>ä¸­å±•ç¤ºçš„æ•ˆæœå´åˆ†æˆäº†å¥½å¤šä¸ªå±å¹•ã€‚</p><p>è¿™ä¸ªæ•ˆæœå…¶å®å’Œä¸‹é¢çš„ä»£ç æ˜¯ä¸€æ ·çš„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> students: [<span class="type">Student</span>]</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Student id:0 name:aaa&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Student id:0 name:aaa&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Student id:0 name:aaa&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹æ‰€ä»¥ä¼šæ˜¯è¿™æ ·ï¼Œæ˜¯å› ä¸ºForEachå¹¶ä¸ä¼šç”Ÿæˆä¸€ä¸ªå®¹å™¨æ¥åŒ…è£…é—­åŒ…é‡Œé¢çš„Viewï¼Œè€ŒListå´æ­£å¥½ç›¸åï¼Œå¹¶ä¸”<strong>ForEachçš„åˆ—è¡¨æ˜¯ä¸èƒ½æ»šåŠ¨çš„</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å½“é‡Œé¢çš„viewè¶…å‡ºäº†ForEachçš„çˆ¶è§†å›¾çš„å¤§å°æ˜¯ä¸èƒ½æ»šåŠ¨çš„ã€‚è¿™ä¹Ÿæ˜¯å’±ä»¬åœ¨ä½¿ç”¨Listå’ŒForEachçš„æ—¶å€™éœ€è¦æ³¨æ„çš„ç‚¹ã€‚</p><h2 id="Listå’ŒForEachçš„é€‚ç”¨åœºæ™¯"><a href="#Listå’ŒForEachçš„é€‚ç”¨åœºæ™¯" class="headerlink" title="Listå’ŒForEachçš„é€‚ç”¨åœºæ™¯"></a>Listå’ŒForEachçš„é€‚ç”¨åœºæ™¯</h2><p>å› ä¸ºListä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªå®¹å™¨æ¥åŒ…è£…å®ƒé‡Œé¢çš„å­viewï¼Œæ‰€ä»¥å®ƒæ›´é€‚åˆå•ç‹¬ä½¿ç”¨æ¥åˆ›å»ºä¸€ä¸ªå¯ä»¥æ”¯æŒçºµå‘æ»šåŠ¨çš„åˆ—è¡¨ï¼Œå°±åƒå’±ä»¬ä¸Šé¢çš„ç”¨æ³•ã€‚</p><p>è€ŒForEachä¸ä¼šç”Ÿæˆä¸€ä¸ªå®¹å™¨ï¼Œè€Œä¸”ä¸èƒ½æ”¯æŒæ»šåŠ¨ï¼Œæ‰€ä»¥ä¸€èˆ¬æŠŠå®ƒåµŒå¥—åœ¨å…¶ä»–å®¹å™¨é‡Œé¢ä½¿ç”¨ã€‚</p><h3 id="ListåµŒå¥—ForEach"><a href="#ListåµŒå¥—ForEach" class="headerlink" title="ListåµŒå¥—ForEach"></a>ListåµŒå¥—ForEach</h3><p>åµŒå¥—åœ¨<code>List</code>é‡Œé¢å¯ä»¥å®ç°ç±»ä¼¼å¸¦headerçš„UITableViewçš„æ•ˆæœï¼Œè¿™é‡ŒåŒæ—¶å±•ç¤ºäº†å›ºå®šä¸åŠ¨çš„Headerå’Œè·Ÿéšæ»šåŠ¨çš„Headerã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> students: [<span class="type">Student</span>]</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;è¿™æ˜¯å›ºå®šä¸åŠ¨çš„Header&quot;</span>)</span><br><span class="line">            <span class="type">List</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;è¿™æ˜¯è·Ÿéšæ»šåŠ¨çš„Header&quot;</span>)</span><br><span class="line">                <span class="type">ForEach</span>(students, id: \.id) &#123; stu <span class="keyword">in</span></span><br><span class="line">                    <span class="type">Text</span>(<span class="string">&quot;student id:<span class="subst">\(stu.id)</span> name: <span class="subst">\(stu.name)</span>&quot;</span>).frame(width: <span class="number">200</span>, height: <span class="number">60</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                .onDelete&#123; indexSet <span class="keyword">in</span></span><br><span class="line">                    <span class="keyword">for</span> index <span class="keyword">in</span> indexSet &#123;</span><br><span class="line">                        students.remove(at: index)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;è¿™æ˜¯è·Ÿéšæ»šåŠ¨Footer&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;è¿™æ˜¯å›ºå®šä¸åŠ¨çš„Footer&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="../../images/swiftui-list/4.png" alt="SwiftUI ForEachç”¨æ³•"></p><p>è¿™é‡Œé¢æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ol><li><code>@State</code> é€šè¿‡æ·»åŠ <a href="./swiftui-concept-essential">æ•°æ®ç»‘å®š</a>ä½¿viewçš„æ”¹å˜å’Œæ•°æ®è”ç³»èµ·æ¥ï¼Œå¦‚æœä¸æ·»åŠ è¿™ä¸ªä¼šæŠ¥é”™ <mark class="label danger">Cannot use mutating member on immutable value: self is immutable</mark></li><li><code>.onDelete</code> æ·»åŠ äº†è¿™ä¸ª<a href="./swiftui-concept-essential">modifire</a>åå‡ºç°å·¦æ»‘åˆ é™¤çš„æ•ˆæœ</li></ol><h3 id="ScrollViewåµŒå¥—ForEach"><a href="#ScrollViewåµŒå¥—ForEach" class="headerlink" title="ScrollViewåµŒå¥—ForEach"></a>ScrollViewåµŒå¥—ForEach</h3><p>ç”¨æ¨ªå‘æ»šåŠ¨çš„<code>ScrollView</code>åµŒå¥—<code>ForEach</code>å¯ä»¥å®ç°ç±»ä¼¼UIKitä¸­æ¨ªå‘æ»šåŠ¨çš„<code>UICollectionView</code>ã€‚</p><p><img src="../../images/swiftui-list/5.png" alt="SwiftUI ForEachç”¨æ³•"></p><h3 id="SectionåµŒå¥—ForEach"><a href="#SectionåµŒå¥—ForEach" class="headerlink" title="SectionåµŒå¥—ForEach"></a>SectionåµŒå¥—ForEach</h3><p>ä½¿ç”¨Listã€Sectionã€ForEachåµŒå¥—æ¥å®ç°ç±»ä¼¼äºUITableViewçš„åˆ†ç»„æ•ˆæœã€‚</p><p>è¿˜æ˜¯ä½¿ç”¨ä¸Šé¢çš„å­¦ç”Ÿä¾‹å­ï¼Œç°åœ¨æˆ‘ä»¬æ¥ç»™å­¦ç”Ÿåˆ†ç­ã€‚å…ˆæ¥åˆ›å»ºä¸¤ä¸ªç­çº§ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">StuCls</span>: <span class="title">String</span>, <span class="title">CaseIterable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">ClsOne</span> <span class="operator">=</span> <span class="string">&quot;ä¸€ç­&quot;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">ClsTwo</span> <span class="operator">=</span> <span class="string">&quot;äºŒç­&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠŠå­¦ç”Ÿåˆ’åˆ†åˆ°ç­çº§é‡Œé¢</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span>: <span class="title">Identifiable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> classId: <span class="type">StuCls</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åˆ›å»ºå‡ ä¸ªåˆ†å¥½ç­çš„å­¦ç”Ÿï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> std1 <span class="operator">=</span> <span class="type">Student</span>(id: <span class="number">0</span>, name: <span class="string">&quot;å­¦ç”Ÿ1&quot;</span>, classId: <span class="type">StuCls</span>.<span class="type">ClsOne</span>)</span><br><span class="line"><span class="keyword">let</span> std2 <span class="operator">=</span> <span class="type">Student</span>(id: <span class="number">1</span>, name: <span class="string">&quot;å­¦ç”Ÿ2&quot;</span>, classId: <span class="type">StuCls</span>.<span class="type">ClsOne</span>)</span><br><span class="line"><span class="keyword">let</span> std3 <span class="operator">=</span> <span class="type">Student</span>(id: <span class="number">2</span>, name: <span class="string">&quot;å­¦ç”Ÿ3&quot;</span>, classId: <span class="type">StuCls</span>.<span class="type">ClsOne</span>)</span><br><span class="line"><span class="keyword">let</span> std4 <span class="operator">=</span> <span class="type">Student</span>(id: <span class="number">2</span>, name: <span class="string">&quot;å­¦ç”Ÿ4&quot;</span>, classId: <span class="type">StuCls</span>.<span class="type">ClsTwo</span>)</span><br><span class="line"><span class="keyword">let</span> std5 <span class="operator">=</span> <span class="type">Student</span>(id: <span class="number">2</span>, name: <span class="string">&quot;å­¦ç”Ÿ5&quot;</span>, classId: <span class="type">StuCls</span>.<span class="type">ClsTwo</span>)</span><br><span class="line"><span class="keyword">let</span> std6 <span class="operator">=</span> <span class="type">Student</span>(id: <span class="number">2</span>, name: <span class="string">&quot;å­¦ç”Ÿ6&quot;</span>, classId: <span class="type">StuCls</span>.<span class="type">ClsTwo</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> students <span class="operator">=</span> [std1, std2, std3, std4, std5, std6]</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œç»“åˆListã€ForEachå’ŒSectionåˆ›å»ºå¯ä»¥åˆ†ç»„çš„åˆ—è¡¨</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> &#123;</span><br><span class="line">    <span class="type">ForEach</span>(<span class="type">StuCls</span>.allCases, id: \.rawValue) &#123; cls <span class="keyword">in</span></span><br><span class="line">        <span class="type">Section</span>(header: <span class="type">Text</span>(cls.rawValue)) &#123;</span><br><span class="line">            <span class="type">ForEach</span>(students.filter &#123; <span class="variable">$0</span>.classId <span class="operator">==</span> cls &#125;, id: \.id) &#123; stu <span class="keyword">in</span></span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;student id:<span class="subst">\(stu.id)</span> name: <span class="subst">\(stu.name)</span>&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="../../images/swiftui-list/6.png" alt="SwiftUI ForEachç”¨æ³•"></p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å­¦ä¹ äº†SwiftUIä¸­<code>List</code>/<code>ForEach</code>/<code>ScrollView</code>/<code>Section</code>çš„ç”¨æ³•ï¼Œå¹¶åˆ©ç”¨ä¸€ä¸ªä¾‹å­è¯¦ç»†è¯´æ˜äº†å‰ä¸¤ä¸ªçš„ä¸åŒå’Œä½¿ç”¨åœºæ™¯ã€‚ä½ åº”è¯¥å­¦åˆ°äº†ï¼š</p><ul><li><code>List</code>å’Œ<code>ForEach</code>çš„ç”¨æ³•ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯</li><li>æ€ä¹ˆåˆ›å»ºä¸€ä¸ªåƒUICollectionViewä¸€æ ·æ¨ªå‘æ»šåŠ¨çš„åˆ—è¡¨</li><li>ç±»ä¼¼UITableViewçš„åˆ†ç»„åˆ—è¡¨è¦æ€æ ·å®ç°</li><li>å¤´éƒ¨å›ºå®šä¸åŠ¨å’Œè·Ÿéšæ»šåŠ¨çš„åˆ—è¡¨çš„å®ç°æ–¹æ¡ˆ</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ SwiftUIï¼Œå¿…é¡»æŒæ¡çš„3ä¸ªçŸ¥è¯†ç‚¹</title>
      <link href="swiftui/swiftui-concept-essential/"/>
      <url>swiftui/swiftui-concept-essential/</url>
      
        <content type="html"><![CDATA[<p>åœ¨WWDC2019ä¸­ï¼ŒiOSå¼•å…¥äº†ä¸€ä¸ªå…¨æ–°çš„UIæ¡†æ¶â€”â€”SwiftUIã€‚å®ƒçš„ç›®çš„æ˜¯é€šè¿‡å…¨æ–°çš„è®¾è®¡æ€æƒ³æ¥è§£å†³iPhoneã€iPadã€Macçš„ç•Œé¢ç»Ÿä¸€ï¼Œä»¥ä¾¿å¼€å‘è€…å¯ä»¥é€šè¿‡ä¸€æ¬¡å­¦ä¹ å¤šå¤„ä½¿ç”¨ï¼ˆLearn Once, Use anywhereï¼‰ã€‚ä»iOS13å¼€å§‹æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå…¨æ–°çš„æ¡†æ¶äº†ï¼ŒiOSå¼€å‘è€…åº”è¯¥å°½å¿«æŒæ¡å®ƒã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h2 id="View"><a href="#View" class="headerlink" title="View"></a>View</h2><p>SwiftUIä¸­ä¸€åˆ‡çš†Viewï¼Œä¸è®ºæ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„<code>Button</code>è¿˜æ˜¯<code>backgroundColor</code>ï¼Œç”šè‡³<code>Color.red</code>ï¼Œå®ƒä»¬éƒ½æ˜¯<code>View</code>ã€‚</p><p>ä¸UIKitä¸­çš„<code>UIView</code>ä¸åŒçš„æ˜¯ï¼Œåœ¨SwiftUIä¸­<code>View</code>ä¸å†æ˜¯ä¸€ä¸ªç±»è€Œæ˜¯ä¸€ä¸ªåè®®ã€‚`</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">View</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// The type of view representing the body of this view.</span></span><br><span class="line">    <span class="comment">///</span></span><br><span class="line">    <span class="comment">/// When you create a custom view, Swift infers this type from your</span></span><br><span class="line">    <span class="comment">/// implementation of the required `body` property.</span></span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Body</span> : <span class="type">View</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// The content and behavior of the view.</span></span><br><span class="line">    <span class="meta">@ViewBuilder</span> <span class="keyword">var</span> body: <span class="keyword">Self</span>.<span class="type">Body</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SwiftUIä¸­çš„Viewæ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ <mark class="label danger">'View' cannot be constructed because it has no accessible initializers</mark>ï¼Œå½“ä½ é‡åˆ°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™è¯·ä»”ç»†æ€è€ƒä¸€ä¸‹ä½ æ˜¯ä¸æ˜¯çœŸçš„è¦è¿™ä¹ˆç”¨ï¼Œæˆ–è®¸å¯ä»¥ç”¨ä¸€ä¸ªå…¶ä»–çš„ä»£æ›¿ã€‚</p><p>å¸¸ç”¨åˆ°çš„<code>View</code>æœ‰ï¼š<code>Text</code>/<code>Button</code>/<code>Toggle</code>/<code>Picker</code>/<code>V(Z)(H)Stack</code>/<code>Color</code>/<code>Spacer</code>/<code>Image</code>/<code>Shape</code>/<code>Divider</code>ä»¥åŠå®ƒä»¬çš„<code>modifier</code>ç­‰ã€‚</p><p><code>@ViewBuilder</code>æ ‡è®°çš„<code>body</code>å˜é‡è¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢å¯ä»¥åŒ…å«ä»»æ„å¤šä¸ªå…¶ä»–çš„<code>View</code>ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(action: btnClick) &#123;</span><br><span class="line">    <span class="type">VStack</span> &#123;</span><br><span class="line">        <span class="type">Image</span>(systemName: <span class="string">&quot;star&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Placeholder&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Modifer"><a href="#Modifer" class="headerlink" title="Modifer"></a>Modifer</h2><p>æˆ‘ä»¬åˆ†åˆ«çœ‹ä¸€ä¸‹åœ¨UIKitå’ŒSwiftUIä¸­ä¿®æ”¹ä¸€ä¸ªLabelçš„æ–‡å­—é¢œè‰²</p><div class="tabs" id="modify-label-text-color"><ul class="nav-tabs"><li class="tab active"><a href="#modify-label-text-color-1">UIKit</a></li><li class="tab"><a href="#modify-label-text-color-2">SwiftUI</a></li></ul><div class="tab-content"><div class="tab-pane active" id="modify-label-text-color-1"><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> label <span class="operator">=</span> <span class="type">UILabel</span>()</span><br><span class="line">label.text <span class="operator">=</span> <span class="string">&quot;UIKit&quot;</span></span><br><span class="line">label.textColor <span class="operator">=</span> <span class="type">UIColor</span>.red</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="modify-label-text-color-2"><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;SwiftUI&quot;</span>).foregroundColor(.red)</span><br></pre></td></tr></table></figure></div></div></div><p>SwiftUIä¸­çš„<code>.foregroundColor</code>å’Œ<code>textColor</code>æœ‰æœ¬è´¨çš„ä¸åŒï¼Œå®ƒæ˜¯ä¸€ç§<strong>modifier</strong>ï¼Œå®ƒè¿”å›çš„æ˜¯ä»¤ä¸€ä¸ªViewã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@inlinable</span> <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">foregroundColor</span><span class="params">(<span class="keyword">_</span> color: Color?)</span></span> -&gt; <span class="keyword">some</span> <span class="type">View</span></span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬è°ƒç”¨äº†<code>.foregroundColor</code>å…¶å®æ˜¯åˆ›é€ äº†ä¸€ä¸ªæ–°çš„Viewï¼Œè¿™ä¹Ÿæ­£æ˜¯SwiftUIä¸­ä¸‡ç‰©çš†Viewçš„ä¾‹å­ã€‚</p><h2 id="Stateå’Œ-â€”â€”-Binding-Value"><a href="#Stateå’Œ-â€”â€”-Binding-Value" class="headerlink" title="@Stateå’Œ$ â€”â€” Binding Value"></a>@Stateå’Œ$ â€”â€” Binding Value</h2><div class="tabs" id="toggle"><ul class="nav-tabs"><li class="tab active"><a href="#toggle-1">ä»£ç </a></li><li class="tab"><a href="#toggle-2">æ•ˆæœå›¾</a></li></ul><div class="tab-content"><div class="tab-pane active" id="toggle-1"><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> isOn: <span class="type">Bool</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Toggle</span>(isOn: <span class="variable">$isOn</span>) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Toggle&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="toggle-2"><p><img src="../images/swiftui-concept/1.png" alt="SwiftUI Toggle Binding"></p></div></div></div><blockquote><p>è¿™æ˜¯ä¸€ä¸ªåŒå‘ç»‘å®š</p></blockquote><p>ç»‘å®šå»ºç«‹ä»¥åï¼Œä¸è®ºæ˜¯<code>isOn</code>çš„ä¿®æ”¹è§¦å‘äº†ToggleçŠ¶æ€çš„æ”¹å˜ï¼Œè¿˜æ˜¯ç”¨æˆ·ç‚¹å‡»äº†Toggleå¼•èµ·<code>isOn</code>å˜é‡å€¼çš„æ”¹å˜æˆ‘ä»¬éƒ½ä¸éœ€è¦å…³å¿ƒï¼ŒSwiftUIä¼šå¸®æˆ‘ä»¬å®Œæˆã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚</p></div><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>è¿™ç¯‡æ–‡ç« èŠäº†SwiftUIä¸­æœ€åŸºç¡€æœ€é‡è¦çš„3ä¸ªæ¦‚å¿µï¼Œå¦‚æœä½ æœ‰ä»»ä½•çš„é—®é¢˜ã€å»ºè®®éƒ½å¯ä»¥é€šè¿‡<a href="https://weibo.com/7414691003/profile">å¾®åš</a>æˆ–<a href="mailto:shizhiang@126.com">é‚®ä»¶</a>è”ç³»åˆ°æˆ‘æœ¬äººã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> SwiftUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€ä½³å®è·µï¼šiOSå¼€å‘åœ¨xib/storyboardä¸­è‡ªå®šä¹‰view</title>
      <link href="how-to-make-view-get-intrinsic-content-size/"/>
      <url>how-to-make-view-get-intrinsic-content-size/</url>
      
        <content type="html"><![CDATA[<p>åœ¨xibæˆ–è€…storyboardåµŒå¥—å¦ä¸€ä¸ªç”¨xibå¸ƒå±€çš„viewæ˜¯ä¸€ä¸ªç»å¸¸ç”¨åˆ°çš„æŠ€æœ¯ç‚¹ï¼Œè¦å®Œå…¨æŒæ¡å¥½è¿™ä¸ªçŸ¥è¯†ç‚¹ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ï¼Œç”¨å¸¸è§„çš„xibåˆ›å»ºviewçš„æ–¹æ³•é€šå¸¸å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p><p>å½“æˆ‘ä»¬ä½¿ç”¨Autolayoutè‡ªåŠ¨å¸ƒå±€æ—¶ï¼Œåœ¨xibä¸­åµŒå¥—ä¸€ä¸ªè‡ªå®šä¹‰çš„viewå¯èƒ½å°±æ›´éº»çƒ¦äº†ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ä½ å°†å­¦ä¹ åˆ°åµŒå¥—xibå¸ƒå±€çš„æ–¹æ³•å’Œæ€ä¹ˆåœ¨xibä¸­ä½¿ç”¨autolayoutçš„ä¸€äº›é«˜çº§ç”¨æ³•æ¥ä½¿viewå‘labelä¸€æ ·å…·æœ‰contrisic content sizeã€‚</p><a id="more"></a><h3 id="ä»xibåŠ è½½è‡ªå®šä¹‰viewè§†å›¾"><a href="#ä»xibåŠ è½½è‡ªå®šä¹‰viewè§†å›¾" class="headerlink" title="ä»xibåŠ è½½è‡ªå®šä¹‰viewè§†å›¾"></a>ä»xibåŠ è½½è‡ªå®šä¹‰viewè§†å›¾</h3><p>æ–°å»ºé¡¹ç›®:<br><img src="../images/xib-view/xib-1.png"></p><p>æ·»åŠ viewå’Œxibåˆ°é¡¹ç›®ä¸­ï¼š</p><p><img src="../images/xib-view/xib-4.png"><br><img src="../images/xib-view/xib-2.png"><br><img src="../images/xib-view/xib-3.png"></p><p>è®¾ç½®xibçš„å¤§å°ä¸ºfreedomï¼Œå¹¶è®¾ç½®xibçš„å¤§å°ä¸º 200x100</p><p><img src="../images/xib-view/xib-6.png"><br><img src="../images/xib-view/xib-7.png"></p><p><strong>è®¾ç½®xibçš„ Filsâ€™s Owner ä¸ºCustomViewï¼Œä¸è¦è®¾ç½®viewçš„class</strong></p><p><img src="../images/xib-view/xib-5.png"></p><h3 id="xibæ–‡ä»¶ä¸­æ·»åŠ viewå¹¶è®¾ç½®çº¦æŸ"><a href="#xibæ–‡ä»¶ä¸­æ·»åŠ viewå¹¶è®¾ç½®çº¦æŸ" class="headerlink" title="xibæ–‡ä»¶ä¸­æ·»åŠ viewå¹¶è®¾ç½®çº¦æŸ"></a>xibæ–‡ä»¶ä¸­æ·»åŠ viewå¹¶è®¾ç½®çº¦æŸ</h3><p><img src="../images/xib-view/xib-8.png"></p><p>è®¾ç½®çº¦æŸåçš„xibæ˜¯è¿™æ ·ï¼š</p><p><img src="../images/xib-view/xib-15.png"></p><h3 id="xibå’Œ-må»ºç«‹é“¾æ¥"><a href="#xibå’Œ-må»ºç«‹é“¾æ¥" class="headerlink" title=".xibå’Œ.må»ºç«‹é“¾æ¥"></a>.xibå’Œ.må»ºç«‹é“¾æ¥</h3><p><img src="../images/xib-view/xib-13.png"></p><h3 id="é‡å†™initWithCoder-æ–¹æ³•æŠŠxibä¸­çš„viewæ·»åŠ è¿›æ¥"><a href="#é‡å†™initWithCoder-æ–¹æ³•æŠŠxibä¸­çš„viewæ·»åŠ è¿›æ¥" class="headerlink" title="é‡å†™initWithCoder:æ–¹æ³•æŠŠxibä¸­çš„viewæ·»åŠ è¿›æ¥"></a>é‡å†™<code>initWithCoder:</code>æ–¹æ³•æŠŠxibä¸­çš„viewæ·»åŠ è¿›æ¥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithCoder:(NSCoder *)coder</span><br><span class="line">&#123;</span><br><span class="line">    self &#x3D; [super initWithCoder:coder];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        &#x2F;&#x2F; åŠ è½½xibï¼Œæ³¨æ„owner: self</span><br><span class="line">        [[NSBundle mainBundle] loadNibNamed:NSStringFromClass([self class]) owner:self options:nil];</span><br><span class="line">        self.contentView.frame &#x3D; self.bounds;</span><br><span class="line">        [self addSubview:self.contentView];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åœ¨Main-storyboardä¸­æ·»åŠ CustomViewï¼Œå¹¶è®¾ç½®çº¦æŸ"><a href="#åœ¨Main-storyboardä¸­æ·»åŠ CustomViewï¼Œå¹¶è®¾ç½®çº¦æŸ" class="headerlink" title="åœ¨Main.storyboardä¸­æ·»åŠ CustomViewï¼Œå¹¶è®¾ç½®çº¦æŸ"></a>åœ¨Main.storyboardä¸­æ·»åŠ CustomViewï¼Œå¹¶è®¾ç½®çº¦æŸ</h3><img src="../images/xib-view/xib-9.png"/><img src="../images/xib-view/xib-10.png"  style="height:300px"/><p>è¿™æ—¶å€™ä¼šæŠ¥é”™ï¼Œå› ä¸ºviewçš„çº¦æŸä¸è¶³ã€‚</p><p><img src="../images/xib-view/xib-11.png"></p><h3 id="è®©UIViewåƒUILabelä¸€æ ·æ‹¥æœ‰IntrinsicContentSize"><a href="#è®©UIViewåƒUILabelä¸€æ ·æ‹¥æœ‰IntrinsicContentSize" class="headerlink" title="è®©UIViewåƒUILabelä¸€æ ·æ‹¥æœ‰IntrinsicContentSize"></a>è®©UIViewåƒUILabelä¸€æ ·æ‹¥æœ‰IntrinsicContentSize</h3><p>åœ¨UIKitä¸­æœ‰ä¸€äº›è§†å›¾å…·æœ‰intrinsicContentSizeï¼Œæ¯”å¦‚UILabelã€UIButotnã€UIImageViewç­‰ã€‚è¿™ç±»è§†å›¾å¯ä»¥æ ¹æ®è‡ªèº«çš„å†…å®¹ç¡®å®šå¤§å°ï¼Œåœ¨è®¾ç½®çº¦æŸæ—¶åªéœ€è¦ç¡®å®šä½ç½®ï¼ˆx/yï¼‰å°±å¯ä»¥äº†ã€‚</p><p>ä½†æ˜¯UIViewæœ¬èº«æ˜¯ä¸å…·å¤‡è¿™ä¸ªç‰¹æ€§çš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨xibæˆ–è€…storyboardä¸­<strong>è®¾ç½®intrinsicSizeæ¥å‘Šè¯‰ç¼–è¯‘å™¨å½“å‰çš„è§†å›¾æ˜¯å¯ä»¥ç¡®å®šè‡ªèº«å¤§å°çš„</strong>ã€‚</p><p><img src="../images/xib-view/xib-12.png"></p><p>è¿™æ ·è®¾ç½®ä»¥åçº¦æŸä¸è¶³çš„è­¦å‘Šå°±æ²¡æœ‰äº†ã€‚</p><p><img src="../images/xib-view/xib-16.png"></p><p>æœ€ç»ˆï¼Œview controllerä¸­customViewçš„å±•ç¤ºå°±æ˜¯.xibä¸­çš„æ ·å­äº†ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>é€šè¿‡è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å¯ä»¥å­¦åˆ°ï¼š</p><ul><li>xibè‡ªå®šä¹‰viewçš„æ–¹æ³•</li><li>è®©UIViewåƒUILabelä¸€æ ·æ‹¥æœ‰IntrinsicContentSizeçš„æ–¹æ³•</li><li>xibåµŒå¥—ä½¿ç”¨çš„æ–¹æ³•</li></ul><p><strong>æƒ³äº†è§£æ›´å¤šå†…å®¹å…³æ³¨å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘ã€‚</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»€ä¹ˆæ˜¯Content Hugging Priorities/Content Compression Resistance Priorities</title>
      <link href="What-is-Content-Hugging-Priorities-Content-Compression-Resistance-Priorities/"/>
      <url>What-is-Content-Hugging-Priorities-Content-Compression-Resistance-Priorities/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸¤ä¸ªä¼˜å…ˆçº§å±æ€§éƒ½æ˜¯ç”¨åœ¨iOSå¼€å‘æ—¶Auto Layoutå¸ƒå±€ä¸­çš„ã€‚</p><a id="more"></a><h3 id="Content-Hugging-Priorities"><a href="#Content-Hugging-Priorities" class="headerlink" title="Content Hugging Priorities"></a>Content Hugging Priorities</h3><p><strong>Content Hugging Prioritiesï¼šåœ¨Auto Layoutä¸­ï¼Œå½“å­è§†å›¾ä¸è¶³ä»¥å¡«å……æ»¡ç©ºé—´æ—¶ï¼Œä¼˜å…ˆæ»¡è¶³æ­¤å±æ€§å€¼è¾ƒå¤§çš„å­è§†å›¾çš„å†…å®¹å±•ç¤ºï¼Œè€Œæ‹‰ä¼¸å±æ€§å€¼è¾ƒä½çš„å­è§†å›¾ã€‚</strong></p><p>å‡è®¾æœ‰è¿™æ ·ä¸€ç§æƒ…å†µï¼Œä¸¤ä¸ªæ°´å¹³æ’åˆ—çš„UILabelä¸­åˆ†åˆ«æ˜¾ç¤ºâ€œæ–œæ ç¨‹åºå‘˜â€å’Œâ€œ<a href="http://www.iosprogrammer.techâ€œ,ç»™å®ƒä»¬åŠ ä¸Š5ä¸ªçº¦æŸ,å…¶ä¸­2ã€3ã€5æ˜¯æ°´å¹³çº¦æŸ,å‡è®¾è¿™3ä¸ªæ°´å¹³çº¦æŸçš„å€¼éƒ½æ˜¯10/">www.iosprogrammer.techâ€œï¼Œç»™å®ƒä»¬åŠ ä¸Š5ä¸ªçº¦æŸï¼Œå…¶ä¸­2ã€3ã€5æ˜¯æ°´å¹³çº¦æŸï¼Œå‡è®¾è¿™3ä¸ªæ°´å¹³çº¦æŸçš„å€¼éƒ½æ˜¯10</a>.</p><p>ç°åœ¨ä¸¤ä¸ªUILabelé‡Œé¢æ–‡å­—å†…å®¹æ‰€å å¤§å°åŠ ä¸Š3ä¸ªæ°´å¹³çº¦æŸçš„å€¼ä»ç„¶å°äºï¼ˆ&lt;ï¼‰çˆ¶è§†å›¾çš„å®½åº¦ã€‚æ­¤æ—¶ä¼šå‘ç°storyboardä¸­æœ‰æŠ¥é”™ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œé¡¹ç›®å¹¶çœ‹åˆ°å±•ç¤ºç»“æœã€‚<br><img src="../images/hugging-prority-1.png"><br><img src="../images/hugging-prority-2.png"><br><img src="../images/hugging-prority-3.png"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°â€œ<a href="http://www.iosprogrammer.techâ€œæ‰€åœ¨labelæ‰€å çš„ç©ºé—´å˜å¤§äº†.æ­¤æ—¶è®¾ç½®è¿™ä¸ªlabelçš„content/">www.iosprogrammer.techâ€œæ‰€åœ¨labelæ‰€å çš„ç©ºé—´å˜å¤§äº†ã€‚æ­¤æ—¶è®¾ç½®è¿™ä¸ªlabelçš„Content</a> Hugging Prioritiesä¸º750ã€‚</p><p><img src="../images/hugging-prority-4.png"><br><img src="../images/hugging-prority-5.png"></p><p>â€œ<a href="http://www.iosprogrammer.techâ€œæ‰€åœ¨labelåˆšå¥½æ»¡è¶³å±•ç¤ºå†…å®¹,è€Œâ€œæ–œæ ç¨‹åºå‘˜â€æ‰€åœ¨labelæ‰€å ç©ºé—´å˜å¤§äº†./">www.iosprogrammer.techâ€œæ‰€åœ¨labelåˆšå¥½æ»¡è¶³å±•ç¤ºå†…å®¹ï¼Œè€Œâ€œæ–œæ ç¨‹åºå‘˜â€æ‰€åœ¨labelæ‰€å ç©ºé—´å˜å¤§äº†ã€‚</a></p><p>è¿™ä¹Ÿå°±æ˜¯Content Hugging Prioritiesçš„ä½œç”¨ï¼Œæ§åˆ¶å½“å†…å®¹ä¸è¶³ä»¥å¡«å……æ»¡ç©ºé—´æ—¶ï¼Œä¼˜å…ˆæ»¡è¶³æ­¤å±æ€§å€¼è¾ƒå¤§çš„å­viewçš„å†…å®¹å±•ç¤ºï¼Œè€Œæ‹‰ä¼¸å±æ€§å€¼è¾ƒä½çš„å­viewã€‚</p><h3 id="Content-Compression-Resistance-Priorities"><a href="#Content-Compression-Resistance-Priorities" class="headerlink" title="Content Compression Resistance Priorities"></a>Content Compression Resistance Priorities</h3><p><strong>Content Compression Resistance Prioritiesï¼šåœ¨Auto Layoutä¸­ï¼Œå½“å­è§†å›¾æ‰€éœ€çš„å†…å®¹è¶…å‡ºçˆ¶è§†å›¾çš„ç©ºé—´æ—¶ï¼Œä¼˜å…ˆå±•ç¤ºæ­¤å€¼è¾ƒå¤§çš„å­è§†å›¾ï¼Œè€Œçœç•¥å‹ç¼©æ­¤å€¼è¾ƒå°çš„å­è§†å›¾ã€‚</strong></p><p>å‡è®¾æœ‰è¿™æ ·ä¸€ç§æƒ…å†µï¼Œä¸¤ä¸ªæ°´å¹³æ’åˆ—çš„UILabelä¸­åˆ†åˆ«æ˜¾ç¤ºâ€œæ–œæ ç¨‹åºå‘˜ä¸“æ³¨äºæé«˜ç¼–ç¨‹èƒ½åŠ›â€å’Œâ€œæ–œæ ç¨‹åºå‘˜çš„å®˜æ–¹ç½‘ç«™æ˜¯<a href="http://www.iosprogrammer.techâ€œ,ç»™å®ƒä»¬åŠ ä¸Š5ä¸ªçº¦æŸ,å…¶ä¸­2ã€3ã€5æ˜¯æ°´å¹³çº¦æŸ,å‡è®¾è¿™3ä¸ªæ°´å¹³çº¦æŸçš„å€¼éƒ½æ˜¯10/">www.iosprogrammer.techâ€œï¼Œç»™å®ƒä»¬åŠ ä¸Š5ä¸ªçº¦æŸï¼Œå…¶ä¸­2ã€3ã€5æ˜¯æ°´å¹³çº¦æŸï¼Œå‡è®¾è¿™3ä¸ªæ°´å¹³çº¦æŸçš„å€¼éƒ½æ˜¯10</a>.</p><p>ç°åœ¨ä¸¤ä¸ªUILabelé‡Œé¢æ–‡å­—å†…å®¹æ‰€å å¤§å°è¶…è¿‡äº†çˆ¶è§†å›¾çš„å®½åº¦ã€‚æ­¤æ—¶ä¼šå‘ç°storyboardä¸­æœ‰æŠ¥é”™ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œé¡¹ç›®å¹¶çœ‹åˆ°å±•ç¤ºç»“æœã€‚<br><img src="../images/hugging-prority-6.png"><br><img src="../images/hugging-prority-7.png"><br><img src="../images/hugging-prority-8.png"></p><p>ç¬¬ä¸€ä¸ªLabelè¢«å‹ç¼©äº†ï¼Œé‡Œé¢çš„æ–‡å­—è¢«çœç•¥äº†ï¼›ç¬¬äºŒä¸ªlabelæ­£å¸¸å±•ç¤ºäº†å‡ºæ¥ã€‚æ­¤æ—¶æˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªlabelçš„Content Compression Resistance Prioritiesè®¾ç½®åˆ°å¤§äºç¬¬äºŒä¸ªlabelã€‚</p><p><img src="../images/hugging-prority-9.png"><br><img src="../images/hugging-prority-10.png"></p><p>å¯ä»¥çœ‹åˆ°ç¬¬äºŒä¸ªlabelè¢«å‹ç¼©äº†ï¼Œç¬¬ä¸€ä¸ªlabelæ­£å¸¸å±•ç¤ºäº†å‡ºæ¥ã€‚</p><p><strong>Content Compression Resistance Prioritiesï¼šåœ¨Auto Layoutä¸­ï¼Œå½“å­è§†å›¾æ‰€éœ€çš„å†…å®¹è¶…å‡ºçˆ¶è§†å›¾çš„ç©ºé—´æ—¶ï¼Œä¼˜å…ˆå±•ç¤ºæ­¤å€¼è¾ƒå¤§çš„å­è§†å›¾ï¼Œè€Œçœç•¥å‹ç¼©æ­¤å€¼è¾ƒå°çš„å­è§†å›¾ã€‚</strong></p><p><a href="https://medium.com/@dineshk1389/content-hugging-and-compression-resistance-in-ios-35a0e8f19118">å‚è€ƒæ–‡ç« </a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UIStackViewçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ï¼ˆæœ€æ–°æœ€å…¨ã€é…è§†é¢‘æ•™ç¨‹ï¼‰</title>
      <link href="UIStackView-Advanced-Knowledge/"/>
      <url>UIStackView-Advanced-Knowledge/</url>
      
        <content type="html"><![CDATA[<p>UIStackViewåœ¨iOS9ä¹‹åå¼€å§‹ä½¿ç”¨ï¼Œç»§æ‰¿è‡ªUIViewï¼Œç”¨æ¥ç®¡ç†åœ¨å®ƒå†…éƒ¨çš„viewsï¼Œ<text style="color:#1E90FF">ä½†æ˜¯å¹¶ä¸ä¼šè¢«æ¸²æŸ“å‡ºæ¥</text>ï¼Œç»è¿‡æˆ‘åœ¨å·¥ä½œä¸­çš„ä½¿ç”¨æ€»ç»“ï¼Œå®ƒç¡®å®å¯ä»¥å¾ˆå¤§ç¨‹åº¦æé«˜ç•Œé¢å¼€å‘æ•ˆç‡ï¼Œæ¯ä¸€ä¸ªiOSå¼€å‘è€…éƒ½åº”è¯¥ç†Ÿç»ƒæŒæ¡UIStackViewçš„ä½¿ç”¨ã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><p>æœ¬æ–‡å°†åˆ†ä¸ºåŸºç¡€å’Œè¿›é˜¶ä¸¤éƒ¨åˆ†æ¥è®²è§£UIStackViewï¼Œå› æ­¤å¦‚æœå·²ç»ä¸€å®šç¨‹åº¦çš„ä½¿ç”¨è¿‡UIStackViewï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥è·³è½¬åˆ°è¿›é˜¶éƒ¨åˆ†ã€‚</p><h3 id="UIStackViewåŸºç¡€å…¥é—¨çŸ¥è¯†"><a href="#UIStackViewåŸºç¡€å…¥é—¨çŸ¥è¯†" class="headerlink" title="UIStackViewåŸºç¡€å…¥é—¨çŸ¥è¯†"></a>UIStackViewåŸºç¡€å…¥é—¨çŸ¥è¯†</h3><p>UIStackviewçš„ä¸»è¦ä½œç”¨æ˜¯ç®¡ç†<code>arrangedSubviews</code>æ•°ç»„ä¸­çš„viewçš„å¸ƒå±€ï¼Œç®¡ç†æ•°ç»„çš„æœ‰ä¸‰ä¸ªæ–¹æ³•<br>    - addArrangedSubview:<br>    - removeArrangedSubview:<br>    - insertArrangedSubview:atIndex:</p><p>UIStackViewä¸­arrangedSubviewçš„å¸ƒå±€ä¸»è¦æ˜¯ä½¿ç”¨<code>UILayoutConstraintAxis</code> <code>UIStackViewDistribution</code> <code>UIStackViewAlignment</code> <code>spacing</code> å‡ ä¸ªå±æ€§ã€‚</p><ol><li><p><code>UILayoutConstraintAxis</code> - ç¡®å®šarrangedSubviewsçš„æ’åˆ—æ–¹å‘ï¼Œåˆ†ä¸ºHorizontalå’ŒVertical</p></li><li><p><code>UIStackViewDistribution</code> - arrangedSubviews<strong>åœ¨æ’åˆ—æ–¹å‘</strong>çš„å¸ƒå±€æ–¹å¼</p><ol><li>UIStackViewDistributionFill æŠŠUIStackViewçš„ç©ºé—´å¡«å……æ»¡ï¼Œå¯¹äºæœ‰intrinsic content sizeçš„UIViewï¼ˆUILabelã€UIButtonã€UIImageViewã€UIControlï¼‰éœ€è¦é€šè¿‡è®¾ç½®Size Inspectorä¸­çš„<a href="https://www.iosprogrammer.tech/What-is-Content-Hugging-Priorities-Content-Compression-Resistance-Priorities/">Content Hugging Property</a>æ¥å†³å®šä¼˜å…ˆæ»¡è¶³å“ªä¸ªviewçš„contrinsicSizeï¼Œå¦‚æœpropertyç›¸åŒåˆ™ä¼šé»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªã€‚</li><li>UIStackViewDistributionFillEqually arrangedSubviewså¹³åˆ†UIStackView æ’åˆ—æ–¹å‘ä¸Šé™¤äº†spacingçš„ç©ºé—´</li><li>UIStackViewDistributionFillProportionally æŒ‰æ¯”ä¾‹åˆ†é…æ¯ä¸ªarrangedSubviewæ‰€å å¤§å°ï¼ŒæŒ‰ç…§æ¯ä¸ªarrangedSubviewçš„intrinsic content sizeçš„æ¯”ä¾‹</li><li>UIStackViewDistributionEqualSpacing å½“arrangedSubviewsä¸èƒ½å¡«æ»¡æ—¶ï¼Œç©ºç™½åŒºåŸŸä¼šå¹³å‡åˆ†é…ï¼Œè€Œä¸ä¼šè‡ªåŠ¨æ‹‰ä¼¸Hugging Propertyè¾ƒä½çš„viewï¼›å¦‚æœarrangedSubviewsæ”¾ä¸å¼€æ—¶ï¼Œä¼šä¼˜å…ˆä¿è¯<a href="https://www.iosprogrammer.tech/What-is-Content-Hugging-Priorities-Content-Compression-Resistance-Priorities/">compression resistance priority</a>è¾ƒé«˜çš„viewå†…å®¹èƒ½å¤Ÿå®Œå…¨å±•ç¤ºï¼Œpriorityç›¸åŒæ—¶ä¼šé»˜è®¤ä¿è¯ç¬¬ä¸€ä¸ªviewã€‚</li><li>UIStackViewDistributionEqualCentering viewä¸­å¿ƒä¹‹é—´çš„spacingç›¸ç­‰ã€‚å½“spacingå€¼è¿‡å¤§ï¼Œæ— æ³•æ»¡è¶³æ‰€æœ‰viewéƒ½èƒ½æ­£å¸¸å±•ç¤ºï¼Œä¼šä¼˜å…ˆä¿è¯compression resistance priorityè¾ƒé«˜çš„viewå†…å®¹èƒ½å¤Ÿå®Œå…¨å±•ç¤ºï¼Œpriorityç›¸åŒæ—¶ä¼šé»˜è®¤ä¿è¯ç¬¬ä¸€ä¸ªviewã€‚</li></ol></li><li><p>UIStackViewAlignment - arrangedSubviews<strong>å‚ç›´äºæ’åˆ—æ–¹å‘</strong>çš„å¸ƒå±€æ–¹å¼</p><ol><li>UIStackViewAlignmentFill å®Œå…¨å¡«å……</li><li>UIStackViewAlignmentLeading/UIStackViewAlignmentTop é ä¸Š/å³</li><li>UIStackViewAlignmentTrailing/UIStackViewAlignmentBottom é ä¸‹/å·¦</li><li>UIStackViewAlignmentFirstBaseline/UIStackViewAlignmentLastBaseline æ–‡å­—åŸºçº¿ ä¸‹/ä¸Š</li></ol></li><li><p>spacing - arrangedSubviewçš„é—´è·ã€‚å¯¹äº<code>UIStackViewDistributionFillxxx</code>å°±æ˜¯å‡†ç¡®çš„è·ç¦»ï¼Œå¯¹äºUIStackViewDistributionEqualSpacingã€UIStackViewDistributionEqualCentering æ˜¯æœ€å°è·ç¦»ï¼Œ<strong>ä½¿ç”¨è´Ÿæ•°viewä¼šè¦†ç›–</strong></p></li></ol><p>æŒæ¡äº†ä¸Šé¢çš„åŸºç¡€çŸ¥è¯†ååŸºæœ¬å°±å¯ä»¥ä¸Šæ‰‹ä½¿ç”¨UIStackViewäº†ã€‚</p><h3 id="UIStackViewè¿›é˜¶çŸ¥è¯†"><a href="#UIStackViewè¿›é˜¶çŸ¥è¯†" class="headerlink" title="UIStackViewè¿›é˜¶çŸ¥è¯†"></a>UIStackViewè¿›é˜¶çŸ¥è¯†</h3><p>Q1. åœ¨UIStackViewä¸­å¯ä»¥å¯¹å­viewä½¿ç”¨çº¦æŸå—ï¼Ÿ<br>A1. UIStackViewæ˜¯åŸºäºçº¦æŸæ¥ç¡®å®šé‡Œé¢arrangedSubviewçš„å¸ƒå±€çš„ï¼Œæ‰‹åŠ¨ç»™æŸä¸€ä¸ªarrangedSubviewæŒ‡å®šçº¦æŸæ—¶ï¼Œä¼šä¼˜å…ˆæ»¡è¶³æŒ‡å®šçš„çº¦æŸï¼Œä¸è¿‡å› ä¸ºç³»ç»Ÿä¹Ÿä¼šæ ¹æ®æˆ‘ä»¬è®¾ç½®çš„å±æ€§æ·»åŠ çº¦æŸï¼Œæ‰€ä»¥è¦å½“å¿ƒä¼šå‡ºç°çº¦æŸå†²çªã€‚</p><p>Q2. UIStackView.arrangedViews å’Œ UIStackView.subViewsçš„å…³ç³»ï¼Ÿ<br>A2. arragedViewsæ˜¯subViewsçš„å­é›† </p><ol><li>UIStackView addSubview å¹¶ä¸ä¼šæ·»åŠ åˆ°arrangedSubviewsä¸­ï¼›</li><li>å½“å‘arrangedSubviewsä¸­æ·»åŠ viewæ—¶ä¼šè‡ªåŠ¨æ·»åŠ åˆ°subviewsä¸­ </li><li>æŠŠä¸€ä¸ªåªåœ¨subviewè€Œä¸åœ¨arrangedviewä¸­çš„viewç§»é™¤æ—¶ä¹Ÿä¸ä¼šå½±å“åˆ°arrangedview </li><li>ä¸€ä¸ªviewæ—¢åœ¨subviewsä¸­åˆåœ¨arrangedviewsä¸­æ—¶ï¼Œå½“æŠŠå®ƒä»subviewsä¸­ç§»é™¤ï¼Œä¹Ÿä¼šè‡ªåŠ¨ä»arragedviewsä¸­ç§»é™¤ï¼Œåä¹‹åˆ™ä¸ç„¶</li></ol><p>Q3. UIStackViewè®¾ç½®äº†èƒŒæ™¯è‰²ä¸ºä»€ä¹ˆæ˜¾ç¤ºä¸å‡ºæ¥ï¼Ÿ<br>A3. UIStackViewè™½ç„¶æ˜¯UIViewçš„å­ç±»ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ä¼šè¢«æ¸²æŸ“ï¼Œæ‰€ä»¥è®¾ç½®èƒŒæ™¯è‰²å¹¶æ²¡æœ‰ä»€ä¹ˆæ˜¾ç¤ºï¼Œä½†æ˜¯è®¾ç½®åœ†è§’æ˜¯æœ‰ä½œç”¨çš„ã€‚</p><p>Q4. UIStackViewæ€ä¹ˆè®¾ç½®æŸä¸€ä¸ªå­viewå’Œåé¢viewçš„è·ç¦»ï¼Ÿ<br>A4. åœ¨iOS11ä¹‹åUIStackViewæ–°åŠ äº†æ–¹æ³•å¯ä»¥è®¾ç½®<code>setCustomSpacing:afterView</code></p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><iframe src="//player.bilibili.com/player.html?bvid=BV1wz4y1674t&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="300px"> </iframe>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSå¼€å‘xibå’Œä»£ç è®¾ç½®é¢œè‰²ä¸åŒçš„è§£å†³æ–¹æ³•åŠå…¶åŸç†ï¼ˆæ·±åº¦å¥½æ–‡ï¼‰</title>
      <link href="xib-color-different-with-hard-code/"/>
      <url>xib-color-different-with-hard-code/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸€æ˜¯è§£å†³xibè®¾ç½®é¢œè‰²æœ‰åå·®çš„é—®é¢˜ï¼Œå…¶äºŒæ˜¯èŠä¸€ä¸‹é¢œè‰²çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚</p><a id="more"></a><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><h2 id="xibå’Œä»£ç è®¾ç½®é¢œè‰²æœ‰åå·®çš„åŸå› "><a href="#xibå’Œä»£ç è®¾ç½®é¢œè‰²æœ‰åå·®çš„åŸå› " class="headerlink" title="xibå’Œä»£ç è®¾ç½®é¢œè‰²æœ‰åå·®çš„åŸå› "></a>xibå’Œä»£ç è®¾ç½®é¢œè‰²æœ‰åå·®çš„åŸå› </h2><p>åœ¨å¼€å‘iOS appçš„è¿‡ç¨‹ä¸­æˆ‘ä»¬éƒ½æ˜¯æŒ‰ç…§è®¾è®¡åŒå­¦ç»™å‡ºçš„æ ‡æ³¨æ¥åšçš„ï¼Œè€ŒUIåŒå­¦åœ¨ä½œå›¾æ—¶ä½¿ç”¨åˆ°çš„å·¥å…·å°±ä¼šæœ‰â€œ<strong>é¢œè‰²é…ç½®æ–‡ä»¶ï¼ˆColor Profileï¼‰</strong>â€ã€‚ï¼ˆä¸‹é¢æœ‰é¢œè‰²é…ç½®æ–‡ä»¶çš„è¯´æ˜ï¼‰</p><p><img src="../images/ps-color-profile.png" alt="PSä¸­çš„é¢œè‰²é…ç½®æ–‡ä»¶"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œpsé»˜è®¤çš„é¢œè‰²é…ç½®æ–‡ä»¶æ˜¯sRGBï¼Œå› æ­¤è®¾è®¡ç»™æˆ‘ä»¬çš„å›¾éƒ½æ˜¯ä»¥sRGBä¸ºå‡†çš„ã€‚</p><p>ä½†æ˜¯åœ¨Xcodeçš„ibç›¸å…³æ–‡ä»¶ä¸­è®¾ç½®é¢œè‰²æ—¶ï¼Œé»˜è®¤çš„é¢œè‰²é…ç½®æ–‡ä»¶æ˜¯Generic RGBçš„ã€‚</p><p><img src="../images/xcode-xib-colors.png" alt="Xcode-colors"></p><p>å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥æŒ‰ç…§sRGBæ ‡çš„è‰²å€¼åœ¨Generic RGBçš„é…ç½®ä¸‹è¿›è¡Œè®¾ç½®å°±ä¼šå‡ºç°è‰²å·®äº†ã€‚</p><p>é€šè¿‡ä¸‹é¢çš„GIFå¯ä»¥æ›´ç›´è§‚çš„çœ‹åˆ°è¿™ç§å·®å¼‚</p><p><img src="../images/record.gif"></p><p>è€Œä»£ç è®¾ç½®é¢œè‰²æ—¶é»˜è®¤æ˜¯é‡‡ç”¨çš„å’Œphotoshopä¸€æ ·çš„sRGBï¼Œä¹Ÿæ˜¯å’Œxibçš„Generic RGBä¸ç›¸åŒçš„ï¼Œæ‰€ä»¥ä»£ç è®¾ç½®çš„é¢œè‰²å’ŒUIåŒå­¦æä¾›çš„æ˜¯ä¸€æ ·çš„ï¼Œè€Œxibä¸­æ˜¯å’Œä»–ä»¬ä¸¤ä¸ªä¸ä¸€æ ·çš„ã€‚</p><h2 id="xibè®¾ç½®é¢œè‰²å’Œä»£ç æœ‰å·®å¼‚çš„é—®é¢˜è§£å†³æ–¹æ¡ˆ"><a href="#xibè®¾ç½®é¢œè‰²å’Œä»£ç æœ‰å·®å¼‚çš„é—®é¢˜è§£å†³æ–¹æ¡ˆ" class="headerlink" title="xibè®¾ç½®é¢œè‰²å’Œä»£ç æœ‰å·®å¼‚çš„é—®é¢˜è§£å†³æ–¹æ¡ˆ"></a>xibè®¾ç½®é¢œè‰²å’Œä»£ç æœ‰å·®å¼‚çš„é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2><p>è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æŠŠsRGBçš„è‰²å€¼è½¬åŒ–æˆGeneric RGBä¹‹åå†è¿›è¡Œè®¾ç½®ï¼Œå¦ä¸€ç§æ˜¯æŠŠé…ç½®æ”¹æˆsRGBçš„å†è¿›è¡Œè®¾ç½®ã€‚</p><p>è¿™é‡Œç”¨åˆ°çš„ä¸åŒé¢œè‰²é…ç½®ä¹‹é—´è¿›è¡Œè½¬æ¢çš„å·¥å…·å¯ä»¥ç”¨macè‡ªå¸¦çš„ColorSync Utility</p><center class="half" style="display:flex;margin-left:10%">    <img src="../images/colorsyncutilityicon.png" width="200"/><img src="../images/colorsyncinterface.png" width="300"/></center><h2 id="xibå’Œä»£ç è®¾ç½®çš„é¢œè‰²æœ‰å·®å¼‚çš„åŸç†åˆ†æ"><a href="#xibå’Œä»£ç è®¾ç½®çš„é¢œè‰²æœ‰å·®å¼‚çš„åŸç†åˆ†æ" class="headerlink" title="xibå’Œä»£ç è®¾ç½®çš„é¢œè‰²æœ‰å·®å¼‚çš„åŸç†åˆ†æ"></a>xibå’Œä»£ç è®¾ç½®çš„é¢œè‰²æœ‰å·®å¼‚çš„åŸç†åˆ†æ</h2><p>ä¸Šé¢è¯´åˆ°äº†xibé»˜è®¤çš„é¢œè‰²é…ç½®å’Œpsã€ä»£ç éƒ½æ˜¯ä¸åŒçš„ï¼Œè¯´åˆ°é¢œè‰²é…ç½®ï¼ˆColor Profileï¼‰å°±ä¸å¾—ä¸è¯´é¢œè‰²æ¨¡å‹ï¼ˆColor Modelï¼‰å’Œé¢œè‰²ç©ºé—´ï¼ˆColor Spaceï¼‰ã€‚</p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œè®¡ç®—æœºã€æ‘„åƒæœºã€æ‰“å°æœºç­‰æ•°å­—è®¾å¤‡ä¸­åªèƒ½è®¤è¯†0å’Œ1ï¼ˆä¸ç„¶å®ƒä»¬ä¹Ÿä¸ä¼šå«æ•°å­—è®¾å¤‡äº†ğŸ¶ï¼‰ï¼Œå› æ­¤ä¸ºäº†æŠŠè‡ªç„¶ç•Œä¸­çš„äº”é¢œå…­è‰²åœ¨æ•°å­—è®¾å¤‡ä¸­å±•ç¤ºå‡ºæ¥ï¼Œ<strong>é¢œè‰²è½¬æ¢æˆæ•°å­—çš„ç®—æ³•ï¼ˆå…¬å¼ï¼‰â€”â€” é¢œè‰²æ¨¡å‹</strong> å°±å‡ºç°äº†ã€‚</p><p>ç°åœ¨è¢«å¹¿æ³›ä½¿ç”¨çš„é¢œè‰²æ¨¡å‹æœ‰RGBã€CMYKã€CIELABç­‰ï¼Œå…¶ä¸­RGBä¸»è¦ç”¨åœ¨æ‘„åƒæœºã€æ˜¾ç¤ºå™¨ç­‰é¢†åŸŸï¼ŒCMYKä¸»è¦ç”¨åœ¨æ‰“å°æœºé¢†åŸŸï¼Œå…·ä½“å†…å®¹å¯ä»¥æŸ¥çœ‹<a href="https://www.dpbestflow.org/color/color-space-and-color-profiles">è¿™ç¯‡æ–‡ç« </a></p><p>æœ‰äº†ç®—æ³•ï¼Œå°±è¦æœ‰<strong>é¢œè‰²æ¨¡å‹å…·ä½“çš„ç®—æ³•å®ç°â€”â€”é¢œè‰²ç©ºé—´</strong>ã€‚ä¹‹æ‰€ä»¥å«ç©ºé—´æ˜¯å› ä¸ºæ¯ä¸€ä¸ªå…·ä½“çš„é¢œè‰²ç©ºé—´éƒ½æœ‰ä¸€ä¸ªèŒƒå›´</p><p><img src="../image/../images/v2-374053ce809551b3eeef09046f48b074_1440w.jpg"></p><p>æ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé¢œè‰²ç©ºé—´éƒ½æ˜¯æœ‰ä¸åŒçš„èŒƒå›´çš„ï¼Œè€Œä¸åŒèŒƒå›´çš„é¢œè‰²ç©ºé—´è¿›è¡Œè½¬æ¢çš„æ—¶å€™å°±ä¼šæœ‰æŸå¤±ï¼Œä¹Ÿå°±ä¼šé€ æˆ<a href="https://zhuanlan.zhihu.com/p/72530732">è‰²å·®</a>ã€‚</p><p><img src="../images/v2-53ebd97b57e169f8b395766d580a1ea9_1440w.jpg"></p><p>é¢œè‰²æ¨¡å‹å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ¦‚å¿µã€ç†è®ºï¼Œé¢œè‰²ç©ºé—´æ˜¯å¯¹é¢œè‰²æ¨¡å‹çš„ä¸€æ¬¡å…·è±¡æè¿°ï¼Œä½†æ˜¯å®ƒè¿˜ä¸èƒ½è¢«è®¡ç®—æœºæ‰€ç†è§£ã€‚<strong>é¢œè‰²é…ç½®æ­£æ˜¯èƒ½å¤Ÿç›´æ¥è¢«æ•°å­—è®¾å¤‡æ‹¿æ¥ç”¨çš„å…·ä½“æ–‡ä»¶</strong>ã€‚</p><p>åœ¨Macç”µè„‘çš„ColorSync Utilityåº”ç”¨ä¸­å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™äº›é¢œè‰²é…ç½®</p><p><img src="../images/colorsyncprofiles.png"></p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div><p>è‡³æ­¤ï¼Œæˆ‘ä»¬æŠŠxibå’Œä»£ç è®¾ç½®é¢œè‰²æœ‰åå·®çš„ç°è±¡å½»åº•è§£å†³äº†ï¼Œæ€»ç»“ä¸€å¥è¯å°±æ˜¯ï¼š</p><blockquote><p>ä¸åŒçš„é¢œè‰²é…ç½®ä¹‹é—´è½¬æ¢æ—¶ä¼šé€ æˆè‰²å·®ï¼Œè€Œä»£ç å’Œxibè¿›è¡Œé¢œè‰²è®¾ç½®æ—¶ä½¿ç”¨äº†ä¸åŒçš„é¢œè‰²é…ç½®æ–‡ä»¶ï¼Œæ‰æœ€ç»ˆå¯¼è‡´äº†åŒæ ·çš„è‰²å€¼çš„æœ€ç»ˆè¡¨ç°ä¸åŒã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OCç¼–ç¨‹åŸºç¡€</title>
      <link href="Programming-With-ObjC/"/>
      <url>Programming-With-ObjC/</url>
      
        <content type="html"><![CDATA[<p>OCç¼–ç¨‹åŸºç¡€</p><a id="more"></a><ul><li><code>+ (id)alloc</code>æ–¹æ³•è¿”å›ç±»å‹æ˜¯<code>id</code>ã€‚è¿™æ˜¯Objective-Cä¸­çš„ä¸€ä¸ªç‰¹æ®Šçš„å…³é”®å­—ï¼Œæ„å‘³ç€â€œæŸç§å¯¹è±¡â€ã€‚å®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªå¯¹è±¡çš„æŒ‡é’ˆï¼ˆNSObject *ï¼‰ï¼Œä½†å®ƒçš„ç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒä¸ä½¿ç”¨æ˜Ÿå·ã€‚</li><li><code>alloc</code>æ–¹æ³•çš„å¦ä¸€ä¸ªé‡è¦ä»»åŠ¡æ˜¯é€šè¿‡æŠŠå¯¹è±¡å±æ€§è®¾ç½®ä¸º0æ¥æ¸…ç†ä¸ºå¯¹è±¡å±æ€§ç”³è¯·çš„å†…å­˜ã€‚è¿™é¿å…äº†ä»¥å‰å­˜å‚¨çš„åŒ…å«åƒåœ¾å†…å­˜çš„å¸¸è§é—®é¢˜ï¼Œä½†ä¸è¶³ä»¥å®Œå…¨åˆå§‹åŒ–å¯¹è±¡</li><li><code>- (id)init</code>æ–¹æ³•ä¹Ÿè¿”å›<code>id</code>ã€‚è¯¥æ–¹æ³•è¢«ç±»ç”¨æ¥ç¡®ä¿å®ƒçš„å±æ€§åœ¨åˆ›å»ºæ—¶å…·æœ‰åˆé€‚çš„åˆå§‹å€¼ã€‚</li><li>åˆ›å»ºå¯¹è±¡æ—¶ä¸€å®šè¦æŠŠ<code>alloc</code>åµŒå¥—åœ¨<code>init</code>ä¸­ï¼Œå°±åƒ<code>NSObject *newObject = [[NSObject alloc] init];</code>ã€‚å› ä¸º<code>init</code>çš„è¿”å›å¯¹è±¡å¯èƒ½å’Œ<code>alloc</code>è¿”å›çš„ä¸ç›¸åŒ</li><li><code>==</code>æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªä¸åŒçš„æŒ‡é’ˆæ˜¯å¦æŒ‡å‘ç›¸åŒçš„å¯¹è±¡</li><li><code>isEqual:</code>æ˜¯æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦è¡¨ç¤ºç›¸åŒçš„æ•°æ®</li><li>å£°æ˜æ ‡é‡çš„æ—¶å€™æŒ‡æ˜ä¸€ä¸ªåˆå§‹å€¼ï¼Œ<code>int number = 10;</code>ï¼Œå¦åˆ™æ ‡é‡çš„åˆå§‹å€¼ä¼šåŒ…å«ä¹‹å‰æ ˆå†…çš„åƒåœ¾å†…å®¹</li><li>å¯¹è±¡æŒ‡é’ˆä¸éœ€è¦è®¾ç½®åˆå§‹å€¼ï¼Œå› ä¸ºä¼šé»˜è®¤è®¾ç½®ä¸ºnilã€‚</li><li>nilæ˜¯å®‰å…¨çš„ï¼Œç»™nilå‘æ¶ˆæ¯ä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿã€‚</li><li>å®ä¾‹å˜é‡çš„å†…å­˜åœ¨å¯¹è±¡é¦–æ¬¡åˆ›å»ºæ—¶åˆ†é…ï¼Œå¹¶ä¸”å½“å¯¹è±¡è§£é™¤åˆ†é…æ—¶é‡Šæ”¾ã€‚</li><li><code>@synthesize firstName;</code>çš„å®ä¾‹å˜é‡åç§°æ˜¯<code>firstName</code>è€Œä¸æ˜¯<code>_firstName</code>ã€‚</li><li>ä½ åº”è¯¥æ€»æ˜¯åœ¨initialization methodä¸­ç›´æ¥è®¿é—®instance variableï¼Œå› ä¸ºåœ¨è®¾ç½®å±æ€§æ—¶ï¼Œå¯¹è±¡çš„å…¶ä»–éƒ¨åˆ†å¯èƒ½è¿˜æ²¡æœ‰å®Œå…¨åˆå§‹åŒ–ã€‚å³æ—¶ä½ ç¡®å®šæ²¡æœ‰æä¾›è‡ªå®šä¹‰çš„è®¿é—®å™¨æ–¹æ³•ï¼Œå¹¶ä¸”ä½ è‡ªå·±çš„ç±»ä¸­æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼Œä½†æ˜¯ä½ æ²¡åŠæ³•ä¿è¯å°†æ¥çš„å­ç±»ä¸ä¼šé‡å†™è¯¥æ–¹æ³•ã€‚</li><li>å½“ä½ è¦å­ç±»åŒ–ä¸€ä¸ªå¸¦æœ‰å¤šä¸ª<code>init</code>æ–¹æ³•çš„ç±»æ—¶ï¼Œè¦ä¹ˆé€šè¿‡ç»§æ‰¿çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨æ¥æ‰§è¡Œè‡ªå·±çš„åˆå§‹åŒ–ï¼Œè¦ä¹ˆåŠ å…¥è‡ªå·±çš„å…¶ä»–åˆå§‹åŒ–å™¨ã€‚æ— è®ºå“ªç§ï¼Œä½ éƒ½åº”è¯¥åœ¨åšè‡ªå·±çš„åˆå§‹åŒ–å‰ï¼Œè°ƒç”¨çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œæ¥ä»£æ›¿<code>[super init]</code>ã€‚</li><li>å¦‚æœä¸ºä¸€ä¸ªreadwriteçš„propertyå®ç°äº†getterå’Œsetterï¼Œæˆ–è€…ä¸ºreadonlyçš„propertyå®ç°äº†getterï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¸ä¼šè‡ªåŠ¨åˆæˆæˆå‘˜å˜é‡ï¼Œå¦‚æœéœ€è¦æˆå‘˜å˜é‡ï¼Œå¯ä»¥é€šè¿‡<code>@synthesize property = _property</code>æ¥æ‰‹åŠ¨è·å–ã€‚</li><li>propertyé»˜è®¤æ˜¯atomicã€‚</li><li>atomicçš„å±æ€§è¦ä¹ˆåŒæ—¶è‡ªå®šä¹‰setterå’Œgetterï¼Œè¦ä¹ˆéƒ½ç”±ç³»ç»Ÿåˆæˆï¼Œå¦‚æœåªè‡ªå®šä¹‰ä¸€ä¸ªä¼šæŠ¥ç¼–è¯‘å™¨è­¦å‘Šã€‚</li><li><strong>Property atomicity is not synonymous with an objectâ€™s thread safety.</strong></li><li>__unsafe_unretainedå’Œweakç±»ä¼¼éƒ½ä¸ä¼šä¿æŒå¯¹è±¡å­˜æ´»ï¼Œä½†æ˜¯__unsafe_unretainedåœ¨ç›®æ ‡å¯¹è±¡é‡Šæ”¾åä¸ä¼šæŠŠå®ƒè®¾ç½®æˆnilã€‚è¿™å°±æ„å‘³ç€è¢«å·²é‡Šæ”¾å¯¹è±¡å ç”¨çš„é‚£å—å†…å­˜ç°åœ¨æ˜¯ä¸€ä¸ªæ‚¬æŒ‚æŒ‡é’ˆï¼Œå¦‚æœç»™è¿™ä¸ªæ‚¬æŒ‚æŒ‡é’ˆå‘é€æ¶ˆæ¯ä¼šå´©æºƒã€‚</li><li>class extensionä¸­å£°æ˜çš„ä¸€ä¸ªreadwriteçš„å±æ€§ï¼Œä¼šåœ¨è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ä¸­ç”Ÿæˆsetteræ–¹æ³•ï¼Œè™½ç„¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ç‚¹è¯­æ³•æˆ–è°ƒç”¨setxxx:ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨<code>performSelect...</code>æˆ–<code>objc_msgSend...</code>æ¥è°ƒç”¨ã€‚å³ä½¿è¿™ä¸ªå±æ€§åœ¨ç±»çš„publicæ¥å£ä¸­æ˜¯readonlyçš„ã€‚</li><li>ç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨åˆæˆé‡‡ç”¨çš„åè®®ä¸­å£°æ˜çš„å±æ€§ã€‚</li><li>å¦‚æœæ˜¯è·¨apiä¼ é€’å€¼ï¼Œæ¯”å¦‚æ–¹æ³•æˆ–å‡½æ•°ä¸­çš„å‚æ•°ï¼Œåˆ™æœ€å¥½æ˜¯ä½¿ç”¨è·¨å¹³å°çš„ç±»å‹ï¼ˆNSInteger/CGFloatâ€¦)ï¼›å¯¹äºå±€éƒ¨å˜é‡ï¼Œä¾‹å¦‚å¾ªç¯ä¸­çš„è®¡æ•°å™¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŸºæœ¬Cç±»å‹ï¼ˆint/floatâ€¦ï¼‰</li><li>collectionå¹¶ä¸æ˜¯ä»¥æŸç§æ–¹å¼ç»´æŠ¤æ¯ä¸ªå¯¹è±¡çš„å•ç‹¬å‰¯æœ¬ï¼Œè€Œæ˜¯ä½¿ç”¨å¼ºå¼•ç”¨æ¥è·Ÿè¸ªå…¶å†…å®¹ã€‚è¿™æ„å‘³ç€ï¼Œ<strong>åªè¦colletionæ²¡æœ‰è¢«é”€æ¯ï¼Œå®ƒé‡Œé¢çš„ä»»ä½•å¯¹è±¡éƒ½å°†ä¿æŒæ´»åŠ¨çŠ¶æ€</strong></li><li>ä½¿ç”¨<code>arrayWithObjects:</code>å’Œ<code>initWithObjects:</code>åˆ›å»ºæ•°ç»„æ—¶ï¼Œæœ€åè¦å¸¦ä¸Š<code>nil</code>ã€‚</li><li>ä½¿ç”¨å­—é¢é‡è¯­æ³•åˆ›å»ºæ•°ç»„æ—¶ï¼Œä¸èƒ½åŒ…å«<code>nil</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>NSNull</code>æ¥ä»£æ›¿<code>nil</code>ã€‚</li><li><code>NSArray</code>æ˜¯æœ‰åºçš„collectionï¼Œä¼šåŒ…å«é‡å¤å…ƒç´ ï¼›<code>NSSet</code>æ˜¯æ— åºçš„collectionï¼Œä¸åŒ…å«é‡å¤å…ƒç´ ã€‚</li><li>ä¸è¦åœ¨forå¾ªç¯é‡Œä¿®æ”¹collection</li><li>blockä¼šæ•è·ä¸Šä¸‹æ–‡</li><li>åœ¨blockæ•è·ä¸Šä¸‹æ–‡ä¹‹åå†ä¿®æ”¹ä¸Šä¸‹æ–‡çš„å†…å®¹ä¸ä¼šæ”¹å˜blockæ•è·çš„å€¼ã€‚å¦‚æœè¢«æ•è·çš„å˜é‡ä½¿ç”¨<code>__block</code>ä¿®é¥°ï¼Œåˆ™ä¼šè¢«ä¿®æ”¹ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KVC/KVO æ€»ç»“</title>
      <link href="KVC-KVO/"/>
      <url>KVC-KVO/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡è¿™ç¯‡æ–‡ç« å½»åº•æŒæ¡KVOã€KVOçš„çŸ¥è¯†ç‚¹ã€‚</p><a id="more"></a><h3 id="è®¿é—®å¯¹è±¡å±æ€§"><a href="#è®¿é—®å¯¹è±¡å±æ€§" class="headerlink" title="è®¿é—®å¯¹è±¡å±æ€§"></a>è®¿é—®å¯¹è±¡å±æ€§</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">BankAccount</span>: <span class="title">NSobject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">NSNumber</span> *currentBalance; <span class="comment">// An attribute</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) Person *owner; <span class="comment">// A to-one relation</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">NSArray</span> &lt;Transaction *&gt;*transactions; <span class="comment">// A to-many relation</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p><code>currentBalance</code>/<code>owner</code>/<code>transactions</code>éƒ½æ˜¯<code>BankAccount</code>çš„å±æ€§ã€‚<code>owner</code>å±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå’Œ<code>BankAccount</code>æ„æˆä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œownerå¯¹è±¡ä¸­çš„å±æ€§æ”¹å˜åå¹¶ä¸ä¼šå½±å“åˆ°owneræœ¬èº«ã€‚</p><p>ä¸ºäº†ä¿æŒå°è£…ï¼Œå¯¹è±¡é€šå¸¸ä¸ºå…¶æ¥å£ä¸Šçš„å±æ€§æä¾›è®¿é—®å™¨æ–¹æ³•ï¼ˆaccessor methodsï¼‰ã€‚åœ¨ä½¿ç”¨è®¿é—®å™¨æ–¹æ³•æ—¶å¿…é¡»åœ¨ç¼–è¯‘ä¹‹å‰å°†å±æ€§åç§°å†™å…¥ä»£ç ä¸­ã€‚è®¿é—®å™¨æ–¹æ³•çš„åç§°æˆä¸ºä½¿ç”¨å®ƒçš„ä»£ç çš„é™æ€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼š<br><code>[myAccount setCurrentBalance:@(100.0)];</code><br>è¿™æ ·ç¼ºä¹çµæ´»æ€§ï¼ŒKVCæä¾›äº†ä½¿ç”¨å­—ç¬¦ä¸²æ ‡è¯†ç¬¦è®¿é—®å¯¹è±¡å±æ€§çš„æ›´é€šç”¨çš„æœºåˆ¶ã€‚</p><h4 id="ä½¿ç”¨keyå’Œkey-path-æ ‡è¯†å¯¹è±¡çš„å±æ€§"><a href="#ä½¿ç”¨keyå’Œkey-path-æ ‡è¯†å¯¹è±¡çš„å±æ€§" class="headerlink" title="ä½¿ç”¨keyå’Œkey path æ ‡è¯†å¯¹è±¡çš„å±æ€§"></a>ä½¿ç”¨keyå’Œkey path æ ‡è¯†å¯¹è±¡çš„å±æ€§</h4><p>key: æ ‡è¯†ç‰¹å®šå±æ€§çš„å­—ç¬¦ä¸²ã€‚é€šå¸¸è¡¨ç¤ºå±æ€§çš„keyæ˜¯ä»£ç ä¸­æ˜¾ç¤ºçš„å±æ€§æœ¬èº«çš„åç§°ã€‚<br>keyå¿…é¡»ä½¿ç”¨ASCIIç¼–ç ï¼Œå¯èƒ½ä¸åŒ…å«ç©ºæ ¼ï¼Œå¹¶ä¸”é€šå¸¸æ˜¯ä»¥å°å†™å­—æ¯å¼€å¤´ï¼ˆURLé™¤å¤–ï¼‰ã€‚<br>ä¸Šé¢çš„èµ‹å€¼è¿‡ç¨‹ä½¿ç”¨KVCè¡¨ç¤º:<br><code>[myAccount setValue:@(100.0) forKey:@&quot;currentBalance&quot;];</code></p><p>key path: ç”¨æ¥æŒ‡å®šè¦éå†çš„å¯¹è±¡å±æ€§åºåˆ—çš„ä¸€ä¸²ä½¿ç”¨â€œ.â€åˆ†éš”çš„keyã€‚åºåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªé”®çš„å±æ€§æ˜¯ç›¸å¯¹äºæ¥å—è€…çš„ï¼Œå¹¶ä¸”æ¯ä¸ªåç»­é”®æ˜¯ç›¸å¯¹äºå‰ä¸€ä¸ªå±æ€§çš„å€¼çš„ã€‚å½“éœ€è¦ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•æ¥å‘ä¸‹é€çº§è·å–å¯¹è±¡å±‚æ¬¡ç»“æ„æ—¶ï¼Œkey pathç‰¹åˆ«æœ‰ç”¨ã€‚<br>ä¾‹å¦‚ï¼Œ<code>owner.address.street</code>åº”ç”¨äºé“¶è¡Œè´¦æˆ·å®ä¾‹çš„key pathæ˜¯æŒ‡å­˜å‚¨åœ¨é“¶è¡Œè´¦æˆ·æ‰€æœ‰è€…åœ°å€ä¸­çš„<code>street</code>å­—ç¬¦ä¸²çš„å€¼ã€‚</p><h4 id="ä½¿ç”¨keyè·å–å±æ€§å€¼"><a href="#ä½¿ç”¨keyè·å–å±æ€§å€¼" class="headerlink" title="ä½¿ç”¨keyè·å–å±æ€§å€¼"></a>ä½¿ç”¨keyè·å–å±æ€§å€¼</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)getAttributeValuesUsingKeys &#123;</span><br><span class="line">    Account *myAccount = [[Account alloc] init];</span><br><span class="line">    myAccount.currBalance = @<span class="number">100</span>;</span><br><span class="line">    </span><br><span class="line">    Person *owner = [[Person alloc] init];</span><br><span class="line">    Address *address = [[Address alloc] init];</span><br><span class="line">    address.street = <span class="string">@&quot;ç¬¬ä¸‰å¤§é“&quot;</span>;</span><br><span class="line">    owner.address = address;</span><br><span class="line">    myAccount.owner = owner;</span><br><span class="line">    </span><br><span class="line">    Transaction *t1 = [[Transaction alloc] init];</span><br><span class="line">    Person *p1 = [[Person alloc] init];</span><br><span class="line">    p1.name = <span class="string">@&quot;p1&quot;</span>;</span><br><span class="line">    t1.payee = p1;</span><br><span class="line">    </span><br><span class="line">    Transaction *t2 = [[Transaction alloc] init];</span><br><span class="line">    Person *p2 = [[Person alloc] init];</span><br><span class="line">    p2.name = <span class="string">@&quot;p2&quot;</span>;</span><br><span class="line">    t2.payee = p2;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSArray</span> *ts = @[t1, t2];</span><br><span class="line">    myAccount.transactions = ts;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSNumber</span> *currBalance = [myAccount valueForKey:<span class="string">@&quot;currBalance&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;currBalance = %@&quot;</span>, currBalance); <span class="comment">// currBalance = 100</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSString</span> *street = [myAccount valueForKeyPath:<span class="string">@&quot;owner.address.street&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;street = %@&quot;</span>, street); <span class="comment">// street = ç¬¬ä¸‰å¤§é“</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSDictionary</span> *values = [myAccount dictionaryWithValuesForKeys:@[<span class="string">@&quot;currBalance&quot;</span>, <span class="string">@&quot;owner&quot;</span>]];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;values = %@&quot;</span>, values); <span class="comment">// values = &#123;currBalance = 100; owner = &quot;&lt;Person: 0x60000179af40&gt;&quot;;&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSArray</span> *payees = [myAccount valueForKeyPath:<span class="string">@&quot;transactions.payee.name&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;payees = %@&quot;</span>, payees); <span class="comment">// payees = (p1, p2)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Terminating app due to uncaught exception &#x27;NSUnknownKeyException&#x27;, reason: &#x27;[&lt;Account 0x600002685ee0&gt; valueForUndefinedKey:]&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//    [myAccount valueForKey:@&quot;owner.address.street&quot;];</span></span><br><span class="line">    <span class="comment">//    [myAccount valueForKey:@&quot;test&quot;];</span></span><br><span class="line">    <span class="comment">//    [myAccount dictionaryWithValuesForKeys:@[@&quot;currBalance&quot;, @&quot;transactions.payee.name&quot;]];</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨keyè®¾ç½®å±æ€§å€¼"><a href="#ä½¿ç”¨keyè®¾ç½®å±æ€§å€¼" class="headerlink" title="ä½¿ç”¨keyè®¾ç½®å±æ€§å€¼"></a>ä½¿ç”¨keyè®¾ç½®å±æ€§å€¼</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)settingAttributeValuesUsingKeys &#123;</span><br><span class="line">    Account *myAccount = [[Account alloc] init];</span><br><span class="line">    [myAccount setValue:@<span class="number">100.0</span> forKey:<span class="string">@&quot;currBalance&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;currBalance = %@&quot;</span>, myAccount.currBalance); <span class="comment">// currBalance = 100</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// operationTimesæ˜¯éå¼•ç”¨ç±»å‹ï¼Œè¿™é‡Œè¿›è¡Œäº†å’ŒNSNumberçš„è‡ªåŠ¨è½¬æ¢</span></span><br><span class="line">    [myAccount setValue:@<span class="number">10</span> forKey:<span class="string">@&quot;operationTimes&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;operationTimes = %ld&quot;</span>, myAccount.operationTimes); <span class="comment">// operationTimes = 10</span></span><br><span class="line">    </span><br><span class="line">    Person *owner = [[Person alloc] init];</span><br><span class="line">    Address *address = [[Address alloc] init];</span><br><span class="line">   </span><br><span class="line">    [myAccount setValue:address forKeyPath:<span class="string">@&quot;owner.address&quot;</span>]; <span class="comment">// è¿™æ—¶å€™ownerè¿˜æ˜¯null</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;address = %@&quot;</span>, myAccount.owner.address); <span class="comment">// address = (null)</span></span><br><span class="line">    </span><br><span class="line">    [myAccount setValue:owner forKeyPath:<span class="string">@&quot;owner&quot;</span>];</span><br><span class="line">    [myAccount setValue:address forKeyPath:<span class="string">@&quot;owner.address&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;address = %@&quot;</span>, myAccount.owner.address); <span class="comment">// address = &lt;Address: 0x600001a43550&gt;</span></span><br><span class="line">    </span><br><span class="line">    [myAccount setValuesForKeysWithDictionary:@&#123;<span class="string">@&quot;currBalance&quot;</span>: @<span class="number">200.0</span>, <span class="string">@&quot;owner&quot;</span>: owner&#125;];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;currBalance = %@, owner = %@&quot;</span>, myAccount.currBalance, myAccount.owner); <span class="comment">// currBalance = 200, owner = &lt;Person: 0x600001478ee0&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Terminating app due to uncaught exception &#x27;NSUnknownKeyException&#x27;, reason: &#x27;[&lt;Account 0x6000029c2490&gt; setValue:forUndefinedKey:]: xxx&#x27;</span></span><br><span class="line">    <span class="comment">//    [myAccount setValue:@&quot;value&quot; forUndefinedKey:@&quot;undefinedKey&quot;];</span></span><br><span class="line">    <span class="comment">//    [myAccount setValuesForKeysWithDictionary:@&#123;@&quot;currBalance&quot;: @200.0, @&quot;owner.address.street&quot;: @&quot;ç¬¬ä¸€å¤§é“&quot;&#125;];</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è®¿é—®é›†åˆå±æ€§"><a href="#è®¿é—®é›†åˆå±æ€§" class="headerlink" title="è®¿é—®é›†åˆå±æ€§"></a>è®¿é—®é›†åˆå±æ€§</h3><p>ç¬¦åˆé”®å€¼ç¼–ç çš„å¯¹è±¡ä»¥ä¸å…¬å¼€å…¶ä»–å±æ€§ç›¸åŒçš„æ–¹å¼å…¬å¼€å…¶å¤šå¯¹å¤šå±æ€§ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code>valueForKey:</code>æˆ–<code>setValue:forKey:</code>æ¥è·å–æˆ–è®¾ç½®é›†åˆå±æ€§ã€‚ä½†æ˜¯ï¼Œå½“ä½ æƒ³è¦æ“ä½œè¿™äº›é›†åˆå†…å®¹çš„æ—¶å€™ï¼Œä½¿ç”¨åè®®å®šä¹‰çš„å¯å˜ä»£ç†æ–¹æ³•é€šå¸¸æ˜¯æœ€æœ‰æ•ˆçš„ã€‚<br>è¯¥åè®®ä¸ºé›†åˆå¯¹è±¡è®¿é—®å®šä¹‰äº†ä¸‰ç§ä¸åŒçš„ä»£ç†æ–¹æ³•ï¼Œæ¯ç§æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªkeyå’Œkey pathå˜é‡ï¼š</p><ul><li><code>mutableArrayValueForKey:</code>å’Œ<code>mutableArrayValueForKeyPath:</code> è¿”å›ä¸€ä¸ªè¡Œä¸ºç±»ä¼¼<code>NSMutableArray</code>çš„ä»£ç†å¯¹è±¡</li><li> <code>mutableSetValueForKey:</code>å’Œ<code>mutableSetValueFOrKeyPath:</code> è¿”å›ä¸€ä¸ªè¡Œä¸ºç±»ä¼¼<code>NSMutableSet</code>çš„ä»£ç†å¯¹è±¡</li><li><code>mutableOrderedSetValueForKey:</code>å’Œ<code>mutableOrderedSetValueForKeyPath:</code> è¿”å›ä¸€ä¸ªè¡Œä¸ºç±»ä¼¼<code>NSMutableOrderedSet</code>çš„ä»£ç†å¯¹è±¡<br>å½“æ‚¨å¯¹ä»£ç†å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œå‘å¯¹è±¡æ·»åŠ å…ƒç´ ï¼Œä»ä¸­åˆ é™¤å…ƒç´ æˆ–è€…æ›¿æ¢å…¶ä¸­çš„å…ƒç´ æ—¶ï¼Œåè®®çš„é»˜è®¤å®ç°ä¼šç›¸åº”åœ°ä¿®æ”¹åŸºç¡€å±æ€§ã€‚è¿™æ¯”ä½¿ç”¨<code>valueForKey:</code>è·å–ä¸€ä¸ªä¸å¯å˜çš„é›†åˆå¯¹è±¡ï¼Œå†åˆ›å»ºä¸€ä¸ªå¯ä¿®æ”¹çš„é›†åˆï¼Œç„¶åæŠŠä¿®æ”¹åçš„é›†åˆé€šè¿‡<code>setValue:forKey:</code>æ›´æœ‰æ•ˆã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå®ƒæ¯”ç›´æ¥ä½¿ç”¨å¯å˜å±æ€§ä¹Ÿæ˜¯æ›´æœ‰æ•ˆçš„ã€‚è¿™äº›æ–¹æ³•ä¸ºæŒæœ‰é›†åˆå¯¹è±¡çš„å¯¹è±¡ä»¬æä¾›äº†ç»´æŠ¤KVOç‰¹æ€§çš„å¥½å¤„ã€‚<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)accessingCollectionProperties &#123;</span><br><span class="line">    Transaction *t1 = [[Transaction alloc] init];</span><br><span class="line">    Transaction *t2 = [[Transaction alloc] init];</span><br><span class="line">    Account *myAccount = [[Account alloc] init];</span><br><span class="line">    </span><br><span class="line">    [myAccount addObserver:<span class="keyword">self</span> forKeyPath:<span class="string">@&quot;transactions&quot;</span> options:<span class="built_in">NSKeyValueObservingOptionOld</span> | <span class="built_in">NSKeyValueObservingOptionNew</span> context:<span class="literal">nil</span>];</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    [myAccount setValue:@[t1, t2] forKey:<span class="string">@&quot;transactions&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;1st transactions = %@&quot;</span>, myAccount.transactions); <span class="comment">// 1st transactions = (&quot;&lt;Transaction: 0x6000009d1400&gt;&quot;,&quot;&lt;Transaction: 0x6000009d1420&gt;&quot;)</span></span><br><span class="line">    <span class="built_in">NSMutableArray</span> &lt;Transaction *&gt;*transactions = [myAccount mutableArrayValueForKey:<span class="string">@&quot;transactions&quot;</span>];</span><br><span class="line">    </span><br><span class="line">    [transactions addObject:[[Transaction alloc] init]];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;2nd transactions = %@&quot;</span>, myAccount.transactions); <span class="comment">// 2nd transactions = (&quot;&lt;Transaction: 0x6000009d1400&gt;&quot;,&quot;&lt;Transaction: 0x6000009d1420&gt;&quot;,&quot;&lt;Transaction: 0x6000009cabf0&gt;&quot;)</span></span><br><span class="line">    </span><br><span class="line">    [transactions removeLastObject];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;3th transactions = %@&quot;</span>, myAccount.transactions); <span class="comment">// 3th transactions = (&quot;&lt;Transaction: 0x6000009d1400&gt;&quot;,&quot;&lt;Transaction: 0x6000009d1420&quot;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨é›†åˆæ“ä½œç¬¦"><a href="#ä½¿ç”¨é›†åˆæ“ä½œç¬¦" class="headerlink" title="ä½¿ç”¨é›†åˆæ“ä½œç¬¦"></a>ä½¿ç”¨é›†åˆæ“ä½œç¬¦</h4>å½“æ‚¨å‘<code>valueForKeyPath:</code>æ¶ˆæ¯å‘é€ç¬¦åˆé”®å€¼ç¼–ç çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥åœ¨key pathä¸­åµŒå…¥é›†åˆè¿ç®—ç¬¦ã€‚é›†åˆè¿ç®—ç¬¦æ˜¯ä¸€ä¸ªå°çš„å…³é”®å­—åˆ—è¡¨ä¹‹ä¸€ï¼Œå‰é¢æ˜¯ä¸€ä¸ª@ç¬¦å·ï¼Œå®ƒæŒ‡å®šäº†getteråº”è¯¥æ‰§è¡Œçš„æ“ä½œï¼Œä»¥ä¾¿åœ¨è¿”å›ä¹‹å‰ä»¥æŸç§æ–¹å¼æ“ä½œæ•°æ®ã€‚<code>NSObject</code>ä¸º<code>valueForKeyPath:</code>æä¾›äº†é»˜è®¤å®ç°ã€‚<br>å½“key pathåŒ…å«é›†åˆè¿ç®—ç¬¦æ—¶ï¼Œè¿ç®—ç¬¦ä¹‹å‰çš„éƒ¨åˆ†ç§°ä¸ºå·¦é”®è·¯å¾„ï¼ŒæŒ‡ç¤ºç›¸å¯¹äºæ¶ˆæ¯æ¥å—è€…æ“ä½œçš„é›†åˆï¼Œå½“ä½ ç›´æ¥å‘ä¸€ä¸ªé›†åˆï¼ˆä¾‹å¦‚<code>NSArray</code>ï¼‰å‘é€æ¶ˆæ¯æ—¶å·¦é”®è·¯å¾„æˆ–è®¸å¯ä»¥çœç•¥ã€‚æ“ä½œç¬¦ä¹‹åçš„éƒ¨åˆ†ç§°ä¸ºå³é”®è·¯å¾„ï¼ŒæŒ‡å®šæ“ä½œç¬¦åº”å¤„ç†çš„é›†åˆä¸­çš„å±æ€§ï¼Œé™¤äº†<code>@count</code>ä¹‹å¤–çš„æ‰€æœ‰æ“ä½œç¬¦éƒ½éœ€è¦ä¸€ä¸ªå³é”®è·¯å¾„ã€‚<br><img src="http://image.iosprogrammer.hongbility.com/KVC_KVOkeypath.jpg"><br>é›†åˆè¿ç®—ç¬¦è¡¨ç°å‡ºä¸‰ç§åŸºæœ¬ç±»å‹çš„è¡Œä¸ºï¼š</li><li><strong>èšåˆè¿ç®—ç¬¦</strong>ä»¥æŸç§æ–¹å¼åˆå¹¶é›†åˆçš„å¯¹è±¡ï¼Œå¹¶è¿”å›é€šå¸¸ä¸å³é”®è·¯å¾„ä¸­æŒ‡å®šçš„å±æ€§çš„æ•°æ®ç±»å‹åŒ¹é…çš„å•ä¸ªå¯¹è±¡ã€‚<code>@count</code>æ˜¯ä¸€ä¸ªä¾‹å¤–ï¼Œå®ƒæ²¡æœ‰æ­£ç¡®çš„å…³é”®è·¯å¾„å¹¶å§‹ç»ˆå°†è¿”å›ä¸€ä¸ª<code>NSNumber</code>å®ä¾‹ã€‚åŒ…æ‹¬ï¼š<code>@avg</code>/<code>@count</code>/<code>@max</code>/<code>@min</code>/<code>@sum</code>ã€‚</li><li><strong>æ•°ç»„è¿ç®—ç¬¦</strong>è¿”å›ä¸€ä¸ª<code>NSArray</code>å®ä¾‹ï¼Œè¯¥å®ä¾‹åŒ…å«å‘½åé›†åˆä¸­ä¿å­˜çš„å¯¹è±¡çš„æŸä¸ªå­é›†ã€‚åŒ…å«ï¼š<code>@distinctUnionOfObjects</code>/<code>@unionOfObjects</code>ã€‚</li><li><strong>åµŒå¥—è¿ç®—ç¬¦</strong>å¤„ç†åŒ…å«å…¶ä»–é›†åˆçš„é›†åˆï¼Œå¹¶æ ¹æ®æ“ä½œç¬¦è¿”å›ä¸€ä¸ª<code>NSArray</code>æˆ–<code>NSSet</code>å®ä¾‹ï¼Œå®ƒä»¥æŸç§æ–¹å¼ç»„åˆåµŒå¥—é›†åˆçš„å¯¹è±¡ã€‚åŒ…å«ï¼š<code>@distinctUnionOfArrays</code>/<code>@unionOfArrays</code>/<code>@distinctUnionOfSets</code>ã€‚</li></ul><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)usingCollectionOperators &#123;</span><br><span class="line">    Transaction *t1 = [Transaction transactionWithPayee:<span class="string">@&quot;Green Power&quot;</span> amount:@(<span class="number">120.00</span>) date:[<span class="built_in">NSDate</span> dateWithTimeIntervalSinceNow:<span class="number">100</span>]];</span><br><span class="line">    Transaction *t3 = [Transaction transactionWithPayee:<span class="string">@&quot;Green Power&quot;</span> amount:@(<span class="number">170.00</span>) date:[<span class="built_in">NSDate</span> dateWithTimeIntervalSinceNow:<span class="number">300</span>]];</span><br><span class="line">    Transaction *t5 = [Transaction transactionWithPayee:<span class="string">@&quot;Car Loan&quot;</span> amount:@(<span class="number">250.00</span>) date:[<span class="built_in">NSDate</span> dateWithTimeIntervalSinceNow:<span class="number">500</span>]];</span><br><span class="line">    Transaction *t6 = [Transaction transactionWithPayee:<span class="string">@&quot;Car Loan&quot;</span> amount:@(<span class="number">250.00</span>) date:[<span class="built_in">NSDate</span> dateWithTimeIntervalSinceNow:<span class="number">600</span>]];</span><br><span class="line">    Transaction *t13 = [Transaction transactionWithPayee:<span class="string">@&quot;Animal Hospital&quot;</span> amount:@(<span class="number">600.00</span>) date:[<span class="built_in">NSDate</span> dateWithTimeIntervalSinceNow:<span class="number">500</span>]];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSArray</span> *transactions = @[t1, t3, t5, t6, t13];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* èšåˆè¿ç®—ç¬¦</span></span><br><span class="line"><span class="comment">     * èšåˆè¿ç®—ç¬¦å¯ä»¥å¤„ç†æ•°ç»„æˆ–å±æ€§é›†ï¼Œä»è€Œç”Ÿæˆåæ˜ é›†åˆæŸäº›æ–¹é¢çš„å•ä¸ªå€¼ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// @avg å¹³å‡å€¼</span></span><br><span class="line">    <span class="built_in">NSNumber</span> *transactionAverage = [transactions valueForKeyPath:<span class="string">@&quot;@avg.amount&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;transactionAverage = %@&quot;</span>, transactionAverage); <span class="comment">// transactionAverage = 278</span></span><br><span class="line">    <span class="comment">// @count ä¸ªæ•°</span></span><br><span class="line">    <span class="built_in">NSNumber</span> *numberOfTransactions = [transactions valueForKeyPath:<span class="string">@&quot;@count&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;numberOfTransactions = %@&quot;</span>, numberOfTransactions); <span class="comment">// numberOfTransactions = 5</span></span><br><span class="line">    <span class="comment">// @max æœ€å¤§å€¼ ä½¿ç”¨compare:è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">    <span class="built_in">NSDate</span> *latestDate = [transactions valueForKeyPath:<span class="string">@&quot;@max.date&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;latestDate = %@&quot;</span>, latestDate); <span class="comment">// latestDate = Thu Nov  1 15:05:59 2018</span></span><br><span class="line">    <span class="comment">// @min æœ€å°å€¼ ä½¿ç”¨compare:è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">    <span class="built_in">NSDate</span> *earliestDate = [transactions valueForKeyPath:<span class="string">@&quot;@min.date&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;earliestDate = %@&quot;</span>, earliestDate);<span class="comment">// earliestDate = Thu Nov  1 14:57:39 2018</span></span><br><span class="line">    <span class="comment">// @sum æ€»å’Œ</span></span><br><span class="line">    <span class="built_in">NSNumber</span> *amountSum = [transactions valueForKeyPath:<span class="string">@&quot;@sum.amount&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;amountSum = %@&quot;</span>, amountSum); <span class="comment">// amountSum = 1390</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* æ•°ç»„è¿ç®—ç¬¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * æ•°ç»„è¿ç®—ç¬¦å¯¼è‡´valueForKeyPath:è¿”å›ä¸å³é”®è·¯å¾„æŒ‡ç¤ºçš„ç‰¹å®šå¯¹è±¡é›†ç›¸å¯¹åº”çš„å¯¹è±¡æ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment">     * å¦‚æœä½¿ç”¨æ•°ç»„è¿ç®—ç¬¦æ—¶ä»»ä½•å¶å¯¹è±¡ä¸ºnilï¼Œåˆ™valueForKeyPathï¼šæ–¹æ³•ä¼šå¼•å‘å¼‚å¸¸ã€‚</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="comment">// @distinctUnionOfObjects åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«ä¸å³é”®è·¯å¾„æŒ‡å®šçš„å±æ€§å¯¹åº”çš„é›†åˆçš„ä¸åŒå¯¹è±¡ã€‚ä¼šåˆ é™¤é‡å¤å¯¹è±¡ã€‚</span></span><br><span class="line">    <span class="built_in">NSArray</span> *distinctPayees = [transactions valueForKeyPath:<span class="string">@&quot;@distinctUnionOfObjects.payee&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;distinctPayees = %@&quot;</span>, distinctPayees); <span class="comment">// distinctPayees = (&quot;Green Power&quot;, &quot;Animal Hospital&quot;, &quot;Car Loan&quot;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// @unionOfObjects åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«ä¸å³é”®è·¯å¾„æŒ‡å®šçš„å±æ€§å¯¹åº”çš„é›†åˆçš„æ‰€æœ‰å¯¹è±¡ã€‚ä¸åˆ é™¤é‡å¤å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">NSArray</span> *payees = [transactions valueForKeyPath:<span class="string">@&quot;@unionOfObjects.payee&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;payees = %@&quot;</span>, payees); <span class="comment">// payees = (&quot;Green Power&quot;, &quot;Green Power&quot;, &quot;Car Loan&quot;, &quot;Car Loan&quot;, &quot;Animal Hospital&quot;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** åµŒå¥—è¿ç®—ç¬¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * åµŒå¥—è¿ç®—ç¬¦å¯¹åµŒå¥—é›†åˆè¿›è¡Œæ“ä½œï¼Œé›†åˆä¸­çš„æ¯ä¸ªæ¡ç›®éƒ½åŒ…å«ä¸€ä¸ªé›†åˆã€‚</span></span><br><span class="line"><span class="comment">     * å¦‚æœä½¿ç”¨æ•°ç»„è¿ç®—ç¬¦æ—¶ä»»ä½•å¶å¯¹è±¡ä¸ºnilï¼Œåˆ™valueForKeyPathï¼šæ–¹æ³•ä¼šå¼•å‘å¼‚å¸¸ã€‚</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    Transaction *moreT1 = [Transaction transactionWithPayee:<span class="string">@&quot;General Cable - Cottage&quot;</span> amount:@(<span class="number">120.00</span>) date:[<span class="built_in">NSDate</span> dateWithTimeIntervalSinceNow:<span class="number">10</span>]];</span><br><span class="line">    Transaction *moreT2 = [Transaction transactionWithPayee:<span class="string">@&quot;General Cable - Cottage&quot;</span> amount:@(<span class="number">1550.00</span>) date:[<span class="built_in">NSDate</span> dateWithTimeIntervalSinceNow:<span class="number">3</span>]];</span><br><span class="line">    Transaction *moreT7 = [Transaction transactionWithPayee:<span class="string">@&quot;Hobby Shop&quot;</span> amount:@(<span class="number">600.00</span>) date:[<span class="built_in">NSDate</span> dateWithTimeIntervalSinceNow:<span class="number">160</span>]];</span><br><span class="line">    <span class="built_in">NSArray</span> *moreTransactions = @[moreT1, moreT2, moreT7];</span><br><span class="line">    <span class="built_in">NSArray</span> *arrayOfArrays = @[transactions, moreTransactions];</span><br><span class="line">    <span class="comment">// @distinctUnionOfArrays  æŒ‡å®š@distinctUnionOfArraysè¿ç®—ç¬¦æ—¶ï¼ŒvalueForKeyPath:åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«ä¸å³é”®è·¯å¾„æŒ‡å®šçš„å±æ€§å¯¹åº”çš„æ‰€æœ‰é›†åˆçš„ç»„åˆçš„ä¸åŒå¯¹è±¡ã€‚</span></span><br><span class="line">    <span class="built_in">NSArray</span> *collectedDistinctPayees = [arrayOfArrays valueForKeyPath:<span class="string">@&quot;@distinctUnionOfArrays.payee&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;collectedDistinctPayees = %@&quot;</span>, collectedDistinctPayees); <span class="comment">// collectedDistinctPayees = ( &quot;General Cable - Cottage&quot;, &quot;Animal Hospital&quot;, &quot;Hobby Shop&quot;, &quot;Green Power&quot;, &quot;Car Loan&quot;)</span></span><br><span class="line">    <span class="comment">// @unionOfArrays ä¸@distinctUnionOfArrays ä¸åŒçš„æ˜¯ä¸ä¼šåˆ é™¤ç›¸åŒçš„å…ƒç´ </span></span><br><span class="line">    <span class="built_in">NSArray</span> *collectedPayees = [arrayOfArrays valueForKeyPath:<span class="string">@&quot;@unionOfArrays.payee&quot;</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;collectedPayees = %@&quot;</span>, collectedPayees); <span class="comment">// collectedPayees = (&quot;Green Power&quot;, &quot;Green Power&quot;, &quot;Car Loan&quot;, &quot;Car Loan&quot;, &quot;Animal Hospital&quot;, &quot;General Cable - Cottage&quot;, &quot;General Cable - Cottage&quot;, &quot;Hobby Shop&quot;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// @distinctUnionOfSets ä¸@distinctUnionOfArraysä½œç”¨ç›¸åŒï¼Œåªæ˜¯ç”¨äºNSSetå¯¹è±¡è€Œä¸æ˜¯NSArray</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è®¿é—®è€…æœç´¢æ¨¡å¼"><a href="#è®¿é—®è€…æœç´¢æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æœç´¢æ¨¡å¼"></a>è®¿é—®è€…æœç´¢æ¨¡å¼</h3><p>NSObjectæä¾›çš„NSkeyValueCodingåè®®çš„é»˜è®¤å®ç°ä½¿ç”¨æ˜ç¡®å®šä¹‰çš„è§„åˆ™é›†å°†åŸºäºé”®çš„è®¿é—®å™¨è°ƒç”¨æ˜ å°„åˆ°å¯¹è±¡çš„åŸºç¡€å±æ€§ã€‚è¿™äº›åè®®æ–¹æ³•ä½¿ç”¨â€œkeyâ€åœ¨å…¶è‡ªå·±çš„å¯¹è±¡å®ä¾‹ä¸­æœç´¢è®¿é—®å™¨ã€å®ä¾‹å˜é‡ä»¥åŠéµå¾ªæŸä¸ªå‘½åè§„åˆ™çš„ç›¸å…³æ–¹æ³•ã€‚è™½ç„¶æ‚¨å¾ˆå°‘ä¿®æ”¹æ­¤é»˜è®¤æœç´¢ï¼Œä½†äº†è§£å®ƒçš„å·¥ä½œæ–¹å¼ä¼šæœ‰æ‰€å¸®åŠ©ï¼Œæ—¢å¯ä»¥è·Ÿè¸ªé”®å€¼ç¼–ç å¯¹è±¡çš„è¡Œä¸ºï¼Œä¹Ÿå¯ä»¥ä½¿æ‚¨è‡ªå·±çš„å¯¹è±¡å…¼å®¹KVCã€‚</p><h4 id="Getterçš„æœç´¢æ¨¡å¼"><a href="#Getterçš„æœç´¢æ¨¡å¼" class="headerlink" title="Getterçš„æœç´¢æ¨¡å¼"></a>Getterçš„æœç´¢æ¨¡å¼</h4><p><code>valueForKey:</code>çš„é»˜è®¤å®ç°æ˜¯ï¼Œç»™å®š<code>key</code>å‚æ•°ä½œä¸ºè¾“å…¥ï¼Œé€šè¿‡ä¸‹é¢çš„è¿‡ç¨‹ï¼Œåœ¨æ¥æ”¶<code>valueForKey:</code>è°ƒç”¨çš„ç±»å®ä¾‹ä¸­æ“ä½œã€‚</p><ol><li>æŒ‰é¡ºåºæœç´¢è®¿é—®å™¨æ–¹æ³•<code>get&lt;Key&gt;</code>/<code>&lt;key&gt;</code>/<code>is&lt;Key&gt;</code>/<code>_&lt;key&gt;</code>ã€‚å¦‚æœæ‰¾åˆ°ï¼Œè°ƒç”¨è¯¥æ–¹æ³•å¹¶ä¸”å¸¦ç€æ–¹æ³•çš„è°ƒç”¨ç»“æœè°ƒè½¬åˆ°ç¬¬5æ­¥æ‰§è¡Œï¼›å¦åˆ™ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ã€‚</li><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç®€å•çš„è®¿é—®æ–¹æ³•ï¼Œæœç´¢å…¶åç§°åŒ¹é…æŸäº›æ¨¡å¼çš„æ–¹æ³•çš„å®ä¾‹ã€‚å…¶ä¸­åŒ¹é…æ¨¡å¼åŒ…å«<code>countOf&lt;Key&gt;</code>ï¼Œ<code>objectIn&lt;Key&gt;AtIndex:</code>ï¼ˆå¯¹åº”äº<code>NSArray</code>å®šä¹‰çš„åŸºæœ¬æ–¹æ³•ï¼‰ï¼Œå’Œ<code>&lt;key&gt;AtIndexs:</code>ï¼ˆå¯¹åº”äº<code>NSArray</code>çš„æ–¹æ³•<code>objectsAtIndexs:</code>ï¼‰<br>ä¸€æ—¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªå’Œå…¶ä»–ä¸¤ä¸ªä¸­çš„è‡³å°‘ä¸€ä¸ªï¼Œåˆ™åˆ›å»ºä¸€ä¸ªå“åº”æ‰€ä»¥<code>NSArray</code>æ–¹æ³•å¹¶è¿”å›è¯¥æ–¹æ³•çš„é›†åˆä»£ç†å¯¹è±¡ã€‚å¦åˆ™ï¼Œæ‰§è¡Œç¬¬3æ­¥ã€‚<br>ä»£ç†å¯¹è±¡éšåå°†ä»»ä½•<code>NSArray</code>æ¥æ”¶åˆ°çš„ä¸€äº›ç»„åˆçš„æ¶ˆæ¯ã€‚**å®é™…ä¸Šï¼Œä¸ç¬¦åˆé”®å€¼ç¼–ç å¯¹è±¡ä¸€èµ·å·¥ä½œçš„ä»£ç†å¯¹è±¡å…è®¸åº•å±‚å±æ€§çš„è¡Œä¸ºå°±åƒå®ƒæ˜¯<code>NSArray</code>ä¸€æ ·ï¼Œå³ä¾¿å®ƒä¸æ˜¯ã€‚</li><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç®€å•çš„è®¿é—®å™¨æ–¹æ³•æˆ–æ•°ç»„è®¿é—®æ–¹æ³•ç»„ï¼Œåˆ™å¯»æ‰¾ä¸‰ä¸ªæ–¹æ³•<code>countOf&lt;Key&gt;</code>/<code>enumeratorOf&lt;Key&gt;</code>/<code>memberOf&lt;Key&gt;:</code>ï¼Œå¯¹åº”<code>NSSet</code>ç±»çš„åŸºæœ¬æ–¹æ³•ã€‚<br>å¦‚æœä¸‰ä¸ªæ–¹æ³•å…¨æ‰¾åˆ°äº†ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªé›†åˆä»£ç†å¯¹è±¡æ¥å“åº”æ‰€æœ‰çš„NSSetæ–¹æ³•å¹¶è¿”å›ã€‚å¦åˆ™ï¼Œæ‰§è¡Œç¬¬4æ­¥ã€‚</li><li>å¦‚æœä¸Šé¢çš„æ–¹æ³•éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œå¹¶ä¸”æ¥å—è€…çš„ç±»æ–¹æ³•<code>accessInstanceVariablesDirectly</code>è¿”å›<code>YES</code>ï¼ˆé»˜è®¤YESï¼‰ï¼Œåˆ™æŒ‰åºæœç´¢ä»¥ä¸‹å®ä¾‹å˜é‡ï¼š<code>_&lt;key&gt;</code>/<code>_is&lt;Key&gt;</code>/<code>&lt;key&gt;</code>/<code>is&lt;Key&gt;</code>ã€‚å¦‚æœæ‰¾åˆ°å…¶ä¸­ä¹‹ä¸€ï¼Œç›´æ¥è·å–å®ä¾‹å˜é‡çš„å€¼å¹¶è·³è½¬åˆ°ç¬¬5æ­¥ï¼›å¦åˆ™æ‰§è¡Œç¬¬6æ­¥ã€‚</li><li>å¦‚æœæ£€ç´¢åˆ°çš„å±æ€§å€¼æ˜¯å¯¹è±¡æŒ‡é’ˆï¼Œåˆ™åªè¿”å›ç»“æœï¼›å¦‚æœå€¼æ˜¯å—<code>NSNumber</code>æ”¯æŒçš„æ ‡é‡ï¼Œåˆ™å°†å…¶å­˜å‚¨åœ¨<code>NSNumber</code>å®ä¾‹ä¸­å¹¶è¿”å›ï¼›å¦‚æœç»“æœæ˜¯<code>NSNumber</code>ä¸æ”¯æŒçš„æ ‡é‡ï¼Œåˆ™è½¬æ¢æˆ<code>NSValue</code>å¯¹è±¡å¹¶è¿”å›</li><li>å¦‚æœä»¥ä¸Šæ‰€æœ‰çš„å°è¯•éƒ½å¤±è´¥äº†ï¼Œåˆ™è°ƒç”¨<code>valueForUndefinedKey:</code>ï¼Œè¿™ä¸ªæ–¹æ³•é»˜è®¤æŠ›å‡ºå¼‚å¸¸ï¼Œ<code>NSObject</code>çš„å­ç±»å¯ä»¥é‡å†™æ¥è‡ªå®šä¹‰è¡Œä¸ºã€‚</li></ol><h4 id="Setterçš„æœç´¢æ¨¡å¼"><a href="#Setterçš„æœç´¢æ¨¡å¼" class="headerlink" title="Setterçš„æœç´¢æ¨¡å¼"></a>Setterçš„æœç´¢æ¨¡å¼</h4><p><code>setValue:forKey:</code>çš„é»˜è®¤å®ç°æ˜¯ç»™å®š<code>key</code>å’Œ<code>value</code>ä½œä¸ºå‚æ•°è¾“å…¥ï¼Œå°è¯•æŠŠ<code>value</code>è®¾ç½®ç»™ä»¥<code>key</code>å‘½åçš„å±æ€§ã€‚è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æŒ‰åºæœç´¢<code>set&lt;Key&gt;:</code>æˆ–<code>_set&lt;Key&gt;</code>ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œåˆ™ä½¿ç”¨è¾“å…¥å‚æ•°è°ƒç”¨å¹¶ç»“æŸã€‚</li><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç®€å•çš„è®¿é—®å™¨æ–¹æ³•ï¼Œå¹¶ä¸”å¦‚æœç±»æ–¹æ³•<code>accessInstanceVariablesDirectly</code>è¿”å›<code>YES</code>ï¼ˆé»˜è®¤ä¸ºYESï¼‰ï¼Œåˆ™æŒ‰åºæœç´¢ä»¥ä¸‹å®ä¾‹å˜é‡: <code>_&lt;key&gt;</code>/<code>_is&lt;Key&gt;</code>/<code>&lt;key&gt;</code>/<code>is&lt;Key&gt;</code>ï¼Œå¦‚æœæ‰¾åˆ°äº†åˆ™ç›´æ¥è¿›è¡Œèµ‹å€¼å¹¶ç»“æŸã€‚</li><li>ä»¥ä¸Šæ–¹æ³•çš†å¤±è´¥åˆ™è°ƒç”¨<code>setValue:forUndefinedKey:</code>ï¼Œè¿™ä¸ªæ–¹æ³•é»˜è®¤æŠ›å‡ºå¼‚å¸¸ï¼Œ<code>NSObject</code>çš„å­ç±»å¯ä»¥è‡ªå®šä¹‰ã€‚</li></ol><h1 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h1><p>Key-value observingæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå…è®¸å¯¹è±¡æŠŠè‡ªèº«å±æ€§çš„æ›´æ”¹é€šçŸ¥ç»™å…¶ä»–å±æ€§ã€‚å®ƒå¯¹åº”ç”¨ç¨‹åºä¸­modelå’Œcontrollerå±‚ä¹‹é—´çš„é€šä¿¡ç‰¹åˆ«æœ‰ç”¨ã€‚é€šå¸¸ï¼Œæ§åˆ¶å™¨å¯¹è±¡è§‚å¯Ÿæ¨¡å‹å¯¹è±¡çš„å±æ€§ï¼Œè§†å›¾å¯¹è±¡é€šè¿‡æ§åˆ¶å™¨è§‚å¯Ÿæ¨¡å‹å¯¹è±¡çš„å±æ€§ã€‚å¦å¤–ï¼Œä¸€ä¸ªæ¨¡å‹å¯¹è±¡æˆ–è®¸ä¼šè§‚å¯Ÿå¦ä¸€ä¸ªæ¨¡å‹å¯¹è±¡ï¼ˆé€šå¸¸ç”¨ä¸ç¡®è®¤ä»å±å€¼ä½•æ—¶æ”¹å˜ï¼‰æˆ–ç”šè‡³è‡ªèº«ï¼ˆå†æ¬¡ç¡®è®¤ä»å±å€¼ä½•æ—¶æ”¹å˜ï¼‰ã€‚<br>ä½ å¯ä»¥è§‚å¯Ÿå±æ€§ï¼ŒåŒ…æ‹¬ç®€å•å±æ€§ï¼Œä¸€å¯¹ä¸€å…³ç³»å’Œå¤šå¯¹å¤šå…³ç³»ã€‚å¤šå¯¹å¤šå…³ç³»çš„è§‚å¯Ÿè€…è¢«å‘ŠçŸ¥æ‰€ä½œå‡ºçš„æ”¹å˜çš„ç±»å‹â€”â€”ä»¥åŠæ”¹å˜ä¸­æ¶‰åŠå“ªäº›å¯¹è±¡ã€‚</p><h2 id="æ³¨å†ŒKVO"><a href="#æ³¨å†ŒKVO" class="headerlink" title="æ³¨å†ŒKVO"></a>æ³¨å†ŒKVO</h2><ul><li>ä½¿ç”¨<code>addObserver:forKeyPath:options:content:</code>æ–¹æ³•æ¥ç»™observeræ³¨å†Œä¸€ä¸ªobserved object</li><li>åœ¨observerå†…éƒ¨å®ç°<code>observerValueForKeyPath:ofObject:change:context:</code>æ¥æ¥æ”¶æ›´æ”¹çš„é€šçŸ¥æ¶ˆæ¯ã€‚</li><li>å½“ä¸å†åº”è¯¥æ¥æ”¶æ¶ˆæ¯æ—¶ï¼Œä½¿ç”¨<code>removeObserver:forKeyPath:</code>æ–¹æ³•æ¥åæ³¨å†Œè§‚å¯Ÿè€…ã€‚èµ·ç ä¹Ÿè¦åœ¨observerè¢«ç§»é™¤å‰è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</li></ul><h3 id="æ³¨å†ŒObserver"><a href="#æ³¨å†ŒObserver" class="headerlink" title="æ³¨å†ŒObserver"></a>æ³¨å†ŒObserver</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addObserver:forKeyPath:options:content:</span><br></pre></td></tr></table></figure><h4 id="options"><a href="#options" class="headerlink" title="options"></a>options</h4><p>optionså‚æ•°æŒ‡å®šäº†ä¸€ä¸ªæŒ‰ä½<code>OR</code>çš„å¸¸é‡é€‰é¡¹ï¼Œä¼šå½±å“é€šçŸ¥ä¸­æä¾›çš„æ›´æ”¹å­—å…¸çš„å†…å®¹å’Œç”Ÿæˆé€šçŸ¥çš„æ–¹å¼ã€‚<br>ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨<code>NSKeyValueObservingOptionOld</code>é€‰é¡¹ï¼Œåœ¨è¢«è§‚å¯Ÿçš„å±æ€§ä¿®æ”¹å‰æ”¶åˆ°æ—§å€¼ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨<code>NSKeyValueObservingOptionNew</code>æ¥è·å–ä¿®æ”¹åçš„æ–°å€¼ã€‚é€šè¿‡<code>NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew</code>è·å–ä¸¤è€…ã€‚<br>ä½¿ç”¨<code>NSKeyValueObservingOptionInitial</code>é€‰é¡¹ï¼Œè®©è¢«è§‚å¯Ÿçš„å±æ€§åœ¨<code>addObserver:forKeyPath:options:context</code>æ–¹æ³•è¿”å›å‰å‘é€å³æ—¶é€šçŸ¥ã€‚ä½ å¯ä»¥ä½¿ç”¨æ­¤é™„åŠ çš„ä¸€æ¬¡æ€§é€šçŸ¥æ¥åœ¨è§‚å¯Ÿè€…ä¸­å»ºç«‹å±æ€§çš„åˆå§‹å€¼ã€‚<br>é€šè¿‡åŒ…å«<code>NSKeyValueObservingOptionPrior</code>æ¥æŒ‡ç¤ºè¢«è§‚å¯Ÿå¯¹è±¡åœ¨å±æ€§æ›´æ”¹ä¹‹å‰å‘é€é€šçŸ¥ï¼ˆé™¤äº†åœ¨æ›´æ”¹ä¹‹åå‘é€é€šçŸ¥ï¼‰ã€‚åœ¨æ›´æ”¹ä¹‹å‰å‘é€çš„é€šçŸ¥ä¸­çš„<code>change</code>å­—å…¸å§‹ç»ˆåŒ…å«<code>NSKeyValueChangeNotificationIsPriorKey</code>ï¼Œå…¶å€¼æ˜¯åŒ…å«å¸ƒå°”å€¼YESçš„NSNumberå¯¹è±¡ï¼Œä½†ä¸åŒ…å«<code>NSKeyValueChangeNewKey</code>çš„å†…å®¹ã€‚å¦‚æœæŒ‡å®šæ­¤é€‰é¡¹ï¼Œåˆ™æ›´æ”¹åå‘é€çš„é€šçŸ¥ä¸­çš„<code>change</code>å­—å…¸çš„å†…å®¹å’ŒæœªæŒ‡å®šæ­¤é€‰é¡¹æ—¶åŒ…å«çš„å†…å®¹ç›¸åŒã€‚å½“è§‚å¯Ÿè€…è‡ªå·±çš„é”®å€¼è§‚å¯Ÿå…¼å®¹æ€§è¦æ±‚å®ƒä¸ºè‡ªå·±çš„ä¸€ä¸ªå±æ€§è°ƒç”¨-willChangexxxæ–¹æ³•ä¹‹ä¸€æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œå¹¶ä¸”è¯¥å±æ€§çš„å€¼å–å†³äºè¢«è§‚å¯Ÿå¯¹è±¡çš„å±æ€§çš„å€¼ã€‚</p><h4 id="context"><a href="#context" class="headerlink" title="context"></a>context</h4><p><code>addObserver:forKeyPath:options:context:</code>æ¶ˆæ¯ä¸­çš„ä¸Šä¸‹æ–‡æŒ‡é’ˆåŒ…å«å°†åœ¨ç›¸åº”çš„æ›´æ”¹é€šçŸ¥ä¸­ä¼ é€’å›è§‚å¯Ÿè€…çš„ä»»æ„æ•°æ®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨NULLæ¥å®Œå…¨æŒ‡å®šå¹¶ä¾èµ–äº<code>key path</code>å­—ç¬¦ä¸²æ¥ç¡®å®šæ›´æ”¹é€šçŸ¥çš„æ¥æºï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•å¯èƒ½ä¼šå¯¼è‡´å…¶è¶…ç±»ä¹Ÿå› ä¸åŒåŸå› è§‚å¯Ÿåˆ°ç›¸åŒå¯†é’¥è·¯å¾„çš„å¯¹è±¡å‡ºç°é—®é¢˜ã€‚</p><p>ä¸€ä¸ªæ›´å®‰å…¨ä¸”å…·æœ‰æ‰©å±•æ€§çš„æ–¹æ³•æ˜¯ä½¿ç”¨<code>content</code>æ¥ç¡®ä¿ä½ æ”¶åˆ°çš„é€šçŸ¥å°±æ˜¯å‘ç»™ä½ çš„è€Œä¸æ˜¯è¶…ç±»çš„ã€‚</p><p>ç±»ä¸­å”¯ä¸€å‘½åçš„é™æ€ï¼ˆstaticï¼‰å˜é‡çš„åœ°å€æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„contentã€‚åœ¨è¶…ç±»æˆ–å­ç±»ä¸­ä»¥ç±»ä¼¼çš„æ–¹å¼é€‰æ‹©çš„ä¸Šä¸‹æ–‡ä¸å¤ªå¯èƒ½é‡å ã€‚æ‚¨å¯ä»¥ä¸ºæ•´ä¸ªç±»é€‰æ‹©åŒä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œå¹¶æ ¹æ®é€šçŸ¥æ¶ˆæ¯ä¸­çš„key pathå­—ç¬¦ä¸²æ¥ç¡®å®šæ›´æ”¹çš„å†…å®¹ï¼›æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä¸ºæ¯ä¸ªè§‚å¯Ÿåˆ°çš„å¯†é’¥è·¯å¾„åˆ›å»ºä¸åŒçš„ä¸Šä¸‹æ–‡ï¼Œä»è€Œå®Œå…¨ç»•è¿‡å­—ç¬¦ä¸²æ¯”è¾ƒçš„éœ€è¦ï¼Œä»è€Œå®ç°æ›´æœ‰æ•ˆçš„é€šçŸ¥è§£æã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)registerAsObserver &#123;</span><br><span class="line">    BankAccount *myAccount = [[BankAccount alloc] init];</span><br><span class="line">    [myAccount addObserver:<span class="keyword">self</span> forKeyPath:<span class="string">@&quot;currBalance&quot;</span> options:<span class="built_in">NSKeyValueObservingOptionInitial</span> | <span class="built_in">NSKeyValueObservingOptionNew</span> | <span class="built_in">NSKeyValueObservingOptionOld</span> | <span class="built_in">NSKeyValueObservingOptionPrior</span> context:PersonAccountBalanceContext];</span><br><span class="line">    myAccount.currBalance = @<span class="number">100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œ<strong>é”®å€¼è§‚å¯Ÿ<code>addObserver:forKeyPath:options:context:</code>æ–¹æ³•ä¸å¯¹è§‚å¯Ÿè€…ã€è¢«è§‚å¯Ÿçš„å¯¹è±¡ã€ä¸Šä¸‹æ–‡ä¿æŒå¼ºå¼•ç”¨ã€‚å¦‚éœ€è¦ï¼Œä½ åº”è¯¥å¯¹å®ƒä»¬ä¿æŒå¼ºå¼•ç”¨ã€‚</strong></p><h3 id="æ¥å—æ”¹å˜çš„é€šçŸ¥"><a href="#æ¥å—æ”¹å˜çš„é€šçŸ¥" class="headerlink" title="æ¥å—æ”¹å˜çš„é€šçŸ¥"></a>æ¥å—æ”¹å˜çš„é€šçŸ¥</h3><p>å½“å¯¹è±¡çš„è¢«è§‚å¯Ÿå±æ€§å€¼æ”¹å˜çš„æ—¶å€™ï¼Œè§‚å¯Ÿè€…å¯¹è±¡ä¼šæ”¶åˆ°<code>observeValueForKeyPath:ofObject:change:context:</code>æ¶ˆæ¯ã€‚æ‰€æœ‰çš„è§‚å¯Ÿè€…å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•ã€‚</p><p>è§‚å¯Ÿå¯¹è±¡æä¾›è§¦å‘é€šçŸ¥çš„key pathï¼Œè‡ªèº«ä½œä¸º<code>object</code>ï¼Œ<code>change</code>å­—å…¸åŒ…å«æ”¹å˜çš„ç»†èŠ‚ï¼Œå¹¶ä¸”<code>context</code>æŒ‡é’ˆå°±æ˜¯è§‚å¯Ÿè€…è¢«æ³¨å†Œæ—¶æä¾›çš„ã€‚</p><p><code>NSKeyValueChangeKindKey</code>æä¾›æ”¹å˜ç±»å‹çš„ä¿¡æ¯ã€‚<code>NSKeyValueChangeKindKey</code>è¡¨ç¤ºè§‚å¯Ÿå¯¹è±¡çš„å€¼å·²æ›´æ”¹ã€‚å¦‚æœè§‚å¯Ÿçš„å±æ€§æ˜¯ä¸€ä¸ªå¯¹å¤šçš„å…³ç³»ï¼Œ<code>NSKeyValueChangeInsertion</code>/<code>NSKeyValueChangeRemoval</code>/<code>NSKeyValueChangeReplacement</code>åˆ†åˆ«è¡¨ç¤ºé›†åˆçš„æ’å…¥ã€åˆ é™¤ã€æ›¿æ¢æ“ä½œã€‚<code>NSKeyValueChangeIndexesKey</code>è¡¨ç¤ºé›†åˆä¸­å·²æ›´æ”¹å†…å®¹çš„<code>NSIndexSet</code>ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)observeValueForKeyPath:(<span class="built_in">NSString</span> *)keyPath ofObject:(<span class="keyword">id</span>)object change:(<span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSKeyValueChangeKey</span>,<span class="keyword">id</span>&gt; *)change context:(<span class="keyword">void</span> *)context &#123;</span><br><span class="line">    <span class="keyword">if</span> (context == PersonAccountBalanceContext) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;PersonAccountBalanceContext å¯¹åº”çš„å±æ€§æ”¹å˜äº†&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (context == PersonAccountTransactionContext) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([change[<span class="built_in">NSKeyValueChangeKindKey</span>] unsignedIntValue] == <span class="built_in">NSKeyValueChangeSetting</span>) &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;é›†åˆå†…å®¹èµ‹å€¼ ç´¢å¼•ä¸ºï¼š%@&quot;</span>, change[<span class="built_in">NSKeyValueChangeIndexesKey</span>]);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([change[<span class="built_in">NSKeyValueChangeKindKey</span>] unsignedIntValue] == <span class="built_in">NSKeyValueChangeInsertion</span>) &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;é›†åˆå†…å®¹æ’å…¥ ç´¢å¼•ä¸ºï¼š%@&quot;</span>, change[<span class="built_in">NSKeyValueChangeIndexesKey</span>]);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([change[<span class="built_in">NSKeyValueChangeKindKey</span>] unsignedIntValue] == <span class="built_in">NSKeyValueChangeRemoval</span>) &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;é›†åˆå†…å®¹åˆ é™¤ ç´¢å¼•ä¸ºï¼š%@&quot;</span>, change[<span class="built_in">NSKeyValueChangeIndexesKey</span>]);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([change[<span class="built_in">NSKeyValueChangeKindKey</span>] unsignedIntValue] == <span class="built_in">NSKeyValueChangeReplacement</span>) &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;é›†åˆå†…å®¹æ›¿æ¢ ç´¢å¼•ä¸ºï¼š%@&quot;</span>, change[<span class="built_in">NSKeyValueChangeIndexesKey</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç§»é™¤è§‚å¯Ÿè€…å¯¹è±¡"><a href="#ç§»é™¤è§‚å¯Ÿè€…å¯¹è±¡" class="headerlink" title="ç§»é™¤è§‚å¯Ÿè€…å¯¹è±¡"></a>ç§»é™¤è§‚å¯Ÿè€…å¯¹è±¡</h3><p>é€šè¿‡æƒ³è§‚å¯Ÿè€…å‘é€<code>removeObserver:forKeyPath:context</code>æ¶ˆæ¯æ¥ç§»é™¤è§‚å¯Ÿè€…å¯¹è±¡ã€‚æ”¶åˆ°è¯¥æ¶ˆæ¯åï¼Œè§‚å¯Ÿè€…å¯¹è±¡å°†ä¸å†æ¥æ”¶ä»»ä½•<code>observerValueForKeyPath:ofObject:change:context</code>ä¸­æŒ‡å®škey path/objectçš„æ¶ˆæ¯ã€‚</p><p>åˆ é™¤è§‚å¯Ÿè€…æ—¶ï¼Œæ³¨æ„ï¼š</p><ul><li><strong>ç§»é™¤å’Œæ·»åŠ çš„æ–¹æ³•è¦ä¿æŒå¯¹ç§°</strong>ï¼Œå¦åˆ™ä¼šå¼•å‘å¼‚å¸¸ã€‚å¦‚æœæ— æ³•ä¿æŒå¯¹ç§°ï¼Œåˆ™æŠŠç§»é™¤çš„æ–¹æ³•æ”¾åˆ°try/catchå—ä¸­ã€‚</li><li>å¯¹è±¡é‡Šæ”¾æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨æŠŠè‡ªå·±ä»è§‚å¯Ÿè€…ä¸­ç§»é™¤ï¼Œæ­¤æ—¶è¢«è§‚å¯Ÿè€…ç»§ç»­å‘é€é€šçŸ¥ã€‚ä½†æ˜¯å°±åƒä»»ä½•å…¶ä»–æ¶ˆæ¯ä¸€æ ·ï¼Œæ”¹å˜çš„é€šçŸ¥å‘é€ç»™äº†å·²ç»é‡Šæ”¾çš„å¯¹è±¡ä¼šè§¦å‘å†…å­˜è®¿é—®å¼‚å¸¸ã€‚å› æ­¤ï¼Œ<strong>åŠ¡å¿…åœ¨è§‚å¯Ÿè€…ä»å†…å­˜ä¸­æ¶ˆå¤±å‰ï¼Œå°†å…¶ç§»é™¤</strong></li><li>åè®®æ²¡æœ‰æä¾›æ–¹æ³•æ¥æŸ¥è¯¢ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯è§‚å¯Ÿè€…æˆ–è¢«è§‚å¯Ÿè€…ã€‚ä½ å¿…é¡»åœ¨ä»£ç ä¸­è‡ªè¡Œé¿å…é”™è¯¯ã€‚å…¸å‹çš„æ–¹æ¡ˆæ˜¯åœ¨è§‚å¯Ÿè€…åˆå§‹åŒ–æœŸé—´ï¼ˆinitæˆ–deallocï¼‰æ³¨å†Œä¸ºè§‚å¯Ÿè€…ï¼Œå¹¶åœ¨é‡Šæ”¾æ—¶ï¼ˆdeallocï¼‰æ³¨é”€ã€‚</li></ul><h2 id="å…¼å®¹KVO"><a href="#å…¼å®¹KVO" class="headerlink" title="å…¼å®¹KVO"></a>å…¼å®¹KVO</h2><p>ä¸ºäº†è®©ç‰¹å®šå±æ€§ç¬¦åˆKVOæ ‡å‡†ï¼Œclasså¿…é¡»æ»¡è¶³ä¸€ä¸‹å†…å®¹ï¼š</p><ul><li>è¯¥ç±»å¿…é¡»æ˜¯ç¬¦åˆè¯¥å±æ€§çš„KVC</li><li>è¯¥ç±»ä¼šä¸ºè¯¥å±æ€§è§¦å‘KVOé€šçŸ¥</li><li>ç›¸å…³çš„keyå·²ç»è¢«æˆåŠŸæ³¨å†Œ</li></ul><p>æœ‰ä¸¤ç§æŠ€æœ¯å¯ç¡®ä¿å‘å‡ºKVOé€šçŸ¥ã€‚NSObjectæä¾›è‡ªåŠ¨æ”¯æŒï¼Œé»˜è®¤æƒ…å†µä¸‹å¯ç”¨äºç¬¦åˆé”®å€¼ç¼–ç çš„ç±»çš„æ‰€æœ‰å±æ€§ã€‚é€šå¸¸ï¼Œå¦‚æœä½ éµå®ˆCocoaç¼–ç å’Œå‘½åçº¦å®šï¼Œåˆ™å¯ä»¥ä½¿ç”¨è‡ªåŠ¨é€šçŸ¥ï¼Œè€Œä¸å¿…ç¼–å†™ä»»ä½•ä»£ç ã€‚</p><p>æ‰‹åŠ¨æ–¹å¼ä¸ºé€šçŸ¥è§¦å‘æ—¶æä¾›äº†æ›´å¤šçš„æ§åˆ¶æƒï¼Œå¹¶ä¸”éœ€è¦é¢å¤–ç¼–ç ã€‚ä½ å¯ä»¥é€šè¿‡å®ç°<code>automaticallyNotifiesObserversForKey:</code>æ¥æ§åˆ¶å­ç±»å±æ€§çš„è‡ªåŠ¨é€šçŸ¥ã€‚</p><h3 id="è‡ªåŠ¨é€šçŸ¥"><a href="#è‡ªåŠ¨é€šçŸ¥" class="headerlink" title="è‡ªåŠ¨é€šçŸ¥"></a>è‡ªåŠ¨é€šçŸ¥</h3><p>ä¸‹åˆ—æ–¹æ³•åˆ—ä¸¾äº†ä¼šè§¦å‘è‡ªåŠ¨é€šçŸ¥çš„ä¸€äº›åœºæ™¯ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è°ƒç”¨è®¿é—®å™¨æ–¹æ³•ã€‚</span></span><br><span class="line">[account setNameï¼š@â€œSavingsâ€];</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ä½¿ç”¨setValueï¼šforKeyï¼šã€‚</span></span><br><span class="line">[account setValueï¼š@â€œSavingsâ€forKeyï¼š@â€œnameâ€];</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ä½¿ç”¨å¯†é’¥è·¯å¾„ï¼Œå…¶ä¸­&#x27;account&#x27;æ˜¯&#x27;document&#x27;çš„kvcå…¼å®¹å±æ€§ã€‚</span></span><br><span class="line">[document setValueï¼š@â€œSavingsâ€forKeyPathï¼š@â€œaccount.nameâ€];</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ä½¿ç”¨mutableArrayValueForKeyï¼šæ£€ç´¢å…³ç³»ä»£ç†å¯¹è±¡ã€‚</span></span><br><span class="line">Transaction * newTransaction = &lt;ï¼ƒä¸ºå¸æˆ·ï¼ƒ&gt;åˆ›å»ºæ–°äº¤æ˜“;</span><br><span class="line"><span class="built_in">NSMutableArray</span> * transactions = [account mutableArrayValueForKeyï¼š@â€œtransactionsâ€];</span><br><span class="line">[transactions addObjectï¼šnewTransaction];</span><br></pre></td></tr></table></figure><h3 id="æ‰‹åŠ¨é€šçŸ¥"><a href="#æ‰‹åŠ¨é€šçŸ¥" class="headerlink" title="æ‰‹åŠ¨é€šçŸ¥"></a>æ‰‹åŠ¨é€šçŸ¥</h3><p>æœ‰äº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³è¦æ§åˆ¶é€šçŸ¥çš„è¿‡ç¨‹ï¼Œä¾‹å¦‚ï¼Œæœ€å¤§é™åº¦å‡å°‘å› åº”ç”¨ç¨‹åºç‰¹å®šåŸå› è€Œä¸å¿…è¦çš„è§¦å‘é€šçŸ¥ï¼Œæˆ–æŠŠä¸€ç»„é€šçŸ¥æ•´åˆåˆ°ä¸€ä¸ªã€‚</p><p>æ‰‹åŠ¨é€šçŸ¥å’Œè‡ªåŠ¨é€šçŸ¥ä¸æ˜¯äº’æ–¥çš„ã€‚æ‰‹åŠ¨å’Œè‡ªåŠ¨çš„é€šçŸ¥å¯ä»¥åŒæ—¶è§¦å‘ã€‚å¦‚æœä½ åªæƒ³è¦æ‰‹åŠ¨è§¦å‘ï¼Œåˆ™éœ€è¦é€šè¿‡é‡å†™<code>automaticallyNotifiesObserversForKey:</code>æ–¹æ³•æ¥ç¦æ­¢è‡ªåŠ¨é€šçŸ¥ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">BOOL</span>)automaticNotifiesObserversForKey:(<span class="built_in">NSString</span> *)theKey &#123;</span><br><span class="line">    <span class="built_in">BOOL</span> automatic = <span class="literal">NO</span>;</span><br><span class="line">    <span class="keyword">if</span> ([theKey isEqualToStringï¼š@â€œbalanceâ€]) &#123;</span><br><span class="line">        automatic = <span class="literal">NO</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        automatic = [<span class="keyword">super</span> automaticNotifiesObserversForKey: theKey];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> automatic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**è¦å®ç°æ‰‹åŠ¨è§‚å¯Ÿè€…é€šçŸ¥ï¼Œä½ è¦åœ¨å€¼æ”¹å˜å‰è°ƒç”¨<code>willChangeValueForKey:</code>ï¼Œå¹¶åœ¨å€¼æ”¹å˜åè°ƒç”¨<code>didChangeValueForKey:</code>ã€‚æœ‰ä¸‰ç»„ç±»ä¼¼çš„æ–¹æ³•ï¼š</p><ul><li><code>willChangeValueForKey:</code>å’Œ<code>didChangeValueForKey:</code>ã€‚ç”¨äºå•ä¸ªå¯¹è±¡</li><li><code>willChange:valuesAtIndexes:forKey:</code>å’Œ<code>didChange:valuesAtIndexes:forKey:</code>ã€‚ç”¨äºæœ‰åºé›†åˆ</li><li><code>willChangeValueForKey:withSetMutation:usingObjects:</code>å’Œ<code>willChangeValueForKey:withSetMutation:usingObjects:</code>ã€‚ç”¨äºæ— é¡»é›†åˆ</li></ul><p>ä¸‹é¢åœ¨è®¿é—®å™¨æ–¹æ³•ä¸­æ‰‹åŠ¨è§¦å‘ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)setBalance:(<span class="keyword">double</span>)theBalance &#123;</span><br><span class="line">    [<span class="keyword">self</span> willChangeValueForKey:<span class="string">@&quot;balance&quot;</span>];</span><br><span class="line">    _balance = theBalance;</span><br><span class="line">    [<span class="keyword">self</span> didChangeValueForKey:<span class="string">@&quot;balance&quot;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†å‡å°‘ä¸å¿…è¦çš„é€šçŸ¥ï¼Œå¯ä»¥å…ˆæ£€æŸ¥å€¼æ˜¯å¦æ”¹å˜äº†ï¼Œç„¶åå†³å®šæ˜¯å¦å‘é€šçŸ¥ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)setBalance:(<span class="keyword">double</span>)theBalance &#123;</span><br><span class="line">    <span class="keyword">if</span> (theBalance != _balance) &#123;</span><br><span class="line">        [<span class="keyword">self</span> willChangeValueForKey:<span class="string">@&quot;balance&quot;</span>];</span><br><span class="line">        _balance = theBalance;</span><br><span class="line">        [<span class="keyword">self</span> didChangeValueForKey:<span class="string">@&quot;balance&quot;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªæ“ä½œå¯¼è‡´å¤šä¸ªkeyå‘ç”Ÿæ”¹å˜ï¼Œå¿…é¡»åµŒå¥—å‘é€é€šçŸ¥ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)setBalance:(<span class="keyword">double</span>)theBalance &#123;</span><br><span class="line">    [<span class="keyword">self</span> willChangeValueForKey:<span class="string">@&quot;balance&quot;</span>];</span><br><span class="line">    [<span class="keyword">self</span> willChangeValueForKey:<span class="string">@&quot;itemChanged&quot;</span>];</span><br><span class="line">    _balance = theBalance;</span><br><span class="line">    _itemChanged = _itemChanged+<span class="number">1</span>;</span><br><span class="line">    [<span class="keyword">self</span> didChangeValueForKey:<span class="string">@&quot;itemChanged&quot;</span>];</span><br><span class="line">    [<span class="keyword">self</span> didChangeValueForKey:<span class="string">@&quot;balance&quot;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æœ‰åºçš„to-manyå…³ç³»ä¸­ï¼Œé™¤äº†æŒ‡å®šæ›´æ”¹çš„keyï¼Œè¿˜ä¸è®¸æŒ‡å®šæ›´æ”¹çš„ç±»å‹å’Œæ‰€æ¶‰åŠå¯¹è±¡çš„ç´¢å¼•ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)removeTransactionsAtIndexes:(<span class="built_in">NSIndexSet</span> *)indexes &#123;</span><br><span class="line">    [<span class="keyword">self</span> willChange:<span class="built_in">NSKeyValueChangeRemoval</span></span><br><span class="line">        valuesAtIndexes:indexes forKey:<span class="string">@&quot;transactions&quot;</span>];</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Remove the transaction objects at the specified indexes.</span></span><br><span class="line"> </span><br><span class="line">    [<span class="keyword">self</span> didChange:<span class="built_in">NSKeyValueChangeRemoval</span></span><br><span class="line">        valuesAtIndexes:indexes forKey:<span class="string">@&quot;transactions&quot;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ³¨å†Œä»å±keys"><a href="#æ³¨å†Œä»å±keys" class="headerlink" title="æ³¨å†Œä»å±keys"></a>æ³¨å†Œä»å±keys</h2><p>åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œä¸€ä¸ªå±æ€§çš„å€¼å–å†³äºå¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–å±æ€§çš„å€¼ã€‚å¦‚æœä¸€ä¸ªå±æ€§çš„å€¼å‘ç”Ÿæ›´æ”¹ï¼Œåˆ™è¿˜åº”æ ‡è®°æ´¾ç”Ÿå±æ€§çš„å€¼ä»¥è¿›è¡Œæ›´æ”¹ã€‚</p><h3 id="To-One-å…³ç³»"><a href="#To-One-å…³ç³»" class="headerlink" title="To-One å…³ç³»"></a>To-One å…³ç³»</h3><p>è¦ä¸ºä¸€å¯¹ä¸€å…³ç³»è‡ªåŠ¨è§¦å‘é€šçŸ¥ï¼Œåº”è¯¥é‡å†™<code>keyPathsForValuesAffectingValueForKey</code>æˆ–å®ç°ä¸€ä¸ªåˆé€‚çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•éµå¾ªå®ƒä¸ºæ³¨å†Œä¾èµ–é”®å®šä¹‰çš„æ¨¡å¼ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>fullName</code>å–å†³äº<code>firstName</code>å’Œ<code>lastName</code>ã€‚è¿”å›<code>fullName</code>çš„æ–¹æ³•å¯ä»¥å†™æˆå¦‚ä¸‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- ï¼ˆ<span class="built_in">NSString</span> *ï¼‰fullName &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormatï¼š@â€œï¼…@ï¼…@â€ï¼ŒfirstNameï¼ŒlastName];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“<code>firstName</code>æˆ–<code>lastName</code>å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¿…é¡»é€šçŸ¥è§‚å¯Ÿ<code>fullName</code>å±æ€§çš„ç¨‹åºï¼Œå› ä¸ºå®ƒä»¬å½±å“è¿™ä¸ªå±æ€§çš„å€¼ã€‚</p><p>ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯é‡å†™<code>keyPathsForValuesAffectingValueForKey</code>æ¥æŒ‡å®š<code>fullName</code>å±æ€§ä¾èµ–äº<code>lastName</code>å’Œ<code>firstName</code>ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">NSSet</span> *)keyPathsForValuesAffectingValueForKey:(<span class="built_in">NSString</span> *)key &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">NSSet</span> *keyPaths = [<span class="keyword">super</span> keyPathsForValuesAffectingValueForKey:key];</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> ([key isEqualToString:<span class="string">@&quot;fullName&quot;</span>]) &#123;</span><br><span class="line">        <span class="built_in">NSArray</span> *affectingKeys = @[<span class="string">@&quot;lastName&quot;</span>, <span class="string">@&quot;firstName&quot;</span>];</span><br><span class="line">        keyPaths = [keyPaths setByAddingObjectsFromArray:affectingKeys];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> keyPaths;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å†™é€šå¸¸åº”è¯¥è°ƒç”¨superå¹¶è¿”å›ä¸€ä¸ªé›†åˆï¼Œä»¥å…å½±å“è¶…ç±»ä¸­å¯¹æ­¤æ–¹æ³•çš„é‡å†™ã€‚</p><p>é€šè¿‡é‡å†™<code>keyPathsForValuesAffecting&lt;Key&gt;</code>ä¹Ÿå¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">NSSet</span> *)keyPathsForValuesAffectingFullName &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSSet</span> setWithObjects:<span class="string">@&quot;lastName&quot;</span>, <span class="string">@&quot;firstName&quot;</span>, <span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="To-many-å…³ç³»"><a href="#To-many-å…³ç³»" class="headerlink" title="To-many å…³ç³»"></a>To-many å…³ç³»</h3><p><code>keyPathsForValuesAffectingValueForKey:</code>æ–¹æ³•ä¸æ”¯æŒto-manyå…³ç³»çš„key pathsã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸¤ç§æ–¹æ¡ˆæ¥å¤„ç†to-many å…³ç³»ï¼š</p><ol><li>ä½¿ç”¨key-value observingæ³¨å†Œçˆ¶é¡¹ä½œä¸ºå­é¡¹çš„ç›¸å…³å±æ€§è§‚å¯Ÿè€…ã€‚å½“å­å¯¹è±¡æ·»åŠ åˆ°å…³ç³»æˆ–ä»å…³ç³»ä¸­åˆ é™¤çš„æ—¶å€™ï¼Œä½ å¿…é¡»æ·»åŠ æˆ–åˆ é™¤çˆ¶å¯¹è±¡ã€‚åœ¨<code>observeValueForKeyPath:ofObject:change:context:</code>æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥æ›´æ–°ä¾èµ–å€¼ä»¥ç›¸åº”æ›´æ”¹ï¼Œå¦‚ä¸‹ï¼š<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span> addObserver:<span class="keyword">self</span> forKeyPath:<span class="string">@&quot;transactions&quot;</span> options:<span class="built_in">NSKeyValueObservingOptionNew</span> context:<span class="literal">NULL</span>];</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)observeValueForKeyPath:(<span class="built_in">NSString</span> *)keyPath ofObject:(<span class="keyword">id</span>)object change:(<span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSKeyValueChangeKey</span>,<span class="keyword">id</span>&gt; *)change context:(<span class="keyword">void</span> *)context &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;amount = %@&quot;</span>, [<span class="keyword">self</span> valueForKeyPath:<span class="string">@&quot;transactions.@sum.amount&quot;</span>]);</span><br><span class="line">    [<span class="keyword">self</span> setTotalConsumption:[<span class="keyword">self</span> valueForKeyPath:<span class="string">@&quot;transactions.@sum.amount&quot;</span>]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>åœ¨Core Dataä¸­ï¼Œåˆ™å¯ä»¥å°†çˆ¶é¡¹ä½œä¸ºå…¶æ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡çš„è§‚å¯Ÿè€…æ³¨å†Œåˆ°åº”ç”¨ç¨‹åºçš„é€šçŸ¥ä¸­å¿ƒã€‚çˆ¶é¡¹åº”ä»¥ç±»ä¼¼äºé”®å€¼è§‚å¯Ÿçš„æ–¹å¼å›åº”å­©å­ä»¬å‘å¸ƒçš„ç›¸å…³å˜æ›´é€šçŸ¥ã€‚</li></ol><h2 id="Key-Value-Observing-çš„å®ç°ç»†èŠ‚"><a href="#Key-Value-Observing-çš„å®ç°ç»†èŠ‚" class="headerlink" title="Key-Value Observing çš„å®ç°ç»†èŠ‚"></a>Key-Value Observing çš„å®ç°ç»†èŠ‚</h2><p>è‡ªåŠ¨key-value observing æ˜¯ä½¿ç”¨ä¸€ç§å«åš<em>isa-swizzling</em>çš„æŠ€æœ¯å®ç°çš„ã€‚</p><p><em>isa</em>æŒ‡é’ˆæŒ‡å‘ç»´æŠ¤ä¸€ä¸ªè°ƒåº¦è¡¨ï¼ˆdispatch tableï¼‰çš„å¯¹è±¡çš„ç±»ã€‚è¯¥è°ƒåº¦è¡¨åŒ…å«äº†æŒ‡å‘è¯¥ç±»å®ç°çš„æ–¹æ³•çš„æŒ‡é’ˆï¼Œä»¥åŠå…¶ä»–æ•°æ®ã€‚</p><p>å½“è§‚å¯Ÿè€…æ³¨å†Œå¯¹è±¡çš„å±æ€§æ—¶ï¼Œè§‚å¯Ÿå¯¹è±¡çš„isaæŒ‡é’ˆè¢«ä¿®æ”¹ï¼ŒæŒ‡å‘ä¸­é—´ç±»è€Œä¸æ˜¯çœŸæ­£çš„ç±»ã€‚å› æ­¤ï¼ŒisaæŒ‡é’ˆçš„å€¼ä¸ä¸€å®šåæ˜ å®ä¾‹çš„å®é™…ç±»ã€‚</p><p>æ°¸è¿œä¸è¦ä¾èµ–isaæŒ‡é’ˆæ¥ç¡®å®šç±»æˆå‘˜ã€‚è€Œåº”è¯¥ä½¿ç”¨<code>class</code>æ–¹æ³•æ¥å†³å®šå®ä¾‹æ‰€å±çš„ç±»ã€‚</p><h1 id="å‚è€ƒè¿æ¥"><a href="#å‚è€ƒè¿æ¥" class="headerlink" title="å‚è€ƒè¿æ¥"></a>å‚è€ƒè¿æ¥</h1><p><a href="https://github.com/shizhiang/KVC_KVO-Tutorial">ç¤ºä¾‹ä»£ç </a></p><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/KeyValueCoding/index.html#//apple_ref/doc/uid/10000107-SW1">KVC</a></p><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177-BCICJDHA">KVO</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSå†…å­˜ç®¡ç†</title>
      <link href="iOS-Memory-Management/"/>
      <url>iOS-Memory-Management/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡å†…å®¹æ˜¯å¯¹<a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011-SW1">Advanced Memory Management Programming Guide</a>ä¸­é‡ç‚¹å†…å®¹çš„æ€»ç»“</p><a id="more"></a><h2 id="å†…å­˜ç®¡ç†ç­–ç•¥"><a href="#å†…å­˜ç®¡ç†ç­–ç•¥" class="headerlink" title="å†…å­˜ç®¡ç†ç­–ç•¥"></a>å†…å­˜ç®¡ç†ç­–ç•¥</h2><h3 id="åŸºæœ¬å†…å­˜ç®¡ç†è§„åˆ™"><a href="#åŸºæœ¬å†…å­˜ç®¡ç†è§„åˆ™" class="headerlink" title="åŸºæœ¬å†…å­˜ç®¡ç†è§„åˆ™"></a>åŸºæœ¬å†…å­˜ç®¡ç†è§„åˆ™</h3><p>å†…å­˜ç®¡ç†æ¨¡å‹åŸºäºå¯¹è±¡æ‰€æœ‰æƒçš„ã€‚ä»»ä½•å¯¹è±¡å¯èƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ‰€æœ‰è€…ã€‚å¯¹è±¡åªè¦æœ‰è¶…è¿‡ä¸€ä¸ªæ‰€æœ‰è€…å°±ä¼šç»§ç»­å­˜åœ¨ï¼›å¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰æ‰€æœ‰è€…äº†ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿå°±ä¼šæŠŠå®ƒé”€æ¯ã€‚ä¸ºäº†è®©å¼€å‘è€…æ¸…æ¥šè‡ªå·±ä»€ä¹ˆæ—¶å€™æ‹¥æœ‰/ä¸æ‹¥æœ‰å¯¹è±¡ï¼ŒCocoaè®¾ç½®äº†ä¸€äº›è§„åˆ™ï¼š</p><ul><li>ä½ æ‹¥æœ‰ä½ åˆ›å»ºçš„å¯¹è±¡ - You own any object you create<blockquote><p>ä½¿ç”¨ä»¥â€allocâ€, â€œnewâ€, â€œcopyâ€, â€œmutableCopyâ€å¼€å¤´çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡</p></blockquote></li><li>ä½ å¯ä»¥ä½¿ç”¨retainæ¥è·å–å¯¹è±¡çš„æ‰€æœ‰æƒ<blockquote><p>å¯ä»¥åœ¨ä¸¤ç§æƒ…å†µä¸‹ä½¿ç”¨<code>retain</code>ï¼šï¼ˆ1ï¼‰åœ¨å­˜å‚¨å™¨æ–¹æ³•çš„å®ç°æˆ–è€…<code>init</code>æ–¹æ³•ä¸­ï¼Œè·å–è¦ä½œä¸ºå±æ€§å€¼å­˜å‚¨çš„å¯¹è±¡çš„æ‰€æœ‰æƒï¼›ï¼ˆ2ï¼‰é¿å…æŸäº›æ“ä½œçš„å‰¯ä½œç”¨é€ æˆå¯¹è±¡ä¸å¯ç”¨</p></blockquote></li><li>å½“ä½ ä¸å†éœ€è¦çš„æ—¶å€™ï¼Œä¸€å®šè¦æ”¾å¼ƒå¯¹è±¡æ‰€æœ‰æƒ<blockquote><p>ç»™å¯¹è±¡å‘é€<code>release</code>/<code>autorelease</code>æ¶ˆæ¯æ¥æ”¾å¼ƒæ‰€æœ‰æƒã€‚å› æ­¤ï¼Œåœ¨Cocoaæœ¯è¯­ä¸­ï¼ŒæŠŠæ”¾å¼ƒæ‰€æœ‰æƒç§°ä¸ºâ€releasingâ€ä¸€ä¸ªå¯¹è±¡</p></blockquote></li><li>ä¸€å®šä¸èƒ½æ”¾å¼ƒä½ æ²¡æœ‰æ‰€æœ‰æƒçš„å¯¹è±¡</li></ul><h2 id="å†…å­˜ç®¡ç†å®æˆ˜"><a href="#å†…å­˜ç®¡ç†å®æˆ˜" class="headerlink" title="å†…å­˜ç®¡ç†å®æˆ˜"></a>å†…å­˜ç®¡ç†å®æˆ˜</h2><h3 id="ä½¿ç”¨å­˜å‚¨å™¨æ–¹æ³•æ¥ä½¿å†…å­˜ç®¡ç†æ›´å®¹æ˜“"><a href="#ä½¿ç”¨å­˜å‚¨å™¨æ–¹æ³•æ¥ä½¿å†…å­˜ç®¡ç†æ›´å®¹æ˜“" class="headerlink" title="ä½¿ç”¨å­˜å‚¨å™¨æ–¹æ³•æ¥ä½¿å†…å­˜ç®¡ç†æ›´å®¹æ˜“"></a>ä½¿ç”¨å­˜å‚¨å™¨æ–¹æ³•æ¥ä½¿å†…å­˜ç®¡ç†æ›´å®¹æ˜“</h3><p>å¦‚æœä½ çš„ç±»æœ‰ä¸€ä¸ªå¯¹è±¡å±æ€§ï¼Œä½ å¿…é¡»ç¡®ä¿è¢«è®¾ç½®çš„å¯¹è±¡åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸ä¼šè¢«é‡Šæ”¾ã€‚å› æ­¤åœ¨å®ƒè¢«è®¾ç½®çš„æ—¶å€™ï¼Œä½ å¿…é¡»å£°æ˜å¯¹å®ƒçš„æ‰€æœ‰æƒã€‚å¹¶ä¸”ä½ å¿…é¡»ç¡®ä¿ä¹‹åæ”¾å¼ƒå¯¹å½“å‰æŒæœ‰å€¼çš„æ‰€æœ‰æƒã€‚è™½ç„¶è¿™æ ·åšæœ‰æ—¶å€™æ˜¯å†—é•¿ä¹å‘³çš„ï¼Œä½†æ˜¯å¦‚æœä½ åšæŒè¿™ç§æ–¹æ³•ï¼Œå°±å¯ä»¥æ˜¾è‘—å‡å°‘å†…å­˜ç®¡ç†é—®é¢˜ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@interface Counter : NSObject</span><br><span class="line">@property (nonatomic, retain) NSNumber *count;</span><br><span class="line">@end;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ª<code>property</code>å£°æ˜äº†ä¸€å¯¹å­˜å–å™¨æ–¹æ³•ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬åº”å½“è®©ç¼–è¯‘å™¨åˆæˆè¿™äº›æ–¹æ³•ï¼›ä½†æ˜¯ï¼Œçœ‹ä¸€ä¸‹å®ƒä»¬æ˜¯æ€ä¹ˆå®ç°çš„ä¼šå¾ˆæœ‰æ„ä¹‰ã€‚</p></blockquote><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSNumber</span> *)count &#123;</span><br><span class="line">    <span class="keyword">return</span> _count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>â€œgetâ€å­˜å–å™¨åªæ˜¯è¿”å›äº†åˆæˆçš„å®ä¾‹å˜é‡å¹¶ä¸éœ€è¦<code>retain</code>æˆ–è€…<code>release</code></p></blockquote><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)setCount:(<span class="built_in">NSNumber</span> *)newCount &#123;</span><br><span class="line">    [newCount <span class="keyword">retain</span>];</span><br><span class="line">    [_count release];</span><br><span class="line">    <span class="comment">// Make the new assignment.</span></span><br><span class="line">    _count = newCount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>â€œsetâ€å­˜å–å™¨éœ€è¦å…ˆ<code>retain</code>æ–°å€¼ï¼Œä¹‹å<code>release</code>æ—§å€¼ï¼Œæœ€åè¿›è¡Œèµ‹å€¼æ“ä½œã€‚ä¸ºäº†é¿å…å‰åæ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„æƒ…å†µä¸‹å‡ºç°æ„å¤–çš„é—®é¢˜ï¼Œå¿…é¡»è¦åœ¨<code>realse</code>ä¹‹å‰è°ƒç”¨<code>retain</code>ã€‚</p></blockquote><h3 id="ä¸è¦åœ¨åˆå§‹åŒ–å’Œdeallocæ–¹æ³•ä¸­ä½¿ç”¨å­˜å–å™¨æ–¹æ³•"><a href="#ä¸è¦åœ¨åˆå§‹åŒ–å’Œdeallocæ–¹æ³•ä¸­ä½¿ç”¨å­˜å–å™¨æ–¹æ³•" class="headerlink" title="ä¸è¦åœ¨åˆå§‹åŒ–å’Œdeallocæ–¹æ³•ä¸­ä½¿ç”¨å­˜å–å™¨æ–¹æ³•"></a>ä¸è¦åœ¨åˆå§‹åŒ–å’Œdeallocæ–¹æ³•ä¸­ä½¿ç”¨å­˜å–å™¨æ–¹æ³•</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        _count = [[<span class="built_in">NSNumber</span> alloc] initWithInteger:<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- initWithCount:(<span class="built_in">NSNumber</span> *)startingCount &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        _count = [startingCount <span class="keyword">copy</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)dealloc &#123;</span><br><span class="line">    [_count release];</span><br><span class="line">    [<span class="keyword">super</span> dealloc];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨å¼±å¼•ç”¨æ¥é¿å…å¾ªç¯å¼•ç”¨"><a href="#ä½¿ç”¨å¼±å¼•ç”¨æ¥é¿å…å¾ªç¯å¼•ç”¨" class="headerlink" title="ä½¿ç”¨å¼±å¼•ç”¨æ¥é¿å…å¾ªç¯å¼•ç”¨"></a>ä½¿ç”¨å¼±å¼•ç”¨æ¥é¿å…å¾ªç¯å¼•ç”¨</h3><p>åªæœ‰å½“å¯¹è±¡çš„æ‰€æœ‰å¼ºå¼•ç”¨éƒ½é‡Šæ”¾åå¯¹è±¡æ‰èƒ½è¢«é‡Šæ”¾ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡äº’ç›¸å¼ºå¼•ç”¨äº†å½¼æ­¤ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼Œè¿™æ ·å°±é€ æˆäº†<strong>å¾ªç¯å¼•ç”¨</strong><br><img src="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/MemoryMgmt/Art/retaincycles_2x.png" alt="å¾ªç¯å¼•ç”¨"><br>å¼±å¼•ç”¨å¯ä»¥è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚å¼±å¼•ç”¨æ˜¯<em>non-owning</em>çš„å…³ç³»ã€‚ä¸ºäº†ä¿æŒå¯¹è±¡è‡³å°‘æœ‰ä¸€ä¸ªå¼•ç”¨è€Œä¸è¢«é‡Šæ”¾ï¼Œä¸èƒ½æŠŠæ‰€æœ‰å¼•ç”¨éƒ½è®¾ç½®æˆå¼±å¼•ç”¨ã€‚å› æ­¤ï¼ŒCocoaå»ºç«‹äº†ä¸€ä¸ªæƒ¯ä¾‹ï¼Œâ€œparentâ€å¯¹è±¡å¯¹â€œchildrenâ€å¯¹è±¡æŒæœ‰å¼ºå¼•ç”¨ï¼Œè€Œchildrenå¯¹è±¡å¼±å¼•ç”¨parentå¯¹è±¡ã€‚å¦‚ä¸Šå›¾è¡¨ç¤ºçš„ä¸€æ ·ã€‚</p><p>å½“å‘å¼±å¼•ç”¨çš„å¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ä¸€å®šè¦æ¶ˆæ¯ã€‚å¦‚æœå‘å·²ç»é‡Šæ”¾çš„å…‘ç°å‘é€æ¶ˆæ¯æ—¶ä¼šå¼•èµ·å´©æºƒã€‚è¿™é‡Œç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šé€šçŸ¥ä¸­å¿ƒã€‚å½“å‘NotificationCenteræ³¨å†Œè§‚å¯Ÿè€…æ—¶ï¼Œé€šçŸ¥ä¸­å¿ƒä¼šæŒæœ‰è§‚å¯Ÿè€…çš„å¼±å¼•ç”¨ï¼Œå¦‚æœè§‚å¯Ÿè€…é‡Šæ”¾æ—¶æ²¡æœ‰ä¸»åŠ¨ä»é€šçŸ¥ä¸­å¿ƒç§»é™¤è‡ªå·±ï¼Œé€šçŸ¥ä¸­å¿ƒä¼šåœ¨ä¹‹åå‘è¢«é‡Šæ”¾æ‰çš„è§‚å¯Ÿè€…å‘é€æ¶ˆæ¯ï¼Œè¿™æ—¶å€™ä¼šå¼•èµ·å´©æºƒã€‚ï¼ˆæ–‡æ¡£ä¸­è¿˜æåˆ°äº†delegateï¼Œä½†æ˜¯åœ¨ARCä¸‹æˆ‘ä»¬ä½¿ç”¨weakæ¥ä¿®é¥°ï¼Œå°±ä¸ä¼šå¼•èµ·é—®é¢˜äº†ã€‚ï¼‰</p><h3 id="é¿å…æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡è¢«é‡Šæ”¾"><a href="#é¿å…æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡è¢«é‡Šæ”¾" class="headerlink" title="é¿å…æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡è¢«é‡Šæ”¾"></a>é¿å…æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡è¢«é‡Šæ”¾</h3><p>ä¸‹é¢ä¸¤ç§æƒ…å†µæ˜¯éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ï¼š</p><ol><li><p>å½“ä¸€ä¸ªå¯¹è±¡ä»é›†åˆä¸­ç§»é™¤çš„æ—¶å€™ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">heisenObject = [array objectAtIndex:n];</span><br><span class="line">[array removeObjectAtIndex:n];</span><br><span class="line"><span class="comment">// heisenObject could now be invalid.</span></span><br></pre></td></tr></table></figure><blockquote><p>å¯¹è±¡ä»é›†åˆä¸­ç§»é™¤çš„æ—¶å€™ï¼Œä¼šæ”¶åˆ°<code>release</code>æ¶ˆæ¯ï¼ˆè€Œä¸æ˜¯<code>autorelease</code>ï¼‰ã€‚å¦‚æœé›†åˆæ˜¯å¯¹è±¡çš„å”¯ä¸€æŒæœ‰è€…ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šè¢«ç«‹å³é‡Šæ”¾ã€‚</p></blockquote></li><li><p>â€œparent objectâ€é‡Šæ”¾</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">id</span> parent = &lt;<span class="meta">#create a parent object#&gt;;</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">heisenObject = [parent child] ;</span><br><span class="line">[parent release]; <span class="comment">// Or, for example: self.parent = nil;</span></span><br><span class="line"><span class="comment">// heisenObject could now be invalid.</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¸€ä¸ªå¯¹è±¡æ˜¯ç”±å¦ä¸€ä¸ªå¯¹è±¡ç”Ÿæˆçš„ï¼Œä¹‹åç›´æ¥æˆ–è€…é—´æ¥çš„é‡Šæ”¾äº†çˆ¶å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªé‡Šæ”¾å¯¼è‡´äº†çˆ¶å¯¹è±¡çš„é”€æ¯ï¼Œå¹¶ä¸”çˆ¶å¯¹è±¡æ˜¯å­å¯¹è±¡çš„å”¯ä¸€æŒæœ‰è€…ï¼Œé‚£ä¹ˆå­å¯¹è±¡ä¹Ÿä¼šåŒæ—¶è¢«é”€æ¯ã€‚</p></blockquote></li></ol><p>è¦æƒ³é¿å…è¿™äº›æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥<code>retain heisenObject</code>ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">heisenObject &#x3D; [[array objectAtIndex:n] retain];</span><br><span class="line">[array removeObjectAtIndex:n];</span><br><span class="line">&#x2F;&#x2F; Use heisenObject...</span><br><span class="line">[heisenObject release];</span><br></pre></td></tr></table></figure><h3 id="ä¸è¦ä½¿ç”¨deallocç®¡ç†ç¨€ç¼ºèµ„æº"><a href="#ä¸è¦ä½¿ç”¨deallocç®¡ç†ç¨€ç¼ºèµ„æº" class="headerlink" title="ä¸è¦ä½¿ç”¨deallocç®¡ç†ç¨€ç¼ºèµ„æº"></a>ä¸è¦ä½¿ç”¨deallocç®¡ç†ç¨€ç¼ºèµ„æº</h3><p>ä¸è¦åœ¨<code>dealloc</code>æ–¹æ³•ä¸­ç®¡ç†æ–‡ä»¶æè¿°ç¬¦ã€ç½‘ç»œè¿æ¥ã€ç¼“å­˜æˆ–è€…ç¼“å†²åŒºç­‰ç¨€æœ‰èµ„æºã€‚ç‰¹åˆ«æ˜¯ï¼Œç±»ä¸­çš„<code>dealloc</code>æ–¹æ³•ä¸æ˜¯ä½ è®¤ä¸ºä¼šè°ƒç”¨çš„æ—¶å€™å°±ä¼šè°ƒç”¨ã€‚<code>dealloc</code>çš„è°ƒç”¨å¯èƒ½ä¼šç”±äºbugæˆ–è€…åº”ç”¨â€œtear-downâ€é€ æˆå»¶è¿Ÿæˆ–è€…ä¸è°ƒç”¨ã€‚</p><p>ç›¸ååœ°ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªç±»çš„å®ä¾‹æ¥ç®¡ç†ç¨€ç¼ºèµ„æºï¼Œä½ åº”è¯¥æŠŠä½ çš„åº”ç”¨è®¾è®¡æˆå½“èµ„æºä¸åœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨â€œclean upâ€æ–¹æ³•æ¥æ¸…ç†èµ„æºï¼Œä¹‹åé‡Šæ”¾å®ä¾‹ï¼Œ<code>dealloc</code>ä¼šç´§æ¥ç€è°ƒç”¨ï¼Œè¿™æ ·çš„è¯ï¼Œå³ä½¿<code>dealloc</code>æ²¡æœ‰è°ƒç”¨ä¹Ÿä¸ä¼šå¼•èµ·å…¶ä»–é—®é¢˜ã€‚</p><p>å¦‚æœåœ¨<code>dealloc</code>ä¸­ç®¡ç†ç¨€ç¼ºèµ„æºå¯èƒ½ä¼šå¼•èµ·å‡ ä¸ªé—®é¢˜ï¼š</p><ol><li>å¯¹è±¡å›¾æ‹†å¸çš„é¡ºåºä¾èµ–æ€§<br> å¯¹è±¡å›¾çš„æ‹†å¸é“¾æ˜¯æ²¡æœ‰å›ºå®šé¡ºåºçš„ã€‚</li><li>ä¸å›æ”¶ç¨€ç¼ºèµ„æº<br> å†…å­˜æ³„éœ²æ˜¯åº”è¯¥è¢«è§£å†³çš„bugï¼Œä½†æ˜¯ä»–ä»¬ä¸ä¼šç«‹å³è‡´å‘½ã€‚å¦‚æœç¨€ç¼ºèµ„æºæ²¡æœ‰æŒ‰ç…§é¢„å…ˆè®¾è®¡çš„æ­£å¸¸é‡Šæ”¾ï¼Œå¯èƒ½ä¼šå¼•èµ·æ›´ä¸¥é‡çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œå¦‚æœåº”ç”¨ç¨‹åºçš„æ–‡ä»¶æè¿°ç¬¦è€—å°½äº†ï¼Œç”¨æˆ·å¯èƒ½å°†æ— æ³•ä¿å­˜æ•°æ®ã€‚</li><li>åœ¨é”™è¯¯çš„çº¿ç¨‹ä¸Šæ‰§è¡Œæ¸…ç†é€»è¾‘<br> å¦‚æœä¸€ä¸ªå¯¹è±¡åœ¨æ„å¤–æ—¶é—´è‡ªåŠ¨é‡Šæ”¾ï¼Œå®ƒå°†åœ¨å®ƒç¢°å·§æ‰€åœ¨çš„ä»»ä½•çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ± å—ä¸­è¢«é‡Šæ”¾ã€‚å¯¹äºåªèƒ½ä»ä¸€ä¸ªçº¿ç¨‹è§¦åŠçš„èµ„æºï¼Œè¿™ä¸­æƒ…å†µæ˜¯éå¸¸ä¸¥é‡çš„é—®é¢˜ã€‚</li></ol><h3 id="é›†åˆæ‹¥æœ‰å®ƒä»¬åŒ…å«çš„å¯¹è±¡"><a href="#é›†åˆæ‹¥æœ‰å®ƒä»¬åŒ…å«çš„å¯¹è±¡" class="headerlink" title="é›†åˆæ‹¥æœ‰å®ƒä»¬åŒ…å«çš„å¯¹è±¡"></a>é›†åˆæ‹¥æœ‰å®ƒä»¬åŒ…å«çš„å¯¹è±¡</h3><p>å½“æŠŠä¸€ä¸ªå¯¹è±¡æ”¾åˆ°é›†åˆä¸­ï¼ˆä¾‹å¦‚arrayï¼Œdictionaryï¼Œsetï¼‰ï¼Œé›†åˆä¼šæŒæœ‰è¿™ä¸ªå¯¹è±¡ã€‚å½“å¯¹è±¡ä»é›†åˆä¸­ç§»é™¤æˆ–è€…é›†åˆæœ¬èº«è¢«é‡Šæ”¾çš„æ—¶å€™ï¼Œé›†åˆä¼šæ”¾å¼ƒæ‰€æœ‰æƒã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªâ€œnumbersâ€çš„æ•°ç»„æ—¶ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSMutableArray</span> *array = &lt;#Get a <span class="keyword">mutable</span> array#&gt;;</span><br><span class="line"><span class="built_in">NSUInteger</span> i;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">NSNumber</span> *convenienceNumber = [<span class="built_in">NSNumber</span> numberWithInteger:i];</span><br><span class="line">    [array addObject:convenienceNumber];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·åšï¼Œä½ æ²¡æœ‰è°ƒç”¨<code>alloc</code>ï¼Œå› æ­¤ä¸éœ€è¦è°ƒç”¨<code>release</code>ã€‚è¿™é‡Œä¹Ÿä¸éœ€è¦â€œretainâ€è¿™äº›æ–°çš„numbersï¼Œå› ä¸ºæ•°ç»„ä¼šè¿™æ ·åšã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">NSMutableArray *array &#x3D; &lt;#Get a mutable array#&gt;;</span><br><span class="line">NSUInteger i;</span><br><span class="line">&#x2F;&#x2F; ...</span><br><span class="line">for (i &#x3D; 0; i &lt; 10; i++) &#123;</span><br><span class="line">    NSNumber *allocedNumber &#x3D; [[NSNumber alloc] initWithInteger:i];</span><br><span class="line">    [array addObject:allocedNumber];</span><br><span class="line">    [allocedNumber release];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼éœ€è¦åœ¨<code>for</code>å¾ªç¯å†…<code>[allocedNumber release]</code>æ¥åŒ¹é…<code>alloc</code>ï¼Œå¦åˆ™çš„è¯<code>allocedNumber</code>å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å°±æ— æ³•åŒ¹é…äº†ã€‚</p><h3 id="æ‰€æœ‰æƒç­–ç•¥æ˜¯ä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥å®ç°çš„"><a href="#æ‰€æœ‰æƒç­–ç•¥æ˜¯ä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥å®ç°çš„" class="headerlink" title="æ‰€æœ‰æƒç­–ç•¥æ˜¯ä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥å®ç°çš„"></a>æ‰€æœ‰æƒç­–ç•¥æ˜¯ä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥å®ç°çš„</h3><ul><li>åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¼•ç”¨è®¡æ•°ä¸º1</li><li>å‘å¯¹è±¡å‘é€<code>retain</code>æ¶ˆæ¯æ—¶ï¼Œå¼•ç”¨è®¡æ•°+1</li><li>å‘å¯¹è±¡å‘é€<code>release</code>æ¶ˆæ¯æ—¶ï¼Œå¼•ç”¨è®¡æ•°-1ã€‚å‘å¯¹è±¡å‘é€<code>autorelease</code>æ¶ˆæ¯æ—¶ï¼Œå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¼šåœ¨autorelease pool blockçš„ç»“å°¾å¤„-1</li><li>å¼•ç”¨è®¡æ•°å‡åˆ°0æ—¶ï¼Œå¯¹è±¡è¢«é”€æ¯</li></ul><blockquote><p>ä¸è¦ä½¿ç”¨<code>retainCount</code>æ¥ç¡®å®šå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå®ƒæ˜¯ä¸å‡†ç¡®çš„ã€‚åº”è¯¥ä½¿ç”¨å¼•ç”¨è®¡æ•°è§„åˆ™ç»“åˆä»£ç æ¥åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ã€‚</p></blockquote><h2 id="ä½¿ç”¨Autorelease-Pool-Blocks"><a href="#ä½¿ç”¨Autorelease-Pool-Blocks" class="headerlink" title="ä½¿ç”¨Autorelease Pool Blocks"></a>ä½¿ç”¨Autorelease Pool Blocks</h2><p>è‡ªåŠ¨é‡Šæ”¾æ± æä¾›äº†ä¸€ä¸ªå¯ä»¥ç”¨æ¥<strong>åºŸå¼ƒæ‰€æœ‰æƒè€Œä¸”åˆå¯ä»¥é¿å…å¯¹è±¡è¢«ç«‹å³é”€æ¯</strong>çš„æœºåˆ¶ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾åƒï¼Œä½†æ˜¯æœ‰äº›æƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨æˆ–è€…å¦‚æœä½¿ç”¨äº†ä¼šæä¾›ä¸€äº›ç›Šå¤„ã€‚</p><h3 id="å…³äºè‡ªåŠ¨é‡Šæ”¾æ± "><a href="#å…³äºè‡ªåŠ¨é‡Šæ”¾æ± " class="headerlink" title="å…³äºè‡ªåŠ¨é‡Šæ”¾æ± "></a>å…³äºè‡ªåŠ¨é‡Šæ”¾æ± </h3><p>è‡ªåŠ¨é‡Šæ”¾æ± æ˜¯ä½¿ç”¨<code>@autoreleasepool</code>æ ‡è®°çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@autoreleasepool &#123;</span><br><span class="line">    &#x2F;&#x2F; Code that creates autorelease objects.</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è‡ªåŠ¨é‡Šæ”¾æ± çš„ç»“å°¾ï¼Œæ‰€æœ‰æ”¶åˆ°<code>autorelease</code>æ¶ˆæ¯çš„å¯¹è±¡ä¼šè¢«å‘é€<code>release</code>æ¶ˆæ¯ã€‚</p><p>å’Œå…¶ä»–çš„blockç±»ä¼¼ï¼Œè‡ªåŠ¨é‡Šæ”¾æ± ä¹Ÿèƒ½å¤ŸåµŒå¥—</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">    <span class="comment">// . . .</span></span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        <span class="comment">// . . .</span></span><br><span class="line">    &#125;</span><br><span class="line">    . . .</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åµŒå¥—çš„è‡ªåŠ¨é‡Šæ”¾æ± éµå¾ªå°±è¿‘åŸåˆ™ã€‚</p><p>Cocoaæ€»æ˜¯è®¤ä¸ºæ‰€æœ‰çš„ä»£ç ä¼šåœ¨è‡ªåŠ¨é‡Šæ”¾æ± çš„èŒƒå›´å†…æ‰§è¡Œï¼Œå¦åˆ™çš„è¯è‡ªåŠ¨é‡Šæ”¾çš„å¯¹è±¡å°±æ— æ³•è¢«é‡Šæ”¾äº†ï¼Œè¿™æ ·ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ã€‚å¦‚æœæœ‰è¿™ç§æƒ…å†µï¼ŒCocoaä¼šæ‰“å°å‡ºé€‚å½“çš„é”™è¯¯ä¿¡æ¯ã€‚AppKitå’ŒUIKitæ¡†æ¶ä¸­çš„äº‹ä»¶å¾ªç¯è¿­ä»£ï¼ˆä¾‹å¦‚é¼ æ ‡ç‚¹å‡»æˆ–è€…ç”¨æˆ·è§¦æ‘¸ï¼‰éƒ½æ˜¯åœ¨è‡ªåŠ¨é‡Šæ”¾æ± å†…çš„ã€‚å› æ­¤é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ ä¸éœ€è¦åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ± ã€‚ä½†æ˜¯ï¼Œä¸‹é¢çš„ä¸‰ç§æƒ…å†µä¸‹ï¼Œéœ€è¦è‡ªå·±åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ± ï¼š</p><ul><li>ç¼–å†™éUI frameworkç¨‹åºæ—¶ï¼Œä¾‹å¦‚å‘½ä»¤è¡Œå·¥å…·</li><li>åœ¨éœ€è¦åˆ›å»ºå¾ˆå¤šä¸´æ—¶å¯¹è±¡çš„å¾ªç¯ä¸­ã€‚åœ¨å¾ªç¯ä¸­ä½¿ç”¨è‡ªåŠ¨é‡Šæ”¾æ± å¯ä»¥å‡å°‘å†…å­˜å³°å€¼</li><li>åˆ›å»ºç¬¬äºŒçº¿ç¨‹</li></ul><h3 id="ä½¿ç”¨è‡ªåŠ¨é‡Šæ”¾æ± æ¥é™ä½å†…å­˜å³°å€¼"><a href="#ä½¿ç”¨è‡ªåŠ¨é‡Šæ”¾æ± æ¥é™ä½å†…å­˜å³°å€¼" class="headerlink" title="ä½¿ç”¨è‡ªåŠ¨é‡Šæ”¾æ± æ¥é™ä½å†…å­˜å³°å€¼"></a>ä½¿ç”¨è‡ªåŠ¨é‡Šæ”¾æ± æ¥é™ä½å†…å­˜å³°å€¼</h3><p>æœ‰äº›ä»£ç éœ€è¦åˆ›å»ºä¸€äº›è‡ªåŠ¨é‡Šæ”¾çš„ä¸´æ—¶å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡ç›´åˆ°è‡ªåŠ¨é‡Šæ”¾æ± ç»“å°¾å¤„ä¸€ç›´éƒ½åœ¨å†…å­˜ä¸­ã€‚æœ‰æ—¶å€™è¿™æ ·åšä¸ä¼šé€ æˆè¿‡å¤šçš„å†…å­˜æé«˜ï¼›æœ‰æ—¶å€™è¿™äº›å¯¹è±¡è¿‡å¤§å°±ä¼šé€ æˆè¿‡å¤šçš„å†…å­˜æå‡ï¼Œè€Œä¸å¾—ä¸å°½å¿«çš„é‡Šæ”¾è¿™äº›ä¸´æ—¶å¯¹è±¡ã€‚å¯¹äºåä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„è‡ªåŠ¨é‡Šæ”¾æ± ï¼Œåœ¨è‡ªåŠ¨é‡Šæ”¾æ± çš„ç»“å°¾è¿™äº›å ç”¨å†…å­˜çš„å¯¹è±¡éƒ½ä¼šè¢«é”€æ¯æ¥èŠ‚çœå†…å­˜ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *urls = &lt;# An array of file URLs #&gt;;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSURL</span> *url <span class="keyword">in</span> urls) &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        <span class="built_in">NSError</span> *error;</span><br><span class="line">        <span class="built_in">NSString</span> *fileContents = [<span class="built_in">NSString</span> stringWithContentsOfURL:url</span><br><span class="line">                                         encoding:<span class="built_in">NSUTF8StringEncoding</span> error:&amp;error];</span><br><span class="line">        <span class="comment">/* Process the string, creating and autoreleasing more objects. */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>for</code>å¾ªç¯æ¯æ¬¡éƒ½å¤„ç†ä¸€ä¸ªæ–‡ä»¶ã€‚åœ¨è‡ªåŠ¨é‡Šæ”¾æ± ä¸­<code>fileContents</code>å¯¹è±¡æ˜¯â€œautoreleasedâ€ï¼Œå½“åˆ°è¾¾è‡ªåŠ¨é‡Šæ”¾æ± çš„ç»“å°¾ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚æ¯æ¬¡éƒ½ä¼šè‡ªåŠ¨å›æ”¶å†…å­˜ï¼Œå°±é¿å…äº†å†…å­˜å ç”¨è¿‡å¤šçš„é—®é¢˜ã€‚</p><p>åˆ‡è®°ï¼Œè‡ªåŠ¨é‡Šæ”¾çš„å¯¹è±¡åªè¦è¶…å‡ºæœ€è¿‘çš„è‡ªåŠ¨é‡Šæ”¾æ± èŒƒå›´åå°±ä¼šè¢«é‡Šæ”¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè‡ªåŠ¨é‡Šæ”¾çš„å¯¹è±¡è¢«é‡Šæ”¾åå°±æ— æ³•ç»§ç»­ä½¿ç”¨äº†ï¼Œä¸è¦å‘è¿™äº›å¯¹è±¡å‘é€æ¶ˆæ¯ï¼Œä¹Ÿä¸è¦æŠŠå®ƒä»¬ä½œä¸ºè¿”å›å€¼ã€‚ä¾‹å¦‚ä¸‹é¢çš„è¿™ç§æƒ…å†µï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">â€“ (<span class="keyword">id</span>)findMatchingObject:(<span class="keyword">id</span>)anObject &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">id</span> match;</span><br><span class="line">    <span class="keyword">while</span> (match == <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">/* Do a search that creates a lot of temporary objects. */</span></span><br><span class="line">            match = [<span class="keyword">self</span> expensiveSearchForObject:anObject];</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span> (match != <span class="literal">nil</span>) &#123;</span><br><span class="line">                [match <span class="keyword">retain</span>]; <span class="comment">/* Keep match around. */</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> [match autorelease];   <span class="comment">/* Let match go and return it. */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘è‡ªåŠ¨é‡Šæ”¾æ± å†…çš„<code>match</code>å¯¹è±¡å‘é€<code>retain</code>æ¶ˆæ¯æ¥å»¶é•¿å®ƒçš„ç”Ÿå‘½æœŸï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠè‡ªåŠ¨é‡Šæ”¾æ± å†…çš„å¯¹è±¡ä½œä¸ºè¿”å›å€¼äº†ï¼ŒåŒæ—¶ä½¿ç”¨<code>autorelease</code>æ ‡è®°è¿”å›å€¼æ˜¯ä¸ºäº†åŒ¹é…<code>retain</code>çš„å¼•ç”¨è®¡æ•°ã€‚</p><h3 id="è‡ªåŠ¨é‡Šæ”¾æ± å’Œçº¿ç¨‹"><a href="#è‡ªåŠ¨é‡Šæ”¾æ± å’Œçº¿ç¨‹" class="headerlink" title="è‡ªåŠ¨é‡Šæ”¾æ± å’Œçº¿ç¨‹"></a>è‡ªåŠ¨é‡Šæ”¾æ± å’Œçº¿ç¨‹</h3><p>æ¯ä¸€ä¸ªCocoaçš„åº”ç”¨ç¨‹åºéƒ½æœ‰è‡ªå·±çš„è‡ªåŠ¨é‡Šæ”¾æ± æ ˆã€‚å¦‚æœä½ æ­£åœ¨ç¼–å†™åªåŒ…å«Foundationæ¡†æ¶çš„ç¨‹åºï¼Œæˆ–è€…è‡ªå·±åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œä½ éœ€è¦è‡ªå·±åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ± ã€‚</p><p>å¦‚æœåº”ç”¨æˆ–çº¿ç¨‹æ˜¯é•¿ä¹…ä¿å­˜çš„å¹¶ä¸”æ½œåœ¨çš„ç”Ÿæˆäº†å¾ˆå¤šè‡ªåŠ¨é‡Šæ”¾çš„å¯¹è±¡ï¼Œè¿™æ—¶åº”è¯¥å®šæœŸçš„æ¸…ç©ºå¹¶ä¸”åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ± ï¼ˆå°±åƒ Application Kit åœ¨ä¸»çº¿ç¨‹ä¸­åšçš„é‚£æ ·ï¼‰ï¼›å¦åˆ™ï¼Œå¯¹è±¡çš„ç§¯ç´¯ä¼šå¢åŠ å†…å­˜çš„å ç”¨ã€‚å¦‚æœï¼Œç‹¬ç«‹çš„çº¿ç¨‹å¹¶æ²¡æœ‰ä½¿ç”¨ Cocoa çš„è°ƒç”¨ï¼Œä½ æ²¡æœ‰å¿…è¦å»åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ã€‚</p><blockquote><p>å¦‚æœä½¿ç”¨äº† POSIX çº¿ç¨‹ APIS è€Œä¸æ˜¯ NSThread å¯¹è±¡æ¥åˆ›å»ºçº¿ç¨‹ï¼Œä½ ä¸èƒ½ä½¿ç”¨ Cocoaï¼ŒåŒ…æ‹¬ NSautoreleasePoolï¼Œé™¤é Cocoa æ˜¯åœ¨å¤šçº¿ç¨‹æ¨¡å¼ä¸‹ï¼ŒCocoa è¿›å…¥äº†å¤šçº¿ç¨‹æ¨¡å¼åªæœ‰åœ¨é¦–æ¬¡åˆ›å»º NSThread å¯¹è±¡çš„æ—¶å€™ï¼Œä¸ºäº†åœ¨ç¬¬äºŒä¸ª POSIX çº¿ç¨‹ä¸­ä½¿ç”¨ Cocoa ï¼Œä½ çš„åº”ç”¨å¿…é¡»é¦–å…ˆè‡³å°‘åˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹çš„ NSThread å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥ç«‹å³é€€å‡ºã€‚ä½ å¯ä»¥é€šè¿‡ NSThread ç±»æ–¹æ³• isMultiTheraded æ¥æµ‹è¯• Cocoa æ˜¯å¦åœ¨å¤šçº¿ç¨‹æ¨¡å¼ä¸‹ã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Objective-C æ¶ˆæ¯è½¬å‘</title>
      <link href="Objective-C-Message-Forward/"/>
      <url>Objective-C-Message-Forward/</url>
      
        <content type="html"><![CDATA[<p>æ¶ˆæ¯è½¬å‘æ˜¯Objcçš„æ ¸å¿ƒæ¦‚å¿µï¼Œä¸è®ºæ˜¯å·¥ä½œè¿‡ç¨‹ä¸­è¿˜æ˜¯å‡ºå»é¢è¯•éƒ½ä¸èƒ½é¿å…è¦æ¥è§¦åˆ°è¿™ä¸ªæ¦‚å¿µï¼Œåˆ©ç”¨æ¶ˆæ¯è½¬å‘å¯ä»¥å®ç°ä¸€äº›éå¸¸çµå·§çš„åŠŸèƒ½ã€‚è¿™ç¯‡æ–‡ç« ç”±æµ…å…¥æ·±çš„è®²è§£äº†æ¶ˆæ¯è½¬å‘çš„æ¦‚å¿µå’Œå®é™…åº”ç”¨çš„åœºæ™¯ã€‚</p><a id="more"></a><h4 id="ä¸€äº›æ¦‚å¿µ"><a href="#ä¸€äº›æ¦‚å¿µ" class="headerlink" title="ä¸€äº›æ¦‚å¿µ"></a>ä¸€äº›æ¦‚å¿µ</h4><p><strong>é™æ€ç»‘å®š</strong>ï¼šåœ¨ç¼–è¯‘æœŸå°±èƒ½å†³å®šè¿è¡Œæ—¶æ‰€åº”è°ƒç”¨çš„å‡½æ•°ã€‚ä»£è¡¨è¯­è¨€ï¼šCã€C++ç­‰<br><strong>åŠ¨æ€ç»‘å®š</strong>ï¼šæ‰€è¦è°ƒç”¨çš„å‡½æ•°ç›´åˆ°è¿è¡ŒæœŸæ‰èƒ½ç¡®å®šã€‚ä»£è¡¨è¯­è¨€ï¼šOCã€swiftç­‰<br><strong>æ¶ˆæ¯ä¼ é€’</strong>ï¼šå¯¹è±¡æ­£å¸¸è§£è¯»æ¶ˆæ¯ï¼Œä¼ é€’è¿‡å»<br><strong>æ¶ˆæ¯è½¬å‘</strong>ï¼šå¯¹è±¡æ— æ³•è§£è¯»æ¶ˆæ¯ï¼Œä¹‹åè¿›è¡Œæ¶ˆæ¯è½¬å‘</p><h4 id="æ¶ˆæ¯å¤„ç†æµç¨‹"><a href="#æ¶ˆæ¯å¤„ç†æµç¨‹" class="headerlink" title="æ¶ˆæ¯å¤„ç†æµç¨‹"></a>æ¶ˆæ¯å¤„ç†æµç¨‹</h4><ol><li>OCä¸­è°ƒç”¨æ–¹æ³•<code>[a method]</code>åéƒ½æ˜¯åœ¨æ‰§è¡Œ<code>id objc_msgSend(id receiver, SEL op, ...) </code><blockquote><p><code>id objc_msgSend(id self, SEL op, ...) </code>æ˜¯ä¸€ä¸ªå‚æ•°ä¸ªæ•°å¯å˜çš„å‡½æ•°ï¼Œç¬¬ä¸€å‚æ•°ä»£è¡¨æ¥å—è€…ï¼Œç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨é€‰æ‹©å­ï¼ˆOCå‡½æ•°åï¼‰ï¼Œä¹‹åçš„å‚æ•°å°±æ˜¯æ¶ˆæ¯ä¸­ä¼ å…¥çš„å‚æ•°ã€‚</p></blockquote></li><li>å½“æ¶ˆæ¯å‘é€ç»™å¯¹è±¡æ—¶ï¼Œæ¶ˆæ¯å‡½æ•°è·Ÿéšå¯¹è±¡çš„isaæŒ‡é’ˆæ‰¾åˆ°ç±»ç»“æ„ï¼Œå¹¶å°è¯•åœ¨cacheä¸­æœç´¢ç±»ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„<code>SEL</code>ï¼Œå¦‚æœæ‰¾åˆ°åœ¨cacheä¸­æ‰¾åˆ°äº†åˆ™ç›´æ¥è°ƒç”¨ï¼Œè¿™ç§æƒ…å†µä¸‹æ¶ˆæ¯å‘é€çš„è€—æ—¶å’Œå‡½æ•°è°ƒç”¨ç›¸å·®æ— å‡ </li><li>è‹¥cacheä¸­æœç´¢å¤±è´¥ï¼Œåˆ™åˆ°è¯¥ç±»å¯¹åº”çš„<code>dispatch table</code>ä¸­æœå¯»æ–¹æ³•ï¼Œå¦‚æœèƒ½æ‰¾åˆ°è¿™ä¸ªè·Ÿé€‰æ‹©å­åç§°ç›¸åŒçš„æ–¹æ³•ï¼Œå°±è·³è½¬åˆ°å…¶å®ç°ä»£ç ï¼Œå¾€ä¸‹æ‰§è¡Œã€‚</li><li>è¯¥ç±»çš„<code>dispatch table</code>ä¸­æ²¡æœ‰æ‰¾åˆ°åˆ™ç»§ç»­æ²¿ç€ç±»å±‚çº§å‘ä¸Šå¯»æ‰¾ç›´åˆ°NSObjectï¼Œæ‰¾åˆ°ååˆ™è¿›è¡Œæ–¹æ³•è°ƒç”¨å¹¶ç¼“å­˜ã€‚</li><li>å¦‚æœæœ€ç»ˆè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œé‚£å°±è¿›å…¥æ¶ˆæ¯è½¬å‘çš„æµç¨‹å»è¿›è¡Œå¤„ç†ã€‚</li></ol><h4 id="æ¶ˆæ¯è½¬å‘æµç¨‹"><a href="#æ¶ˆæ¯è½¬å‘æµç¨‹" class="headerlink" title="æ¶ˆæ¯è½¬å‘æµç¨‹"></a>æ¶ˆæ¯è½¬å‘æµç¨‹</h4><p><img src="https://upload-images.jianshu.io/upload_images/424855-83a396fca4f6c206.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="msg_forward.png"></p><ol><li>è°ƒç”¨resolveInstanceMethodï¼šå¾è¯¢æ¥å—è€…ï¼ˆæ‰€å±çš„ç±»ï¼‰æ˜¯å¦å¯ä»¥æ·»åŠ æ–¹æ³•ä»¥å¤„ç†æœªçŸ¥çš„é€‰æ‹©å­ï¼Ÿ(æ­¤è¿‡ç¨‹ç§°ä¸ºåŠ¨æ€æ–¹æ³•è§£æï¼‰è‹¥æœ‰ï¼Œè½¬å‘ç»“æŸã€‚è‹¥æ²¡æœ‰ï¼Œèµ°ç¬¬äºŒæ­¥ã€‚</li><li>è°ƒç”¨forwardingTargetForSelectorï¼šè¯¢é—®æ¥å—è€…æ˜¯å¦æœ‰å…¶ä»–å¯¹è±¡èƒ½å¤„ç†æ­¤æ¶ˆæ¯ã€‚è‹¥æœ‰ï¼Œè½¬å‘ç»“æŸï¼Œä¸€åˆ‡å¦‚å¸¸ã€‚è‹¥æ²¡æœ‰ï¼Œèµ°ç¬¬ä¸‰æ­¥ã€‚</li><li>è°ƒç”¨forwardInvocationï¼šè¿è¡ŒæœŸç³»ç»Ÿå°†æ¶ˆæ¯å°è£…åˆ°NSInvocationå¯¹è±¡ä¸­ï¼Œå†ç»™æ¥å—è€…ä¸€æ¬¡æœºä¼šã€‚</li><li>ä»¥ä¸Šä¸‰æ­¥è¿˜ä¸è¡Œï¼Œå°±æŠ›å‡ºå¼‚å¸¸ï¼šunrecognized selector sent to instance xxxx</li></ol><h4 id="æ¶ˆæ¯è½¬å‘å®ä¾‹"><a href="#æ¶ˆæ¯è½¬å‘å®ä¾‹" class="headerlink" title="æ¶ˆæ¯è½¬å‘å®ä¾‹"></a>æ¶ˆæ¯è½¬å‘å®ä¾‹</h4><ol><li><p>åœ¨ViewControllerçš„å¤´æ–‡ä»¶ä¸­å£°æ˜ä¸€ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯ä¸è¦åœ¨ViewController.mä¸­å®ç°</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ViewController.h</span><br><span class="line"></span><br><span class="line">#import &lt;UIKit&#x2F;UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">@interface ViewController : UIViewController</span><br><span class="line"></span><br><span class="line">- (void)testForwardMethod;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></li><li><p>åœ¨AppDelegateä¸­è°ƒç”¨ViewControllerçš„<code>testForwardMethod </code>æ–¹æ³•</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AppDelegate.m</span><br><span class="line"></span><br><span class="line">[[[ViewController alloc] init] testForwardMethod];</span><br></pre></td></tr></table></figure></li><li><p>è¿™æ—¶å€™ç¼–è¯‘æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯è¿è¡Œä¼šå‡ºç°<code>-[ViewController testForwardMethod]: unrecognized selector sent to instance 0x10581bfe0</code></p></li><li><p>åœ¨ViewController.mä¸­å¢åŠ æ¶ˆæ¯è½¬å‘çš„æ–¹æ³•</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ViewController.m</span><br><span class="line"></span><br><span class="line">- (id)forwardingTargetForSelector:(SEL)aSelector</span><br><span class="line">&#123;</span><br><span class="line">    NSLog(@&quot;ViewController forwardingTargetForSelector&quot;);</span><br><span class="line">    return [[TestView alloc] init];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å¦‚æœæœ‰æ–¹æ³•çš„å®ç°ï¼Œæ‰€æœ‰æ¶ˆæ¯è½¬å‘çš„è¿‡ç¨‹éƒ½ä¸ä¼šè¿›è¡Œ</span><br><span class="line">&#x2F;&#x2F;- (void)testForwardMethod</span><br><span class="line">&#x2F;&#x2F;&#123;</span><br><span class="line">&#x2F;&#x2F;    NSLog(@&quot;ViewController testForwardMethod&quot;);</span><br><span class="line">&#x2F;&#x2F;&#125;</span><br><span class="line"></span><br><span class="line">TestView.m</span><br><span class="line"></span><br><span class="line">- (void)testForwardMethod</span><br><span class="line">&#123;</span><br><span class="line">    NSLog(@&quot;TestView testForwardMethod&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>(id)forwardingTargetForSelector:(SEL)aSelector; æŠŠaSelectorè½¬å‘ç»™å…¶ä»–ç±»å¯¹è±¡ã€‚</li></ul></blockquote></li><li><p>åœ¨ViewController.mä¸­å¢åŠ ä¸¤ä¸ªæ¶ˆæ¯è½¬å‘çš„æ–¹æ³•</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ViewController.m</span><br><span class="line">  </span><br><span class="line">- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector</span><br><span class="line">&#123;</span><br><span class="line">    NSLog(@&quot;ViewController methodSignatureForSelector&quot;);</span><br><span class="line">    if (aSelector &#x3D;&#x3D; @selector(testForwardMethod))</span><br><span class="line">    &#123;</span><br><span class="line">        NSLog(@&quot;ViewController methodSignatureForSelector equal&quot;);</span><br><span class="line">        return [NSMethodSignature signatureWithObjCTypes:&quot;v@:&quot;];</span><br><span class="line">    &#125;</span><br><span class="line">    return [super methodSignatureForSelector:aSelector];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-  (void)forwardInvocation:(NSInvocation *)anInvocation</span><br><span class="line">&#123;</span><br><span class="line">    NSLog(@&quot;ViewController forwardInvocation:&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ol><li><code>- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector</code>è¿”å›ä¸€NSMethodSignatureå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«ç»™å®šé€‰æ‹©å™¨æ ‡è¯†çš„æ–¹æ³•çš„æè¿°ã€‚åœ¨æ–¹æ³•è½¬å‘è¿‡ç¨‹ä¸­å¦‚æœéœ€è¦ä½¿<code>NSInvocation </code>åˆ™å°±éœ€è¦ä½¿ç”¨è¿™ä¸ªæ–¹æ³•</li></ol></blockquote></li><li><p><code>signatureWithObjCTypes:</code>æ˜¯ç”¨Cå­—ç¬¦ä¸²æ¥åˆ›å»º<code>NSMethodSignature</code>å¯¹è±¡ï¼Œè¯¦ç»†çš„æè¿°ä»¥çœ‹<a href="https://blog.csdn.net/bigtiger1648/article/details/51084957">è¿™ç¯‡æ–‡ç« </a></p></li></ol><h4 id="é¿å¼€åŠ¨æ€ç»‘å®š"><a href="#é¿å¼€åŠ¨æ€ç»‘å®š" class="headerlink" title="é¿å¼€åŠ¨æ€ç»‘å®š"></a>é¿å¼€åŠ¨æ€ç»‘å®š</h4><p>è¦æƒ³ä¸ä½¿ç”¨OCçš„åŠ¨æ€ç»‘å®šï¼Œå”¯ä¸€çš„æ–¹æ¡ˆæ˜¯è·å–åˆ°æ–¹æ³•åœ°å€ç›´æ¥è°ƒç”¨ã€‚ **è¿™ç§æ–¹æ¡ˆä»…é€‚ç”¨äº å¯¹ä¸€ä¸ªæ–¹æ³•é‡å¤å¤šæ¬¡è°ƒç”¨ï¼Œå¹¶ä¸”å¯¹æ€§èƒ½æ•æ„Ÿ çš„æƒ…å†µ **</p><ol><li>é€šè¿‡<code>NSObject</code>çš„<code>methodForSelector</code>è·å–åˆ°æ–¹æ³•å®ç°çš„åœ°å€</li><li>ä½¿ç”¨æŒ‡é’ˆç›´æ¥è°ƒç”¨æ–¹æ³•<br>ä¸‹é¢æ˜¯ä»¥<code>setFilled:</code>æ–¹æ³•ä¸ºä¾‹ <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">void (*setter)(id, SEL, BOOL);</span><br><span class="line">int i;</span><br><span class="line"></span><br><span class="line">setter &#x3D; (void (*)(id, SEL, BOOL))[target</span><br><span class="line">    methodForSelector:@selector(setFilled:)];</span><br><span class="line">for ( i &#x3D; 0 ; i &lt; 1000 ; i++ )</span><br><span class="line">    setter(targetList[i], @selector(setFilled:), YES);</span><br></pre></td></tr></table></figure><blockquote><p><code>methodForSelector</code>ä¸æ˜¯Objective-Cçš„ç‰¹æ€§ï¼Œè€Œæ˜¯ç”±Cocoa runtime systemæä¾›</p></blockquote></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebSocketç®€ä»‹å’ŒSocketRocketæºç åˆ†æ</title>
      <link href="WebSocket-And-SocketRocket-Source-Analysis/"/>
      <url>WebSocket-And-SocketRocket-Source-Analysis/</url>
      
        <content type="html"><![CDATA[<p>iOSå¼€å‘ä½¿ç”¨FBå¼€æºçš„é¡¹ç›®å®ç°Socketé•¿é“¾æ¥ã€‚</p><a id="more"></a><p><a href="http://www.iosprogrammer.tech/iOS-SocketRocket/">ä¹‹å‰çš„æ–‡ç« </a>è®²äº†SocketRocketçš„ç”¨æ³•ï¼Œè¿™é‡Œè®²ä¸€ä¸‹ä»€ä¹ˆæ˜¯WebSocketå¹¶ä¸”å¯¹SocketRocketçš„æºç è¿›è¡Œåˆ†æã€‚</p><h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The WebSocket Protocol is an independent TCP-based protocol.&lt;br&gt;Its only relationship to HTTP is that its handshake is interpreted by HTTP servers as an Upgrade request.</span><br></pre></td></tr></table></figure><div align=center><img src="http://image.iosprogrammer.hongbility.com/WebSocket-SocketRocket-Source/6651f2f811ec133b0e6d7e6d0e194b4c_hd.jpg"></div><p>WebSocketçš„ç‰¹ç‚¹:<br>    1. å»ºç«‹åœ¨ TCP åè®®ä¹‹ä¸Šï¼ŒæœåŠ¡å™¨ç«¯çš„å®ç°æ¯”è¾ƒå®¹æ˜“ã€‚<br>    2. ä¸ HTTP åè®®æœ‰ç€è‰¯å¥½çš„å…¼å®¹æ€§ã€‚é»˜è®¤ç«¯å£ä¹Ÿæ˜¯80å’Œ443ï¼Œå¹¶ä¸”æ¡æ‰‹é˜¶æ®µé‡‡ç”¨ HTTP åè®®ï¼Œå› æ­¤æ¡æ‰‹æ—¶ä¸å®¹æ˜“å±è”½ï¼Œèƒ½é€šè¿‡å„ç§ HTTP ä»£ç†æœåŠ¡å™¨ã€‚<br>    3. æ•°æ®æ ¼å¼æ¯”è¾ƒè½»é‡ï¼Œæ€§èƒ½å¼€é”€å°ï¼Œé€šä¿¡é«˜æ•ˆã€‚<br>    4. å¯ä»¥å‘é€æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥å‘é€äºŒè¿›åˆ¶æ•°æ®ã€‚<br>    5. æ²¡æœ‰åŒæºé™åˆ¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¸ä»»æ„æœåŠ¡å™¨é€šä¿¡ã€‚<br>    6. åè®®æ ‡è¯†ç¬¦æ˜¯wsï¼ˆå¦‚æœåŠ å¯†ï¼Œåˆ™ä¸ºwssï¼‰ï¼ŒæœåŠ¡å™¨ç½‘å€å°±æ˜¯URLã€‚<code>ws://example.com:80/some/path</code><br>    7. å…¨åŒå·¥é€šä¿¡ã€‚</p><p>WebSocketæ¡æ‰‹ç±»ä¼¼äºHTTPï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET &#x2F;chat HTTP&#x2F;1.1</span><br><span class="line">Host: server.example.com</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw&#x3D;&#x3D;</span><br><span class="line">Sec-WebSocket-Protocol: chat, superchat</span><br><span class="line">Sec-WebSocket-Version: 13</span><br><span class="line">Origin: http:&#x2F;&#x2F;example.com</span><br></pre></td></tr></table></figure><blockquote><p>Upgradeå’ŒConnectionæ˜¯åœ¨é€šçŸ¥Apacheæˆ–è€…Nginxç­‰ä»£ç†æœåŠ¡å™¨ï¼Œæ­£åœ¨è¿›è¡Œçš„æ˜¯websocketåè®®è¿æ¥è€Œä¸æ˜¯æ™®é€šçš„HTTPã€‚<br><br>Sec-WebSocket-Keyæ˜¯æµè§ˆå™¨éšæœºç”Ÿæˆçš„base64ç¼–ç å€¼ï¼Œç”¨æ¥éªŒè¯æœåŠ¡å™¨æ˜¯ä¸æ˜¯çœŸæ­£çš„websocketã€‚<br> Sec_WebSocket-Protocol æ˜¯ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œç”¨æ¥åŒºåˆ†åŒURLä¸‹ï¼Œä¸åŒçš„æœåŠ¡æ‰€éœ€è¦çš„åè®®ã€‚<br> Sec-WebSocket-Version æ˜¯å‘Šè¯‰æœåŠ¡å™¨æ‰€ä½¿ç”¨çš„åè®®ç‰ˆæœ¬ã€‚</p></blockquote><p>æœåŠ¡å™¨éªŒè¯é€šè¿‡åä¼šè¿”å›ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HTTP&#x2F;1.1 101 Switching Protocols</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk&#x3D;</span><br><span class="line">Sec-WebSocket-Protocol: chat</span><br></pre></td></tr></table></figure><blockquote><p>Upgradeå’ŒConnectionçš„ä½œç”¨åŒæ ·æ˜¯ä¸ºäº†è¡¨æ˜è¿›è¡Œçš„æ˜¯websocketè¿æ¥ã€‚<br><br>Sec-WebSocket-Accept è¿™ä¸ªåˆ™æ˜¯ç»è¿‡æœåŠ¡å™¨ç¡®è®¤ï¼Œå¹¶ä¸”åŠ å¯†è¿‡åçš„ Sec-WebSocket-Keyï¼Œç”¨æ¥ç»™å®¢æˆ·ç«¯éªŒè¯èº«ä»½ã€‚<br><br>Sec-WebSocket-Protocol åˆ™æ˜¯è¡¨ç¤ºæœ€ç»ˆä½¿ç”¨çš„åè®®ã€‚</p></blockquote><p>æ•°æ®å¸§ï¼š<br><br><img src="http://image.iosprogrammer.hongbility.com/WebSocket-SocketRocket-Source/frame_form.png" alt="æ•°æ®å¸§æ ¼å¼"></p><div align=center><font color="gray" size="2">æ•°æ®å¸§æ ¼å¼</font></div><ol><li><p>ä¸åŒäºå…¶ä»–åè®®ï¼ŒWebSocketæ˜¯åŸºäºå¸§çš„è€Œä¸æ˜¯åŸºäºæµ<br></p></li><li><p>å­—æ®µè§£é‡Š:</p><ol><li>FIN: 1 bit è¡¨ç¤ºæ˜¯å¦æ˜¯å½“å‰ä¿¡æ¯çš„æœ€åä¸€æ®µ</li><li>RSV1, RSV2, RSV3: 1 bit é™¤éåŒæ–¹åå•†å®šä¹‰äº†é0å€¼ï¼Œå¦åˆ™ä¸º0</li><li>Opcode: 4 bits å®šä¹‰äº†æ•°æ®åŒ…çš„ç±»å‹ï¼Œå¦‚æœä¸æ˜¯å·²å®šä¹‰ç±»å‹åˆ™è¡¨ç¤ºè¿æ¥å‡ºé”™ã€‚å®šä¹‰çš„æ•°æ®ç±»å‹åŒ…æ‹¬: 0x0è¡¨ç¤ºä¸­é—´æ•°æ®åŒ…ï¼›0x1è¡¨ç¤ºtextç±»å‹æ•°æ®åŒ…ï¼›0x2è¡¨ç¤ºbinaryç±»å‹æ•°æ®åŒ…ï¼›0x3-7ä¿ç•™ï¼›0x8è¡¨ç¤ºè¿æ¥å…³é—­ï¼›0x9è¡¨ç¤ºpingï¼›0xAè¡¨ç¤ºpongï¼›0xB-Fä¿ç•™</li><li>MASKï¼š1 bit è¡¨ç¤ºPayloadæ˜¯å¦ç»è¿‡æ©ç å¤„ç†ã€‚MASKå¦‚æœæ˜¯1ï¼ŒMasking-Keyçš„æ•°æ®å³æ˜¯æ©ç å¯†é’¥ï¼Œç”¨äºè§£ç PayloadDataã€‚å®¢æˆ·ç«¯å‘å‡ºçš„æ•°æ®å¸§éœ€è¦è¿›è¡Œæ©ç å¤„ç†ï¼Œæ‰€ä»¥æ­¤ä¸ºæ˜¯1ã€‚</li><li>Payload lengthï¼š7 bitï¼Œ7+16 bitsï¼Œor 7+64 bits è¡¨ç¤ºpayload dataçš„é•¿åº¦ï¼Œå¦‚æœå…¶å€¼æ˜¯0-125ï¼Œåˆ™æ˜¯payloadçš„çœŸå®é•¿åº¦ï¼›å¦‚æœæ˜¯126ï¼Œåˆ™åé¢çš„2ä¸ªå­—èŠ‚å½¢æˆçš„16bitsæ— ç¬¦å·æ•´å‹æ•°çš„å€¼æ˜¯payloadçš„çœŸå®é•¿åº¦ï¼›å¦‚æœæ˜¯127ï¼Œåˆ™åé¢8ä¸ªå­—èŠ‚å½¢æˆçš„64bitsæ— ç¬¦å·æ•´å‹æ•°çš„å€¼æ˜¯payloadçš„çœŸå®é•¿åº¦ã€‚</li></ol></li><li><p>æ©ç </p><ol><li>æ©ç å€¼å¿…é¡»æ˜¯éšæœºçš„32-bitå€¼</li><li>æ©ç å€¼å¹¶ä¸ä¼šå½±å“Payload dataçš„é•¿åº¦ã€‚</li><li>æ©ç ç®—æ³•ï¼šæ©ç åçš„ç¬¬iå­—èŠ‚æ•°æ® = æ©ç å‰çš„ç¬¬iå­—èŠ‚çš„æ•°æ® XOR æ©ç keyçš„ç¬¬ï¼ˆi mod 4ï¼‰å­—èŠ‚çš„æ•°æ®</li></ol></li></ol><h3 id="SocketRocketæºç è§£æ"><a href="#SocketRocketæºç è§£æ" class="headerlink" title="SocketRocketæºç è§£æ"></a>SocketRocketæºç è§£æ</h3><ol start="0"><li><p>è¾…åŠ©ç±»ç®€å•è¯´æ˜</p><ol><li><text>_SRRunLoopThread</text>: æ‰¿è½½å’Œå¤„ç†æ‰€æœ‰äº‹ä»¶çš„çº¿ç¨‹ã€‚é€šè¿‡<code>NSRunLoop (SRWebSocket)</code>æŠŠè¿™ä¸ªçº¿ç¨‹æ”¾åˆ°äº†RunLoopé‡Œã€‚å¹¶ä¸”åœ¨<code>- (void)main</code>ä¸­ä½¿ç”¨ä¸€ä¸ªwhileå¾ªç¯ä½¿è¿™ä¸ªçº¿ç¨‹æ­£å¸¸æƒ…å†µä¸‹æ°¸ä¸åœæ­¢ã€‚</li><li>SRIOConsumerå’ŒSRIOConsumerPool: ç”¨æ¥å¤„ç†æ”¶åˆ°çš„æ¶ˆæ¯ã€‚</li></ol></li><li><p>ä¸»è¦æ–¹æ³•è¯´æ˜</p><ol><li><p><code>- (id)initWithURLRequest:(NSURLRequest *)request protocols:(NSArray *)protocols allowsUntrustedSSLCertificates:(BOOL)allowsUntrustedSSLCertificates</code> åŸºæœ¬åˆå§‹åŒ–æ–¹æ³•ã€‚åˆå§‹åŒ–äº†SRSocketç±»å†…çš„å‡ ä¸ªæˆå‘˜å˜é‡ã€‚</p></li><li><p><code>_SR_commonInit</code></p><ol><li>åˆ¤æ–­åè®®ç±»å‹</li><li>åˆå§‹åŒ–äº†_workQueueï¼Œè¿™ä¸ªGCDé˜Ÿåˆ—ç”¨æ¥å¤„ç†ä¸»è¦çš„ä¸šåŠ¡é€»è¾‘ï¼ŒåŒ…æ‹¬å¤„ç†é”™è¯¯ã€å‘é€å†…å®¹ã€å…³é—­è¿æ¥ç­‰ã€‚</li><li>åˆå§‹åŒ–_delegateDispatchQueueï¼Œè¿™ä¸ªé˜Ÿåˆ—æ˜¯ç”¨æ¥å‘å¤–å‘é€é€šçŸ¥çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>- (void)setDelegateOperationQueue:(NSOperationQueue*) queue</code>æˆ–<code>- (void)setDelegateDispatchQueue:(dispatch_queue_t) queue</code>æ¥è‡ªå®šä¹‰è¿™ä¸ªé˜Ÿåˆ—ã€‚</li></ol></li><li><p><code>_initializeStreams</code> åˆ›å»ºè¾“å…¥/å‡ºæµ</p></li><li><p><code>open</code>/<code>openConnection</code> è¿™ä¸¤ä¸ªæ–¹æ³•å’Œè¢«ä»–ä»¬è°ƒç”¨çš„æ–¹æ³•æ˜¯ç”¨æ¥é…ç½®å¹¶æ‰“å¼€æµçš„</p></li><li><p><code>didConnect</code></p><ol><li>æ„å»ºHTTP Header</li><li>å‘é€HTTP Header</li><li>æ³¨å†Œä¸€ä¸ªæ¥æ”¶æœåŠ¡å™¨è¿”å›Headerä¿¡æ¯çš„ç›‘å¬ï¼Œå¹¶åœ¨å›è°ƒå†…è¿›è¡Œç›¸åº”å¤„ç†</li></ol></li><li><p><code>- (void)safeHandleEvent:(NSStreamEvent)eventCode stream:(NSStream *)aStream</code></p><ol><li>è¿™æ˜¯NSStreamçš„å›è°ƒæ–¹æ³•ï¼Œè¾“å…¥å’Œè¾“å‡ºæµçš„å…±åŒå›è°ƒ</li><li><code>NSStreamEventOpenCompleted</code> è¿æ¥æ‰“å¼€ï¼›<code>NSStreamEventHasBytesAvailable</code> å¯è¯»å–ï¼›<code>NSStreamEventHasSpaceAvailable</code> å¯å†™å…¥æ•°æ®</li><li>åœ¨<code>NSStreamEventOpenCompleted</code>é‡Œé¢çš„<code>[self _pumpScanner];</code>ç”¨æ¥è§¦å‘ç¬¬5æ¡ä¸­çš„3ï¼Œæ¥å¤„ç†æœåŠ¡å™¨è¿”å›çš„æ¡æ‰‹Headerä¿¡æ¯</li></ol></li><li><p><code>_pumpWriting</code></p><ol><li>å‘è¾“å‡ºæµå†™æ•°æ®<code>[_outputStream write:_outputBuffer.bytes + _outputBufferOffset maxLength:dataLength - _outputBufferOffset]</code></li><li><code>if (_outputBufferOffset &gt; 4096 &amp;&amp; _outputBufferOffset &gt; (_outputBuffer.length &gt;&gt; 1)) &#123; _outputBuffer = [[NSMutableData alloc] initWithBytes:(char *)_outputBuffer.bytes + _outputBufferOffset length:_outputBuffer.length - _outputBufferOffset]; _outputBufferOffset = 0; &#125;</code> å½“ç¼“å­˜è¶…è¿‡4Mæ—¶æ¸…ç©º</li></ol></li><li><p><code>- (void)_sendFrameWithOpcode:(SROpCode)opcode data:(id)data</code> æŠŠæ•°æ®ç»„è£…æˆç¬¦åˆåè®®è¦æ±‚çš„æ ¼å¼ã€‚å‚è€ƒâ€œæ•°æ®å¸§æ ¼å¼â€çš„å›¾ç‰‡ã€‚</p><ol><li>å‘frame_bufferä¸­å†™å…¥fin/opcodeå­—æ®µ</li><li>å†™å…¥maskå­—æ®µ</li><li>æ ¹æ®è¦å‘é€çš„æ•°æ®å¾—åˆ°æœªæ©ç æ•°æ®<code>unmasked_payload</code></li><li>ä½¿ç”¨<code>int SecRandomCopyBytes(SecRandomRef rnd, size_t count, void *bytes);</code>å¾—åˆ°æ©ç key<code>mask_key</code></li><li>æ ¹æ®mask_keyå’Œunmasked_payloadå¾—åˆ°æ©ç åæ•°æ®å¹¶åˆ‡å…¥frame_buffer</li></ol></li><li><p><code>_HTTPHeadersDidFinish</code> å¤„ç†æœåŠ¡å™¨è¿”å›çš„æ¡æ‰‹ä¿¡æ¯ã€‚é€šè¿‡å¯¹æœåŠ¡å™¨è¿”å›çš„æ¡æ‰‹ä¿¡æ¯çš„åˆ†ææ¥åˆ¤æ–­è¿æ¥æ˜¯å¦æˆåŠŸæ‰“å¼€ã€‚</p></li><li><p><code>_innerPumpScanner</code> å¤„ç†æ”¶åˆ°çš„æ•°æ®ï¼Œè¯»å–æœªè¯»æ•°æ®ï¼Œå¹¶ä¸”æŠŠæœªè¯»æ•°æ®é€šè¿‡<code>consumer.handler(self, slice);</code>è¿”å›ç»™consumeræ¥è§£ææ•°æ®å†…å®¹ã€‚</p></li><li><p><code>- (void)_handleFrameWithData:(NSData *)frameData opCode:(NSInteger)opcode</code> æ ¹æ®opCodeå¯¹æ”¶åˆ°çš„æ•°æ®è¿›è¡Œåˆ†ç±»å¤„ç†</p></li><li><p><code>- (void)_readFrameContinue</code> è¿™ä¸ªæ˜¯ä¸»è¦çš„æ•°æ®å¤„ç†æ–¹æ³•ã€‚æ•´ä¸ªæ•°æ®ç»“æ„çš„å¤„ç†çš„è¿‡ç¨‹å°±æ˜¯æŒ‰ç…§WebSocketåè®®çš„è§„å®šæ¥çš„ã€‚</p></li></ol></li></ol><p>åˆ°æ­¤ï¼ŒSocketRocketçš„æºç åˆ†æå°±ç»“æŸäº†ã€‚å…¶ä¸­ä¸€äº›åœ°æ–¹è¯´çš„æ¯”è¾ƒå•°å—¦ï¼Œæœ‰äº›åœ°æ–¹è¯´çš„å¯èƒ½ä¸å¤Ÿè¯¦ç»†ã€‚å¤§å®¶åœ¨çœ‹æºç çš„æ—¶å€™ä¸€å®šè¦å¯¹ç…§ç€WebSocketçš„åè®®å†…å®¹ã€‚å¦‚æœæœ‰ä¸æ¸…æ¥šçš„åœ°æ–¹æ¬¢è¿å’¨è¯¢ã€‚æœ‰è¯´çš„ä¸å¯¹çš„åœ°æ–¹ä¹Ÿæ¬¢è¿æŒ‡æ­£ã€‚<br></p><p>ç¥ä½ æ—©æ—¥èµ°ä¸Šäººç”Ÿå·…å³°!!!</p><h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><p><a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a><br><br><a href="https://www.zhihu.com/question/20215561">çŸ¥ä¹</a><br><br><a href="https://tools.ietf.org/html/rfc6455">RFC6455 WebSocket Protocol</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSç›´æ’­APPçš„å¼€å‘â€”â€”æ‹‰æµ</title>
      <link href="iOS-Pull-Live-Stream/"/>
      <url>iOS-Pull-Live-Stream/</url>
      
        <content type="html"><![CDATA[<p>ç¼–è¯‘iOSå¹³å°ä½¿ç”¨çš„ijkPlayerå¹¶ç”¨å®ƒæ¥è¿›è¡Œç›´æ’­æ¨æµå’Œæ‹‰æµã€‚</p><a id="more"></a><h3 id="æ’­æ”¾å™¨ï¼šIJKPlayer"><a href="#æ’­æ”¾å™¨ï¼šIJKPlayer" class="headerlink" title="æ’­æ”¾å™¨ï¼šIJKPlayer"></a>æ’­æ”¾å™¨ï¼šIJKPlayer</h3><ul><li>githubåœ°å€ï¼š<a href="https://github.com/Bilibili/ijkplayer">https://github.com/Bilibili/ijkplayer</a></li><li>ä¸‹è½½ã€ç¼–è¯‘è¿‡ç¨‹<ul><li> git clone <a href="https://github.com/Bilibili/ijkplayer.git">https://github.com/Bilibili/ijkplayer.git</a> ijkplayer-ios</li><li>cd ijkplayer-ios</li><li>git checkout -B latest k0.8.8</li><li>./init-ios.sh</li><li>cd ios</li><li>./compile-ffmpeg.sh clean</li><li>./compile-ffmpeg.sh all</li></ul></li><li>ç¼–è¯‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;libavutil&#x2F;arm&#x2F;asm.S:50:9: error: unknown directive</span><br><span class="line">        .arch armv7-a</span><br><span class="line">        ^</span><br><span class="line">make: *** [libavcodec&#x2F;arm&#x2F;aacpsdsp_neon.o] Error 1</span><br></pre></td></tr></table></figure></li><li>è§£å†³ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ€æ–°çš„ Xcode å·²ç»å¼±åŒ–äº†å¯¹ 32 ä½çš„æ”¯æŒ, è§£å†³æ–¹æ³•: åœ¨ compile-ffmpeg.sh ä¸­åˆ é™¤ armv7 , ä¿®æ”¹:FF_ALL_ARCHS_IOS8_SDK&#x3D;&quot;arm64 i386 x86_64&quot; å†é‡æ–°æ‰§è¡Œå‡ºç°é”™è¯¯çš„å‘½ä»¤: .&#x2F;compile-ffmpeg.sh all</span><br></pre></td></tr></table></figure><h3 id="è·å–-framework"><a href="#è·å–-framework" class="headerlink" title="è·å–.framework"></a>è·å–.framework</h3></li></ul><ol><li>æ‰“å¼€<code>IJKMediaPlayer.xcodeproj</code></li><li>é€‰æ‹©çœŸæœº</li><li>åˆ‡æ¢åˆ°Releaseæ¨¡å¼</li><li>cmd+B ç¼–è¯‘é¡¹ç›®</li><li>è·å–/Productç›®å½•ä¸‹çš„<code>IJKMediaFramework.framework</code>ï¼Œå¹¶æ‹·è´</li></ol><h3 id="è·å–rtmpç›´æ’­æµ"><a href="#è·å–rtmpç›´æ’­æµ" class="headerlink" title="è·å–rtmpç›´æ’­æµ"></a>è·å–rtmpç›´æ’­æµ</h3><p>æˆ‘ä½¿ç”¨charlesæŠ“åŒ…åˆ°ã€Šé±¼æ°´ç›´æ’­ã€‹çš„æ¨èåˆ—è¡¨é“¾æ¥ï¼š<a href="http://api.chujianapp.com/live/get_hot_list?app_version=6.3.0&amp;bundle_id=fish.livezb.wte&amp;device=ios&amp;device_id=7ED19CAE-E21F-44BF-98DC-F5346E64E502&amp;device_idfa=51C0FC66-54C0-4F69-91E4-4C168698D1F5&amp;device_model=iPhone%206s&amp;device_version=iOS11.3.1&amp;pkg_channel=ys19&amp;secure_key=bd54628575ff36bd7695519218f6934f&amp;server_upgrade=1&amp;time_stamp=1525858044919&amp;token=18231046%7C227842b7058bc5dad052bc6d8834e68f%7C1525858019&amp;uid=18231046">http://api.chujianapp.com/live/get_hot_list?app_version=6.3.0&amp;bundle_id=fish.livezb.wte&amp;device=ios&amp;device_id=7ED19CAE-E21F-44BF-98DC-F5346E64E502&amp;device_idfa=51C0FC66-54C0-4F69-91E4-4C168698D1F5&amp;device_model=iPhone%206s&amp;device_version=iOS11.3.1&amp;pkg_channel=ys19&amp;secure_key=bd54628575ff36bd7695519218f6934f&amp;server_upgrade=1&amp;time_stamp=1525858044919&amp;token=18231046%7C227842b7058bc5dad052bc6d8834e68f%7C1525858019&amp;uid=18231046</a><br>ä»è¿™ä¸ªé“¾æ¥ä¸­å¯ä»¥å¾—åˆ°rtmpæµ</p><h3 id="æ–°å»ºä¸€ä¸ªOC-Demoé¡¹ç›®"><a href="#æ–°å»ºä¸€ä¸ªOC-Demoé¡¹ç›®" class="headerlink" title="æ–°å»ºä¸€ä¸ªOC Demoé¡¹ç›®"></a>æ–°å»ºä¸€ä¸ªOC Demoé¡¹ç›®</h3><p>1. æŠŠ<code>IJKMediaFramework.framework</code>æ‹·è´åˆ°é¡¹ç›®ç›®å½•ä¸­<br>2. åœ¨<code>ViewController.m</code>ä¸­<code>#import &lt;IJKMediaFramework/IJKFFMoviePlayerController.h&gt;</code>ï¼Œå¹¶ä¸”åœ¨<code>viewDidLoad</code>ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NSURL *playerURL &#x3D; [NSURL URLWithString:@&quot;rtmp:\&#x2F;\&#x2F;pili-live-rtmp.chujianapp.com\&#x2F;ragingfire\&#x2F;1663091115258475730&quot;];</span><br><span class="line">    IJKFFMoviePlayerController *playerVC &#x3D; [[IJKFFMoviePlayerController alloc] initWithContentURL:playerURL withOptions:nil];</span><br><span class="line">    [playerVC prepareToPlay];</span><br><span class="line">    playerVC.view.frame &#x3D; CGRectMake(30, 20, [UIScreen mainScreen].bounds.size.width * 2 &#x2F; 3, [UIScreen mainScreen].bounds.size.height * 2 &#x2F; 3);</span><br><span class="line">    playerVC.view.backgroundColor &#x3D; [UIColor grayColor];</span><br><span class="line">    [self.view insertSubview:playerVC.view atIndex:1];</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œé¡¹ç›®"><a href="#è¿è¡Œé¡¹ç›®" class="headerlink" title="è¿è¡Œé¡¹ç›®"></a>è¿è¡Œé¡¹ç›®</h3><p>(oã‚œâ–½ã‚œ)oâ˜†[BINGO!]</p><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a href="https://www.jianshu.com/p/9743a68c2939">https://www.jianshu.com/p/9743a68c2939</a></p><p>ğŸ‘ğŸ‘ğŸ‘</p>]]></content>
      
      
      
        <tags>
            
            <tag> éŸ³è§†é¢‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å¼€å§‹åˆ°æäº¤ä¸€ä¸ªå¼€æºé¡¹ç›®åˆ°Cocopods</title>
      <link href="Create-Cocoapods-Repo/"/>
      <url>Create-Cocoapods-Repo/</url>
      
        <content type="html"><![CDATA[<p>iOSç»„ä»¶åŒ–è¦ç”¨åˆ°Cocopodsï¼Œè®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹é‚£ä¹ˆæ€ä¹ˆåˆ›å»ºè‡ªå·±çš„Cocoapodså¹¶ä¸”åœ¨å¤šä¸ªé¡¹ç›®ç»„æˆå‘˜ä¸­é—´ä½¿ç”¨ã€‚</p><a id="more"></a><h3 id="å¼€å‘è¿‡ç¨‹"><a href="#å¼€å‘è¿‡ç¨‹" class="headerlink" title="å¼€å‘è¿‡ç¨‹"></a>å¼€å‘è¿‡ç¨‹</h3><ol><li><p>æ‰§è¡Œ<code>pod lib create [ProjectName]</code>åˆ›å»ºé¡¹ç›®ã€‚è¿‡ç¨‹ä¸­éœ€è¦å›ç­”å‡ ä¸ªé—®é¢˜ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦è®¾ç½®è®¾ç½®å°±å¯ä»¥äº†ã€‚æˆ‘çš„è®¾ç½®æ˜¯ï¼š</p><ul><li><p>What platform do you want to use?? [ iOS / macOS ]</p><blockquote><p>iOS</p></blockquote></li><li><p>What language do you want to use?? [ Swift / ObjC ]</p><blockquote><p>Swift</p></blockquote></li><li><p>Would you like to include a demo application with your library? [ Yes / No ]</p><blockquote><p>Yes</p></blockquote></li><li><p>Which testing frameworks will you use? [ Quick / None ]</p><blockquote><p>None</p></blockquote></li><li><p>Would you like to do view based testing? [ Yes / No ]</p><blockquote><p>No</p></blockquote><p>ç´§æ¥ç€ä¼šè‡ªåŠ¨æ‰§è¡Œ<code>pod install</code>ï¼Œæˆ‘ä»¬åªéœ€è¦é™é™çš„ç­‰ç€å®Œæˆå°±å¯ä»¥äº†ã€‚</p></li></ul></li><li><p>é¡¹ç›®ç»“æ„ã€‚ <code>pod install</code>ä¹‹åï¼ŒCocoapodsä¼šç›´æ¥æ‰“å¼€Xcode projectã€‚é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š<br><img src="http://image.iosprogrammer.hongbility.com/Create-Cocoapods-Repo/project-struct.png" alt="project-struct"></p><ol><li>Podspec Metadata<ul><li>.podpsec - é¡¹ç›®ç›¸å…³çš„podä¿¡æ¯ã€‚åŒ…æ‹¬äº†ç‰ˆæœ¬å·ã€githubä¸»é¡µã€å¯¹å…¶ä»–é¡¹ç›®çš„ä¾èµ–ã€ä½œè€…ä¿¡æ¯å’ŒæŒ‡å®šèµ„æºæ–‡ä»¶</li><li>README.md - å¯¹å½“å‰é¡¹ç›®çš„ä»‹ç»å’Œä½¿ç”¨æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯githubä¸­é¡¹ç›®ä¸»é¡µçš„ä»‹ç»å†…å®¹ã€‚</li><li>LICENSE - æŒ‡å®šä½¿ç”¨çš„å¼€æºåè®®  </li></ul></li><li>Example for DemoProj - å¯¹å¼€æºä»£ç çš„ä½¿ç”¨å®ä¾‹ã€‚å…¶ä»–äººä»githubä¸‹è½½äº†å¼€æºé¡¹ç›®åå¯ä»¥é€šè¿‡è¿™ä¸ªæ¥æŸ¥çœ‹ä½¿ç”¨æ–¹æ³•ã€‚å¦‚æœåœ¨<code>Would you like to include a demo application with your library?</code>ä¸­é€‰æ‹©äº†Noï¼Œè¿™ä¸ªé¡¹ç›®å°±ä¸ä¼šåˆ›å»ºã€‚å› æ­¤å¼ºçƒˆå»ºè®®è¿™ä¸ªé—®é¢˜å›ç­”YESã€‚å¯¹è‡ªå·±è°ƒè¯•å’Œåˆ«äººä½¿ç”¨éƒ½éå¸¸æœ‰åˆ©ã€‚</li><li>Tests - å•å…ƒæµ‹è¯•ã€‚</li><li>Development Pods - å¼€æºåº“ä»£ç å°±æ”¾åœ¨è¿™é‡Œã€‚</li><li>Frameworks - å½“å‰å¼€æºé¡¹ç›®çš„ä¾èµ–åº“</li></ol></li><li><p>.podspecæ–‡ä»¶è¯¦è§£</p><ul><li>s.name - åç§°ï¼Œ<code>pod search</code>æœç´¢çš„å…³é”®è¯,æ³¨æ„è¿™é‡Œä¸€å®šè¦å’Œ.podspecçš„åç§°ä¸€æ ·,å¦åˆ™æŠ¥é”™</li><li>s.version - ç‰ˆæœ¬å·ï¼Œè¿™ä¸ªç‰ˆæœ¬å·è¦å’Œtagç‰ˆæœ¬ä¸€è‡´ï¼Œå¦åˆ™æŠ¥é”™</li><li>s.summary - é¡¹ç›®ç®€ä»‹ï¼Œ<code>pod search</code>çš„ç»“æœä¸­ä¼šå±•ç¤º</li><li>s.homepage - é¡¹ç›®ä¸»é¡µåœ°å€ï¼Œä¹Ÿå°±æ˜¯githubåœ°å€</li><li>s.source - <code>git clone</code>çš„é¡¹ç›®åœ°å€ã€‚ </li><li>s.ios.deployment_target - æ”¯æŒåˆ°çš„iOSç‰ˆæœ¬</li><li>s.source_files - èµ„æºæ–‡ä»¶è·¯å¾„ã€‚è¯·ç¡®ä¿æŠŠé¡¹ç›®ç›¸å…³çš„æºæ–‡ä»¶æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œå¦åˆ™æŠ¥é”™ã€‚</li><li>s.dependency - é¡¹ç›®ä¾èµ–çš„å…¶ä»–ä¸‰æ–¹åº“ã€‚</li></ul></li><li><p>åœ¨githubä¸Šåˆ›å»ºä»“åº“</p></li><li><p>å¼€å‘é¡¹ç›®ã€‚ã€‚ã€‚</p></li><li><p>å¼€å‘ç»“æŸï¼ŒæŠŠé¡¹ç›®æäº¤åˆ°githubã€‚</p></li><li><p>æ‰“tagå¹¶æŠŠtagæäº¤ã€‚tagå·è¦å’Œ.podspecä¸­çš„s.serverä¸€è‡´ã€‚</p></li><li><p>éªŒè¯.podspec</p><ol><li><code>pod lib lint</code>æœ¬åœ°éªŒè¯</li><li><code>pod spec lint</code>å’Œgithubä¸Šçš„å†…å®¹è¿›è¡Œå¯¹æ¯”</li></ol></li><li><p>æŠŠé¡¹ç›®å‘å¸ƒåˆ°Cocopodsçš„masterä¸Šã€‚<code>pod trunk push [ProjectName].podspec</code>ã€‚æ³¨æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹è¾ƒ(chao ji)æ…¢ã€‚</p></li></ol><h3 id="å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>å¯èƒ½é‡åˆ°çš„é—®é¢˜</h3><ol><li><code>pod lib lint</code>é€šè¿‡ï¼Œä½†æ˜¯<code>pod spec lint</code>æŠ¥é”™ï¼š<code>use of unresolved identifier</code>ã€‚é‡åˆ°è¿™ä¸ªé—®é¢˜åï¼Œåˆ†ä¸ºä¸¤æ­¥ï¼š<ol><li><code>pod spec lint --no-clean --verbose</code>æŸ¥çœ‹é”™è¯¯åŸå› ï¼Œè¿™æ˜¯ä¼šçœ‹åˆ°ä¸´æ—¶æ–‡ä»¶ï¼Œåˆ°ä¸´æ—¶æ–‡ä»¶é‡ŒæŸ¥çœ‹ä¼šå‘ç°ç¼ºå°‘æ–‡ä»¶</li><li>ä½¿ç”¨<code>pod cache clean</code></li><li>é‡æ–°æ‰§è¡Œä¸€æ¬¡<code>pod spec lint</code></li></ol></li><li>é¡¹ç›®æäº¤åæ‰§è¡Œ<code>pod search</code>æ‰¾ä¸åˆ°çš„è¯ï¼Œæ‰§è¡Œ<code>pod setup</code>ã€‚</li><li>éªŒè¯çš„æ—¶å€™å‡ºç°<code>.swift-version</code>é”™è¯¯ã€‚è§£å†³åŠæ³•æ˜¯åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ‰§è¡Œ<code>echo &quot;4.0&quot; &gt; .swift-version</code>ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„4.0æ˜¯æˆ‘å¼€å‘é¡¹ç›®æ—¶ä½¿ç”¨çš„Swiftç‰ˆæœ¬ã€‚</li><li><strong>æ³¨æ„æƒé™æ§åˆ¶å’ŒSwiftä¸OCçš„æ··ç¼–é—®é¢˜</strong></li></ol><h3 id="èµ é€ä¸€ä¸ªæäº¤å¼€æºåº“çš„shellè„šæœ¬"><a href="#èµ é€ä¸€ä¸ªæäº¤å¼€æºåº“çš„shellè„šæœ¬" class="headerlink" title="èµ é€ä¸€ä¸ªæäº¤å¼€æºåº“çš„shellè„šæœ¬"></a>èµ é€ä¸€ä¸ªæäº¤å¼€æºåº“çš„shellè„šæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> éªŒè¯æœ¬åœ° pod lib lint</span></span><br><span class="line">echo &#x27;pod lib lint...\n&#x27;</span><br><span class="line">pod lib lint</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹æ‹‰git  git pull</span></span><br><span class="line">echo &#x27;\ngit pull...\n&#x27;</span><br><span class="line">git pull</span><br><span class="line">echo `git pull`</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸Šä¼ git git add git commit git push</span></span><br><span class="line">echo &quot;git add . \n&quot;</span><br><span class="line">git add .</span><br><span class="line">echo &quot;Enter a commit message: \c&quot;</span><br><span class="line">read commitMsg</span><br><span class="line">echo &quot;git commit -m $commitMsg&quot;</span><br><span class="line">git commit -m &#x27;$commitMsg&#x27;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> tag git tag  git push --tags</span></span><br><span class="line">echo &quot;\ngit push ...\n&quot;</span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line">echo &quot;\nEnter tag version: \c&quot;</span><br><span class="line">read tagVersion</span><br><span class="line">git tag $tagVersion</span><br><span class="line">echo &quot;\n git push --tags ...&quot;</span><br><span class="line">git push --tags</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿œç¨‹éªŒè¯ pod spec lint</span></span><br><span class="line">echo &quot;\npod spec lint ...\n&quot;</span><br><span class="line">pod spec lint</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æäº¤ä»£ç  pod trunk</span></span><br><span class="line">echo &quot;\npod trunk push ...\n&quot;</span><br><span class="line">pod trunk push [yourprojectname].podspec</span><br></pre></td></tr></table></figure><p>ğŸ‘ğŸ‘ğŸ‘</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LLDBè°ƒè¯•iOSç¨‹åºï¼ˆäºŒï¼‰â€”â€” é«˜çº§ç”¨æ³•</title>
      <link href="LLDB-Advanced-Usage/"/>
      <url>LLDB-Advanced-Usage/</url>
      
        <content type="html"><![CDATA[<p>æ–­ç‚¹è°ƒè¯•æ˜¯æ¯ä¸€ä¸ªå¼€å‘äººå‘˜çš„å¿…å¤‡æŠ€èƒ½ï¼Œåœ¨iOSå¼€å‘ä¸­LLDBä½œä¸ºå®˜æ–¹çš„è°ƒè¯•å·¥å…·æ˜¯iOSå¼€å‘è€…å¿…é¡»æŒæ¡çš„ã€‚</p><a id="more"></a><h3 id="å·§ç”¨helpå‘½ä»¤"><a href="#å·§ç”¨helpå‘½ä»¤" class="headerlink" title="å·§ç”¨helpå‘½ä»¤"></a>å·§ç”¨<code>help</code>å‘½ä»¤</h3><p>LLDBä¸­çš„å‘½ä»¤éå¸¸å¤šï¼Œè™½ç„¶æœ‰ä¸€äº›ç®—æ˜¯å¸¸ç”¨çš„ï¼Œä½†æ˜¯è¦å®Œå…¨è®°ä½ä¹Ÿå¾ˆéš¾ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨<code>help</code>å‘½ä»¤ã€‚æ¯”å¦‚è¦æŸ¥çœ‹<code>breakPoint</code>çš„ç”¨æ³•ï¼Œå¯ä»¥å…ˆæŸ¥çœ‹å®ƒçš„è‡ªå‘½ä»¤ï¼š<br>![help breakpoint](<a href="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/help">http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/help</a> breakpoint.png)<br>å›¾ä¸­åˆ—ä¸¾å‡ºäº†æ‰€æœ‰çš„<code>breakpoint</code>çš„å­å‘½ä»¤ã€‚</p><p>è¯·çœ‹æœ€åä¸€è¡Œ<code>For more help on any particular subcommand, type &#39;help &lt;command&gt; &lt;subcommand&gt;&#39;</code>ã€‚æ ¹æ®è¿™æ¡æç¤ºï¼Œæˆ‘ä»¬æ¥æŸ¥çœ‹å…¶ä¸­ä¸€æ¡å­å‘½ä»¤çš„è¯¦ç»†ç”¨æ³•ã€‚<br>![help breakpoint](<a href="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/help">http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/help</a> breakpoint set.png)<br>å›¾ä¸­åªæ˜¯æˆªå–äº†éƒ¨åˆ†å†…å®¹ã€‚</p><p>ç”±æ­¤å¯è§LLDBç»™æˆ‘ä»¬æä¾›çš„<code>help</code>å‘½ä»¤è¿˜æ˜¯å¾ˆå¼ºå¤§çš„ã€‚æˆ‘ä»¬åœ¨å¹³æ—¶çš„è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°äº†ä¸ç¡®å®šå‘½ä»¤æ˜¯ä»€ä¹ˆäº†ï¼Œå¯ä»¥ä½¿ç”¨<code>help</code>å‘½ä»¤æ¥æŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<strong>è‡ªåŠ¨æç¤º</strong>åŠŸèƒ½æ¥å¸®åŠ©æˆ‘ä»¬ã€‚</p><h3 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h3><p>æ‰§è¡Œæµç¨‹æ§åˆ¶çš„å‘½ä»¤åŒ…æ‹¬<code>process</code>ã€<code>breakpoint</code>ã€<code>thread</code>ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹<a href="http://www.cocoachina.com/swift/20171013/20789.html">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><p>è¿™é‡Œåªè®¨è®ºè®¾ç½®å‘½ä¸­æ–­ç‚¹åæ‰§è¡Œçš„å‘½ä»¤<code>breakpoint command add &lt;#æ–­ç‚¹#&gt;</code>ã€‚</p><p>é¦–å…ˆä½¿ç”¨<code>breakpoint list</code>æ¥æŸ¥çœ‹æ‰€æœ‰çš„æ–­ç‚¹ã€‚<br>![breakpoint list](<a href="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint">http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint</a> list.png)<br>å…¶ä¸­ï¼Œå‰é¢çš„æ•°å­—æ˜¯æ–­ç‚¹çš„åºå·ï¼Œå¯ä»¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ–­ç‚¹ã€‚å›¾ä¸­çš„1/2éƒ½æ˜¯å…¨å±€æ–­ç‚¹ï¼Œ3æ˜¯æˆ‘è‡ªå·±åŠ çš„æ–­ç‚¹ã€‚ä¸‹é¢æˆ‘ä»¬ç»™3.1æ–­ç‚¹å¢åŠ æ‰§è¡Œåçš„æŒ‡ä»¤ï¼š<br>![breakpoint command add](<a href="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint">http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint</a> command add.png)<br>å¦‚å›¾ï¼Œæˆ‘ä»¬åœ¨æ–­ç‚¹å‡ºåˆ†åˆ«æ‰§è¡Œ<code>po self</code>ã€<code>po self.view</code>ã€<code>continue</code>ã€‚å…¶ä¸­<code>continue</code><strong>è¡¨ç¤ºåˆ°æ­¤æ–­ç‚¹åç»§ç»­æ‰§è¡Œï¼Œè¿™åœ¨å¾ªç¯ç­‰åœºæ™¯ç‰¹åˆ«æœ‰ç”¨</strong>ã€‚å‘½ä»¤çš„æ‰§è¡Œç»“æœä¸ºï¼š<br>![breakpoint command add result](<a href="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint">http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint</a> command add result.png)</p><p>è¿™ç§æ–¹æ³•åœ¨éœ€è¦å¤šæ¬¡æ‰§è¡Œçš„åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œå®Œå…¨å¯ä»¥ä»£æ›¿ä½¿ç”¨<code>print()</code>æ¥æŸ¥çœ‹å˜é‡å€¼çš„æ–¹æ¡ˆã€‚</p><h3 id="ç»™æ–­ç‚¹å¢åŠ è§¦å‘æ¡ä»¶"><a href="#ç»™æ–­ç‚¹å¢åŠ è§¦å‘æ¡ä»¶" class="headerlink" title="ç»™æ–­ç‚¹å¢åŠ è§¦å‘æ¡ä»¶"></a><strong><em>ç»™æ–­ç‚¹å¢åŠ è§¦å‘æ¡ä»¶</em></strong></h3><p>æœ‰è¿™æ ·ä¸€ç§åœºæ™¯ï¼šåœ¨ä¸€ä¸ªå¾ªç¯ä¸­ï¼Œæˆ‘ä»¬åªè¦åœ¨æŸäº›æ¡ä»¶ä¸‹æ‰éœ€è¦è§¦å‘æ–­ç‚¹ã€‚å¯ä»¥è¿™æ ·è®¾ç½®ï¼š<br>![breakpoint condition](<a href="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint">http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint</a> condition.png)</p><h4 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h4><p><a href="http://www.cocoachina.com/swift/20171013/20789.html">ä½¿ç”¨LLDBè°ƒè¯•Swift</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LLDBè°ƒè¯•iOSï¼ˆä¸€ï¼‰â€”â€” åˆè¯†LLDB</title>
      <link href="Get-To-Know-LLDB/"/>
      <url>Get-To-Know-LLDB/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯LLDB"><a href="#ä»€ä¹ˆæ˜¯LLDB" class="headerlink" title="ä»€ä¹ˆæ˜¯LLDB"></a><strong>ä»€ä¹ˆæ˜¯LLDB</strong></h3><p>LLDBæ˜¯ä¸‹ä¸€ä»£ã€é«˜æ€§èƒ½çš„è°ƒè¯•å™¨ã€‚å®ƒæ˜¯ä½œä¸ºä¸€ç»„å¯é‡ç”¨ç»„ä»¶æ„å»ºçš„ï¼Œå®ƒå¯ä»¥é«˜åº¦åˆ©ç”¨è¾ƒå¤§<strong>LLVM</strong>é¡¹ç›®ä¸­çš„ç°æœ‰åº“ï¼Œä¾‹å¦‚<strong>Clang</strong>è¡¨è¾¾å¼è§£æå™¨å’ŒLLVMåæ±‡ç¼–å™¨ã€‚</p><p>LLDBæ˜¯Mac OS Xä¸ŠXcodeçš„é»˜è®¤è°ƒè¯•å™¨ï¼Œæ”¯æŒåœ¨æ¡Œé¢å’ŒiOSè®¾å¤‡ã€æ¨¡æ‹Ÿå™¨ä¸Šè°ƒè¯•C/Objective-C/C++/Swiftã€‚</p><a id="more"></a><h3 id="LLDBçš„è¿›æ­¥"><a href="#LLDBçš„è¿›æ­¥" class="headerlink" title="LLDBçš„è¿›æ­¥"></a>LLDBçš„è¿›æ­¥</h3><ol><li>æ”¯æŒç°ä»£åŒ–çš„å¤šçº¿ç¨‹ç¨‹åº</li><li>ä»¥é«˜æ•ˆçš„æ–¹å¼å¤„ç†è°ƒè¯•ç¬¦å·</li><li>ä½¿ç”¨åŸºäºç¼–ç å™¨ï¼ˆLLVMï¼‰çš„ä»£ç çŸ¥è¯†</li><li>æ”¯æŒæ’ä»¶æ‰©å±•</li></ol><h3 id="ä¸LLVMé›†æˆçš„ä¼˜åŠ¿"><a href="#ä¸LLVMé›†æˆçš„ä¼˜åŠ¿" class="headerlink" title="ä¸LLVMé›†æˆçš„ä¼˜åŠ¿"></a>ä¸LLVMé›†æˆçš„ä¼˜åŠ¿</h3><p>LLDBå½“å‰å°†è°ƒè¯•ä¿¡æ¯è½¬æ¢ä¸ºclangç±»å‹ï¼Œä»¥ä¾¿å®ƒå¯ä»¥åˆ©ç”¨clangç¼–è¯‘å™¨åŸºç¡€ç»“æ„ã€‚ è¿™å…è®¸LLDBåœ¨è¡¨è¾¾å¼ä¸­æ”¯æŒæœ€æ–°çš„Cï¼ŒC ++ï¼ŒObjective Cå’ŒObjective C ++è¯­è¨€åŠŸèƒ½å’Œè¿è¡Œæ—¶ï¼Œè€Œæ— éœ€é‡æ–°å®ç°è¿™äº›åŠŸèƒ½ã€‚ åœ¨è¿›è¡Œè¡¨è¾¾å¼çš„å‡½æ•°è°ƒç”¨ï¼Œåˆ†è§£æŒ‡ä»¤å’Œæå–æŒ‡ä»¤ç»†èŠ‚æ—¶ï¼Œå®ƒè¿˜åˆ©ç”¨ç¼–è¯‘å™¨å¤„ç†æ‰€æœ‰ABIç»†èŠ‚ï¼Œç­‰ç­‰ã€‚</p><p>ä¸»è¦å¥½å¤„åŒ…æ‹¬:</p><ul><li>Cï¼ŒC ++ï¼ŒObjective Cçš„æœ€æ–°è¯­è¨€æ”¯æŒ</li><li>å¯ä»¥å£°æ˜å±€éƒ¨å˜é‡å’Œç±»å‹çš„å¤šè¡Œè¡¨è¾¾å¼</li><li>æ”¯æŒæ—¶ä½¿ç”¨JITè¡¨è¾¾å¼</li><li>åœ¨æ— æ³•ä½¿ç”¨JITæ—¶è¯„ä¼°è¡¨è¾¾å¼Intermediate Intermediateationï¼ˆIRï¼‰</li></ul><h3 id="LLDBä¸GDBçš„ä¸åŒ"><a href="#LLDBä¸GDBçš„ä¸åŒ" class="headerlink" title="LLDBä¸GDBçš„ä¸åŒ"></a>LLDBä¸GDBçš„ä¸åŒ</h3><pre><code>1. GDBæ˜¯GNUé¡¹ç›®ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸ºäº†å’ŒGNUç¼–è¯‘å™¨ååŒå·¥ä½œè€Œåˆ›å»ºçš„2. LLDBæ˜¯LLVMé¡¹ç›®ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸ºäº†å’ŒLLVMç¼–è¯‘å™¨ååŒå·¥ä½œè€Œåˆ›å»ºçš„3. GDBå’ŒLLDBçš„å‘½ä»¤æœ‰ä¸€äº›ä¸åŒã€‚LLDBå‘½ä»¤å°±åƒOCè¯­æ³•ä¸€æ ·ï¼Œè¦æœ‰å½¢å‚åï¼Œè€ŒGDBåˆ™ä¸éœ€è¦ï¼Œè¿™ä¸€ç‚¹ä¸Šå­°ä¼˜å­°åŠ£å°±è§ä»è§æ™ºäº†ã€‚</code></pre><h3 id="LLDBå‘½ä»¤ç»“æ„"><a href="#LLDBå‘½ä»¤ç»“æ„" class="headerlink" title="LLDBå‘½ä»¤ç»“æ„"></a>LLDBå‘½ä»¤ç»“æ„</h3><p>ä¸ºäº†æ›´å¥½çš„ä½¿ç”¨å’Œäº†è§£LLDBï¼Œæ‰€æœ‰å­¦ä¹ LLDBçš„ç”¨æˆ·éƒ½åº”è¯¥äº†è§£LLDBçš„å‘½ä»¤ç»“æ„<br>LLDBçš„å‘½ä»¤éƒ½æ˜¯è¿™æ ·çš„å½¢å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;command&gt; [&lt;subcommand&gt; [&lt;subcommand&gt;...]] &lt;action&gt; [-options [option-value]] [argument [argument...]]</span><br></pre></td></tr></table></figure><p><code>command</code>å’Œ<code>subcommand</code>éƒ½æ˜¯LLDBè°ƒè¯•å™¨å¯¹è±¡çš„åç§°ã€‚å‘½ä»¤å’Œå­å‘½ä»¤æŒ‰ç…§å±‚æ¬¡ç»“æ„æ’åˆ—ï¼šç‰¹å®šçš„å‘½ä»¤å¯¹è±¡ä¸ºå…¶åçš„å­å‘½ä»¤å¯¹è±¡åˆ›å»ºä¸Šä¸‹æ–‡ï¼Œè¯¥å¯¹è±¡å†æ¬¡ä¸ºä¸‹ä¸€ä¸ªå­å‘½ä»¤æä¾›ä¸Šä¸‹æ–‡ï¼Œä¾æ­¤ç±»æ¨ã€‚<br><code>action</code>æ˜¯ä½ æƒ³è¦åœ¨è°ƒè¯•å™¨å¯¹è±¡ï¼ˆå‰é¢æåˆ°çš„å‘½ä»¤å’Œå­å‘½ä»¤ï¼‰ç»„æˆçš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œçš„ä¸€äº›æ“ä½œã€‚<br><code>options</code>ï¼šè¡Œä¸ºä¿®æ”¹å™¨(action modifiers)ã€‚é€šå¸¸å¸¦æœ‰ä¸€äº›å€¼ã€‚<br><code>argument</code>ï¼šæ ¹æ®ä½¿ç”¨çš„å‘½ä»¤çš„ä¸Šä¸‹æ–‡æ¥è¡¨ç¤ºå„ç§ä¸åŒçš„ä¸œè¥¿ã€‚</p><p>LLBDå‘½ä»¤è¡Œçš„è§£ææ“ä½œåœ¨æ‰§è¡Œå‘½ä»¤ä¹‹å‰å®Œæˆã€‚ä¸Šé¢çš„è¿™äº›å…ƒç´ ä¹‹é—´é€šè¿‡ç©ºæ ¼æ¥åˆ†å‰²ï¼Œå¦‚æœæŸä¸€å…ƒç´ è‡ªèº«å«æœ‰ç©ºæ ¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŒå¼•ç”¨ã€‚è€Œå¦‚æœå…ƒç´ ä¸­åˆåŒ…å«åŒå¼•å·ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åæ–œæ ï¼›æˆ–è€…å…ƒç´ ä½¿ç”¨å•å¼•å·ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(lldb) command [subcommand] -option &quot;some \&quot;quoted\&quot; string&quot;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è¿™æ ·è¡¨ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(lldb) command [subcommand] -option &quot;some \&quot;quoted\&quot; string&quot;</span><br></pre></td></tr></table></figure><p>è¿™ç§å‘½ä»¤è§£æè®¾è®¡è§„èŒƒäº†LLDBå‘½ä»¤è¯­æ³•ï¼Œå¹¶å¯¹æ‰€æœ‰å‘½ä»¤åšäº†ä¸ªç»Ÿä¸€ã€‚</p><h3 id="ä½¿ç”¨ä¸¾ä¾‹"><a href="#ä½¿ç”¨ä¸¾ä¾‹" class="headerlink" title="ä½¿ç”¨ä¸¾ä¾‹"></a>ä½¿ç”¨ä¸¾ä¾‹</h3><p>è°ƒè¯•å¿«æ·é”®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">command+shift+Y æ‰“å¼€è°ƒè¯•çª—å£</span><br><span class="line">command+Y è°ƒè¯•è¿è¡Œç¨‹åº</span><br><span class="line">command+option+P ç»§ç»­</span><br><span class="line">command+shift+O è·³è¿‡</span><br><span class="line">command+shift+I è¿›å…¥</span><br><span class="line">command+shift+T è·³å‡º</span><br></pre></td></tr></table></figure><ul><li><code>p/po</code> è¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯ç”¨æ¥åšè¾“å‡ºè°ƒç”¨çš„ï¼Œå…¶ä¸­pç”¨æ¥æ‰“å°å¸¸é‡ï¼Œpoç”¨æ¥æ‰“å°å¯¹è±¡<br><img src="http://image.iosprogrammer.hongbility.com/Get-To-Know-LLDB/p%E5%92%8Cpo.png" alt="p/po"></li><li><code>call</code>ï¼šä¸€èˆ¬åªåœ¨ä¸éœ€è¦æ˜¾ç¤ºè¾“å‡ºï¼Œæˆ–æ˜¯æ–¹æ³•æ— è¿”å›å€¼æ—¶ä½¿ç”¨callã€‚æƒ³è¦åœ¨debugé˜¶æ®µä¿®æ”¹viewçš„èƒŒæ™¯è‰²ã€è¯•ä¸€ä¸‹labelæ˜¾ç¤ºæ›´å¤šæ–‡å­—çš„æ•ˆæœã€è°ƒç”¨ä¸€ä¸ªå¿˜è®°è°ƒç”¨çš„å‡½æ•°ã€‚ã€‚ã€‚éƒ½å¯ä»¥ä½¿ç”¨callå‘½ä»¤</li><li><code>e</code>ï¼šå¯ä»¥åœ¨è°ƒè¯•æ—¶åŠ¨æ€æ‰§è¡ŒæŒ‡å®šè¡¨è¾¾å¼ï¼Œå¹¶å°†ç»“æœæ‰“å°å‡ºæ¥ã€‚å¸¸ç”¨äºåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ä¿®æ”¹å˜é‡çš„å€¼ã€‚<img src="http://image.iosprogrammer.hongbility.com/Get-To-Know-LLDB/e.png" alt="e"></li></ul><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul><li><a href="http://blog.csdn.net/talentedlas/article/details/51945569">LLVMä¸Clangçš„æ¦‚è¿°åŠå…³ç³»</a></li><li><a href="http://lldb.llvm.org/">LLDB Homepage</a></li><li><a href="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/gdb_to_lldb_transition_guide/document/lldb-basics.html#//apple_ref/doc/uid/TP40012917-CH2-SW1">LLDB Quick Start Guide</a></li><li><a href="http://www.cocoachina.com/swift/20171013/20789.html">ä½¿ç”¨LLDBè°ƒè¯•Swift</a></li><li><a href="https://mp.weixin.qq.com/s/us5aXQAwSSoxkUMOVzofkg">ä»€ä¹ˆæ˜¯LLVMï¼ŸSwiftï¼ŒRustï¼ŒClangç­‰è¯­è¨€èƒŒåçš„åŸåŠ›</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XcodeæŒç»­é›†æˆç®€ä»‹</title>
      <link href="XCode-Server-CI/"/>
      <url>XCode-Server-CI/</url>
      
        <content type="html"><![CDATA[<p>XcodeæŒç»­é›†æˆç®€ä»‹</p><a id="more"></a><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>Xcode 9.2</li><li>macOS High Sierra 10.13.2</li></ul><h3 id="æœ¬æ–‡çš„ç›®çš„"><a href="#æœ¬æ–‡çš„ç›®çš„" class="headerlink" title="æœ¬æ–‡çš„ç›®çš„"></a>æœ¬æ–‡çš„ç›®çš„</h3><ul><li>ä»‹ç»Xcode CIå’ŒXcode Server</li><li>æ‰‹æŠŠæ‰‹æ•™ä½ ä»å¤´å¼€å§‹åˆ›å»ºä¸€ä¸ªXcode Serveræ¥è¿›è¡Œè‡ªåŠ¨é›†æˆ</li></ul><h3 id="Xcode-CIå’ŒXcode-Server"><a href="#Xcode-CIå’ŒXcode-Server" class="headerlink" title="Xcode CIå’ŒXcode Server"></a>Xcode CIå’ŒXcode Server</h3><p>æ­£å¦‚<a href="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/xcode_guide-continuous_integration/index.html#//apple_ref/doc/uid/TP40013292-CH1-SW1">è‹¹æœå¼€å‘è€…ç½‘ç«™</a>æ‰€æè¿°çš„</p><blockquote><p>In Xcode, continuous integration is the process of automating and streamlining the building, analyzing, testing, and archiving of your Mac and iOS apps, in order to ensure that they are always in a releasable state.</p></blockquote><p>Xcode CIæ˜¯ä¸€ç§ä¸ºäº†ç¡®ä¿ä½ çš„APPå§‹ç»ˆå¤„äºå¯å‘å¸ƒçŠ¶æ€è€Œå­˜åœ¨çš„è‡ªåŠ¨çš„ã€æµå¼çš„è¿‡ç¨‹ï¼Œæ•´ä¸ªè¿‡ç¨‹åŒ…æ‹¬äº†ç¼–è¯‘ã€è§£æã€æµ‹è¯•å’Œæ‰“åŒ…ã€‚<br>Xcode Serveræ˜¯ç”¨æ¥è¿œç¨‹è¿›è¡Œè¿™ä¸ªè¿‡ç¨‹çš„æœåŠ¡å™¨ã€‚</p><p>æ•´ä¸ªè¿‡ç¨‹ç±»ä¼¼ä¸‹å›¾<br><img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Xcode-CI-Intro.png"></p><ul><li>ä½¿ç”¨è¿™ä¸ªè¿‡ç¨‹çš„ç›®çš„å°±æ˜¯ä¸ºäº†é›†æˆå¼€å‘APPçš„æ•´ä¸ªè¿‡ç¨‹ï¼Œè®©è¿™ä¸ªè¿‡ç¨‹å®Œå…¨è‡ªåŠ¨åŒ–è¿›è¡Œã€‚é€šè¿‡Xcode CIå¯ä»¥åœ¨æ¯æ¬¡æäº¤ä»£ç åè‡ªåŠ¨è¿›è¡Œç¼–è¯‘åˆ°æ‰“åŒ…çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”å¯ä»¥æŸ¥çœ‹ä»£ç çš„æµ‹è¯•è¦†ç›–ç‡ã€‚å› ä¸ºå®ƒå¯ä»¥è‡ªåŠ¨æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼Œå¯ä»¥æ›´æ–¹ä¾¿çš„æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šã€‚</li></ul><h3 id="é›†æˆ"><a href="#é›†æˆ" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h3><ol><li><p>æ‰“å¼€Xcode Server</p><ol><li>ç‚¹å‡»Xcodeèœå•æ ä¸­çš„Xcodeé€‰é¡¹å¡çš„Xcode Serverâ€¦</li><li>å°†å³ä¸Šè§’çš„å¼€å…³è°ƒåˆ°On</li></ol></li><li><p>é…ç½®Xcode Server</p><ol><li><p>ç‚¹å‡»Producté€‰é¡¹å¡ä¸­çš„Create Botâ€¦</p></li><li><p>é…ç½®botçš„Nameã€‚Serverä¸€èˆ¬ä¸éœ€è¦<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Create-a-new-bot.png"></p></li><li><p>é…ç½®ä»£ç åº“<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Configure-source-control-for-this-bot.png"><br><img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Configrure-souce-code-2.png"></p><blockquote><p>è¿™é‡Œé€‰æ‹©çš„æ˜¯ä½¿ç”¨.sshçš„å…¬é’¥æ¥é…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨UserName And Passwordæˆ–è€…Bot Specific SSh Keysã€‚</p></blockquote></li><li><p>é€‰æ‹©åˆ†æ”¯</p></li><li><p>é…ç½®Botçš„ç¯å¢ƒ<br><img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Configure-build-configuration.png"></p><blockquote><p>è¿™é‡Œå¯ä»¥é€‰æ‹©åœ¨é›†æˆçš„æ—¶å€™æ˜¯å¦è¿›è¡Œé™æ€åˆ†æã€æµ‹è¯•å’Œæ‰“åŒ…</p></blockquote></li><li><p>é…ç½®é›†æˆå‘¨æœŸ<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Schedule-bot-integrations.png"></p><blockquote><p>å…¶ä¸­ï¼ŒIngegrateé€‰é¡¹ä¸­Periodicallyè¡¨ç¤ºæŒ‰å‘¨æœŸé›†æˆï¼ŒåŒ…æ‹¬å°æ—¶ã€å¤©ã€å‘¨ï¼›Cleané€‰é¡¹è¡¨ç¤ºå¯¹é¡¹ç›®è¿›è¡ŒCleançš„å‘¨æœŸï¼ŒåŒ…æ‹¬Always/Once a day/Once a week/Neverã€‚</p></blockquote></li><li><p>é€‰æ‹©é›†æˆçš„ç›®æ ‡è®¾å¤‡ã€‚å¯ä»¥è®¾ç½®æ¨¡æ‹Ÿå™¨å’ŒçœŸæœºã€æ‰€æœ‰çš„æ¨¡æ‹Ÿå™¨ã€æ‰€æœ‰çš„çœŸæœºã€æŒ‡å®šçš„æ¨¡æ‹Ÿå™¨å’ŒæŒ‡å®šçš„çœŸæœºã€‚</p></li><li><p>é…ç½®é¡¹ç›®è¯ä¹¦</p></li><li><p>é›†æˆå®Œæˆ<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/create-ci-success.png"></p></li></ol></li></ol><h3 id="å¯èƒ½é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"><a href="#å¯èƒ½é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"></a>å¯èƒ½é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h3><ol><li>The sandbox is not in sync with the Podfile.lock.Run â€˜pod installâ€™ or update your CocoaPods installation.</li><li>Invalid byte sequence in US_ASCII(Argument Error)</li></ol><blockquote><p>å…¶ä¸­ç¬¬ä¸€ä¸ªé—®é¢˜éœ€è¦åœ¨æ¯æ¬¡integrateä¹‹å‰æ‰§è¡Œ<code>pod install</code>ï¼›ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ç”±äºRubyçš„ç¼–ç é—®é¢˜å¯¼è‡´çš„ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜çš„ç»Ÿä¸€è§£å†³æ–¹æ¡ˆæ˜¯ç»™Botæ·»åŠ ä¸€ä¸ªprebuild scriptï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š 1. Edit Botâ€¦  2. Triggers 3. Click â€˜+â€™, select â€˜Pre-Integraation Scriptâ€™<br>å…·ä½“çš„è„šæœ¬å†…å®¹ä¸ºï¼š<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/pre-script.jpg"><br>ä¸‹é¢å¯¹è¿™ä¸ªè„šæœ¬åšä¸€ä¸ªè§£é‡Šè¯´æ˜:<br>(1). ç¬¬2è¡Œæ˜¯ç”¨æ¥æŸ¥çœ‹è„šæœ¬ï¼ˆä¹Ÿå°±æ˜¯Serverï¼‰å½“å‰çš„ç¯å¢ƒ<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/set.jpg"><br>(2). ç¬¬4è¡Œæ˜¯åˆ‡æ¢åˆ°é¡¹ç›®æ‰€åœ¨ç›®å½•ï¼Œç›®å½•åœ°å€å¯ä»¥ä»ç¯å¢ƒçš„PWDå˜é‡è·å¾—<br>(3). 6-8è¡Œæ˜¯ç”¨æ¥è§£å†³ç¬¬2ä¸ªé—®é¢˜çš„<br>(4). ç¬¬10è¡Œæ¥æ‰§è¡Œ<code>pod install</code></p></blockquote><h3 id="è„šæœ¬ä¸Šä¼ åˆ°è’²å…¬è‹±"><a href="#è„šæœ¬ä¸Šä¼ åˆ°è’²å…¬è‹±" class="headerlink" title="è„šæœ¬ä¸Šä¼ åˆ°è’²å…¬è‹±"></a>è„šæœ¬ä¸Šä¼ åˆ°è’²å…¬è‹±</h3><p>   å¢åŠ ä¸€ä¸ªPost-Integration Scripts<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/post_integration_scripy.jpg" alt="post_integration_script"></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Instrumentså·¥å…·æµ‹è¯•CPUä¸å¸¸è§å¯¹CPUå ç”¨è¿‡é«˜çš„æ“ä½œ</title>
      <link href="Using-Instruments-To-Oprimize-CPU-Performance/"/>
      <url>Using-Instruments-To-Oprimize-CPU-Performance/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨Xcodeè‡ªå¸¦çš„Instrumentså·¥å…·ï¼Œæ£€æµ‹CPU</p><a id="more"></a><h2 id="Instruments"><a href="#Instruments" class="headerlink" title="Instruments"></a>Instruments</h2><p>æ‰“å¼€Instrumentsï¼šXcode -&gt; Product -&gt; Profile æˆ–è€… cmd + i<br>å¯åŠ¨åå¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/424855-8c5d278b6d7b35c0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Instruments.png"><br>å…¶ä¸­å¸¸ç”¨çš„æœ‰ç”¨æ¥æ£€æµ‹å†…å­˜æ³„éœ²çš„Leakså’ŒæŸ¥çœ‹CPUæ¶ˆè€—æƒ…å†µçš„Time Profilerã€‚ä¸‹é¢ä»‹ç»æŸ¥çœ‹CPUä½¿ç”¨æƒ…å†µçš„Time Profiler</p><h3 id="Time-Profier"><a href="#Time-Profier" class="headerlink" title="Time Profier"></a>Time Profier</h3><ol><li>æ‰“å¼€Time Profier</li></ol><p><img src="https://upload-images.jianshu.io/upload_images/424855-4322b66e910ec9ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Timer profile 9.0.png"></p><blockquote><p>è¦æŸ¥çœ‹æ¯ä¸ªå‡½æ•°çš„CPUæ€§èƒ½ï¼Œç›´æ¥åŒå‡»å‡½æ•°å°±å¯ä»¥å®šä½åˆ°ä»£ç äº†ã€‚<br>å‡½æ•°å‰é¢çš„æ•°å€¼æ˜¯æ‰€ç”¨æ—¶é—´ï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªæ—¶é—´åˆ¤æ–­æ˜¯æ˜¯å¦éœ€è¦ä¼˜åŒ–ã€‚</p></blockquote><p>æœ‰äº†ä¸Šé¢çš„åŸºç¡€çŸ¥è¯†å°±å¯ä»¥å¯¹Appçš„CPUæ¶ˆè€—æƒ…å†µè¿›è¡Œå®æ—¶æ£€æµ‹äº†ã€‚</p><h3 id="å¸¸è§çš„å¯¹CPUæ¶ˆè€—è¿‡é«˜çš„æ“ä½œ"><a href="#å¸¸è§çš„å¯¹CPUæ¶ˆè€—è¿‡é«˜çš„æ“ä½œ" class="headerlink" title="å¸¸è§çš„å¯¹CPUæ¶ˆè€—è¿‡é«˜çš„æ“ä½œ"></a>å¸¸è§çš„å¯¹CPUæ¶ˆè€—è¿‡é«˜çš„æ“ä½œ</h3><ul><li>åŠ è½½å›¾ç‰‡<br>ä¸¤ç§ä¸åŒæ–¹å¼åœ¨ç›¸åŒæ—¶é—´å†…çš„CPUæ¶ˆè€—æƒ…å†µå¯¹æ¯”ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/424855-70124a2646fe806a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br><img src="http://upload-images.jianshu.io/upload_images/424855-0f98cb8f0b9d974b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2016-03-13 ä¸‹åˆ6.25.34.png"><br>å¹¶ä¸”ï¼Œä½¿ç”¨5sçœŸæœºæµ‹è¯•ä»¥ä¸‹ä»£ç 40såMemoryè¿‡é«˜é€ æˆé—ªé€€ï¼Œä½†æ˜¯ä½¿ç”¨<code>imageWithContentOfFile</code>æ•°åˆ†é’Ÿåæ²¡æœ‰å‡ºç°é—ªé€€ç°è±¡<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while (1)</span><br><span class="line">Â  Â  &#123;</span><br><span class="line">Â  Â  Â  Â  [UIImage imageNamed:@&quot;58_58&quot;];</span><br><span class="line">Â  Â  &#125;</span><br></pre></td></tr></table></figure></li><li>åˆå§‹åŒ–å¯¹è±¡<ul><li>æ­£åˆ™è¡¨è¾¾å¼</li><li>æ—¶é—´æˆ³<br><img src="http://upload-images.jianshu.io/upload_images/424855-612ee50bf16040c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2016-03-13 ä¸‹åˆ6.37.50.png"></li></ul></li></ul><p>åœ¨éœ€è¦å¤šæ¬¡ä½¿ç”¨çš„åœ°æ–¹å°½é‡åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œç„¶åå¤šæ¬¡ä½¿ç”¨</p><ul><li>è§†å›¾å¸ƒå±€<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;-(void)layoutSubviews</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; do something</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[view setNeedsLayout];</span><br><span class="line">[view layoutIfNeeded];</span><br></pre></td></tr></table></figure>è¿™äº›å‡½æ•°å°½é‡ä¸è¦ä½¿ç”¨ã€‚æ¯å¯¹viewè¿›è¡Œä¸€æ¬¡é‡æ–°å¸ƒå±€å°±ä¼šå¯¹CPUå¢åŠ å¾ˆå¤šæ¶ˆè€—ã€‚</li><li>ç»˜åˆ¶å›¾å±‚<br>éœ€è¦ç”¨åˆ°<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[layout rendInContext:]</span><br></pre></td></tr></table></figure>çš„åœ°æ–¹å°½é‡æ¢æˆiOS7ä»¥åæ–°å¢çš„æ–¹æ³•ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[view drawViewHierachyInRect:]</span><br></pre></td></tr></table></figure>æ€§èƒ½åŒæ ·å¯ä»¥è·å¾—å¾ˆå¤§çš„æå‡</li></ul><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SocketRocketä½¿ç”¨</title>
      <link href="iOS-SocketRocket/"/>
      <url>iOS-SocketRocket/</url>
      
        <content type="html"><![CDATA[<p>SocketRocketæ˜¯Facebookå¼€æºçš„ä¸€ä¸ªç”¨äºÂ iOS, macOS and tvOSå®¢æˆ·ç«¯çš„websocketæ¡†æ¶ã€‚<br></p><a id="more"></a><p>WebSocketçš„åè®®åˆ†æå’ŒSocketRocketæ¡†æ¶æºç åˆ†æåœ¨<a href="http://www.iosprogrammer.tech/WebSocket-And-SocketRocket-Source-Analysis/">è¿™é‡Œ</a></p><h2 id="1-é›†æˆ"><a href="#1-é›†æˆ" class="headerlink" title="1. é›†æˆ"></a>1. é›†æˆ</h2><ul><li><p>ä½¿ç”¨cocoapods<br>  åªéœ€è¦åœ¨podfileæ–‡ä»¶ä¸­åŠ å…¥<code>pod &#39;SocketRocket&#39;</code>ï¼Œç„¶åæ‰§è¡Œ<code>pod install</code>å°±å¯ä»¥äº†</p></li><li><p>ä¸ä½¿ç”¨cocoapods</p><ol><li><p>æ·»åŠ æ–‡ä»¶<br>æŠŠä¸‹é¢çš„ä¸‰ä¸ªæ–‡ä»¶æ‹–å…¥é¡¹ç›®ä¸­<br><img src="http://upload-images.jianshu.io/upload_images/424855-07d19159ebcaf127.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>å…¶ä¸­ï¼ŒSocketRocket.hæ–‡ä»¶æ˜¯ç”¨æ¥å¼•å…¥æ¡†æ¶çš„æ‰€æœ‰ç±»çš„æ–‡ä»¶ï¼Œå°±åƒ&lt;UIKit/UIkit.h&gt;ã€‚ç›®å‰ï¼Œè¿™ä¸ªæ–‡ä»¶åªå¼•å…¥äº†ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥åªæœ‰ä¸€è¡Œä»£ç  <code>&lt;SocketRocket/SRWebSocket.h&gt;</code>ï¼Œè¿™æ ·çš„è¯ï¼Œç¼–è¯‘ä¼šæŠ¥é”™ï¼Œå› ä¸ºå¹¶æ²¡æœ‰ä¸€ä¸ªSocketRocketçš„frameworkï¼Œéœ€è¦æŠŠè¿™ä¸€è¡Œä»£ç æ”¹ä¸º <code>#import &quot;SRWebSocket.h&quot;</code>ã€‚</p></li><li><p>æ·»åŠ ä¾èµ–åº“<br>åœ¨Build Phases -&gt; Link Binary With Librariesé‡ŒåŠ å…¥å¦‚ä¸‹frameworksï¼š</p><ul><li>libicucore.dylib</li><li>CFNetwork.framework</li><li>Security.framework</li><li>Foundation.framework</li></ul></li></ol></li></ul><h2 id="2-ä½¿ç”¨"><a href="#2-ä½¿ç”¨" class="headerlink" title="2. ä½¿ç”¨"></a>2. ä½¿ç”¨</h2><ol><li>åˆå§‹åŒ–   åˆå§‹åŒ–æ–¹æ³•åˆ†ä¸ºä¸¤ç±»ï¼š<ul><li>é€šè¿‡ä¼ å…¥NSURLRequestçš„å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">id</span>)initWithURLRequest:(<span class="built_in">NSURLRequest</span> *)request protocols:(<span class="built_in">NSArray</span> *)protocols allowsUntrustedSSLCertificates:(<span class="built_in">BOOL</span>)allowsUntrustedSSLCertificates;</span><br><span class="line">-(<span class="keyword">id</span>)initWithURLRequest:(<span class="built_in">NSURLRequest</span> *)request protocols:(<span class="built_in">NSArray</span> *)protocols;</span><br><span class="line">-(<span class="keyword">id</span>)initWithURLRequest:(<span class="built_in">NSURLRequest</span> *)request;</span><br></pre></td></tr></table></figure></li><li>é€šè¿‡ä¼ å…¥NSURLçš„å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">id</span>)initWithURL:(<span class="built_in">NSURL</span> *)url protocols:(<span class="built_in">NSArray</span> *)protocols allowsUntrustedSSLCertificates:(<span class="built_in">BOOL</span>)allowsUntrustedSSLCertificates;</span><br><span class="line">-(<span class="keyword">id</span>)initWithURL:(<span class="built_in">NSURL</span> *)url protocols:(<span class="built_in">NSArray</span> *)protocols;</span><br><span class="line">-(<span class="keyword">id</span>)initWithURL:(<span class="built_in">NSURL</span> *)url;</span><br></pre></td></tr></table></figure>å…¶ä¸­ï¼Œä½¿ç”¨NSURLRequestè¿›è¡Œåˆå§‹åŒ–å¯ä»¥è‡ªå®šä¹‰è¯·æ±‚è¶…æ—¶æ—¶é—´<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">NSURLRequest</span> requestWithURL:url cachePolicy:<span class="built_in">NSURLRequestUseProtocolCachePolicy</span> timeoutInterval:timeoutInterval]</span><br></pre></td></tr></table></figure></li></ul></li><li>æ‰“å¼€è¿æ¥<br>ä½¿ç”¨ç¬¬ä¸€æ­¥åˆ›å»ºå‡ºæ¥çš„SRWebSocketå¯¹è±¡ï¼ˆä»¥ä¸‹ç®€ç§°â€˜å¯¹è±¡â€™ï¼‰è°ƒç”¨<code>- (void)open</code>æ¥ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚è¿™é‡Œéœ€è¦æ³¨æ„<code>// SRWebSockets are intended for one-time-use only.Â  Open should be called once and only once.</code>ä¸€ä¸ªå¯¹è±¡åªèƒ½è°ƒç”¨ä¸€æ¬¡<code>- (void)open</code>è°ƒç”¨è¿‡openåï¼Œå¯¹è±¡çš„readyStateå°±ä¸ºSR_CONNECTINGï¼Œå¦‚æœå†è°ƒç”¨openï¼Œå°±ä¼š<code>NSAssert(_readyState == SR_CONNECTING, @&quot;Cannot call -(void)open on SRWebSocket more than once&quot;);</code></li><li>å‘é€æ•°æ®<br>ä½¿ç”¨å¯¹è±¡è°ƒç”¨<code>- (void)send:(id)data</code>è¿™ä¸ªdataå¯ä»¥æ˜¯ä¸€ä¸ªUTF8çš„å­—ç¬¦ä¸²æˆ–è€…NSDataå¯¹è±¡</li><li>å…³é—­è¿æ¥<br>ä½¿ç”¨å¯¹è±¡è°ƒç”¨<code>- (void)close</code>æ¥å…³é—­ä¸€ä¸ªè¿æ¥ã€‚</li><li>å›è°ƒ<br> ä»¥delegateçš„æ–¹å¼è¿›è¡Œå›è°ƒï¼ŒåŒ…æ‹¬ä¸‹é¢å‡ ä¸ªå›è°ƒå‡½æ•°<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">SRWebSocketDelegate</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line">-(<span class="keyword">void</span>)webSocket:(SRWebSocket *)webSocket didReceiveMessage:(<span class="keyword">id</span>)message;</span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line">-(<span class="keyword">void</span>)webSocketDidOpen:(SRWebSocket *)webSocket;</span><br><span class="line">-(<span class="keyword">void</span>)webSocket:(SRWebSocket *)webSocket didFailWithError:(<span class="built_in">NSError</span> *)error;</span><br><span class="line">-(<span class="keyword">void</span>)webSocket:(SRWebSocket *)webSocket didCloseWithCode:(<span class="built_in">NSInteger</span>)code reason:(<span class="built_in">NSString</span> *)reason wasClean:(<span class="built_in">BOOL</span>)wasClean;</span><br><span class="line">-(<span class="keyword">void</span>)webSocket:(SRWebSocket *)webSocket didReceivePong:(<span class="built_in">NSData</span> *)pongPayload;</span><br><span class="line">-(<span class="built_in">BOOL</span>)webSocketShouldConvertTextFrameToString:(SRWebSocket *)webSocket;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>å…¶ä¸­ï¼Œ<ul><li><code>webSocketDidOpen</code>è¡¨ç¤ºä¸æœåŠ¡å™¨çš„è¿æ¥å»ºç«‹æˆåŠŸï¼Œè¿™æ—¶å°±å¯ä»¥ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’äº†ã€‚</li><li><code>didFailWithError</code>è¡¨ç¤ºè¿æ¥å‡ºç°é”™è¯¯ï¼ŒåŒ…æ‹¬è¿æ¥æ²¡æœ‰æˆåŠŸå»ºç«‹çš„é”™è¯¯ã€ç½‘ç»œé”™è¯¯ç­‰ã€‚å¦‚æœéœ€è¦è¿›è¡Œé‡è¿ï¼Œåº”è¯¥åœ¨è¿™é‡Œè¿›è¡Œï¼Œå¯ä»¥é‡‡ç”¨Demoé‡Œé¢çš„æ–¹å¼è¿›è¡Œé‡è¿ï¼šæŠŠä»¥åçš„å¯¹è±¡ç½®ç©º-&gt;é‡æ–°åˆå§‹åŒ–-&gt;è°ƒç”¨openã€‚åº”ç”¨åˆ‡åˆ°åå°2åˆ†é’Ÿä»¥åæ‰ä¼šå‡ºç°è¿æ¥é”™è¯¯çš„å›è°ƒã€‚</li></ul></li><li>SocketRocketå·²ç»å¯¹æ¶ˆæ¯çš„æ”¶å‘è¿›è¡Œäº†å¤„ç†ã€‚æˆ‘ä»¬æ”¶åˆ°å’Œå‘å‡ºçš„æ¶ˆæ¯éƒ½æ˜¯æ ¹æ®socketå¤´è¿›è¡Œåˆ†éš”çš„ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°æ¶ˆæ¯ä¸å®Œæ•´æˆ–è€…å¤šæ¡æ¶ˆæ¯åŒæ—¶æ”¶å‘çš„é—®é¢˜ã€‚</li></ol><p>ä¸Šé¢æ˜¯åœ¨ä½¿ç”¨SocketRocketçš„è¿‡ç¨‹ä¸­çš„æ€»ç»“ï¼Œé€šè¿‡è¿™äº›åº”è¯¥å¯ä»¥æŠŠè¿™ä¸ªæ¡†æ¶ä½¿ç”¨èµ·æ¥ï¼Œä»¥åæœ‰æ—¶é—´ä¼šç»§ç»­é’»ç ”è¿™ä¸ªæ¡†æ¶çš„æºç ã€‚SocketRocketè¿˜æ˜¯æŒºå¥½ç”¨çš„ã€‚</p><div class="note info"><p>åˆ°å…¬ä¼—å·ã€iOSå¼€å‘æ ˆã€‘å­¦ä¹ æ›´å¤šSwiftUIã€iOSå¼€å‘ç›¸å…³å†…å®¹ã€‚å›å¤â€œåšå®¢â€å…è´¹è·å–å„å¤§äº’è”ç½‘å…¬å¸é¢è¯•é¢˜ã€‚</p></div>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Array().addObject(ViewController())é€ æˆæ§åˆ¶å™¨ä¸é‡Šæ”¾</title>
      <link href="Array-addObject-ViewController-cause-viewcontroller-not-release/"/>
      <url>Array-addObject-ViewController-cause-viewcontroller-not-release/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªå•ä¾‹<code>Singleton</code>ã€‚æœ‰å¤šä¸ª<code>UIViewController</code>éœ€è¦å‘Singletonä¸­æ³¨å†Œè§‚å¯Ÿè€…æ¥æ¥å—<code>Singleton</code>çš„æ¶ˆæ¯ã€‚<br> è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>NSNotificationCenter</code>çš„æ–¹æ¡ˆæœ‰äº›æ¾æ•£ï¼Œå› æ­¤ä¸ä½œè€ƒè™‘ï¼›<br>  è¿˜æœ‰ä¸€ç§æ˜¯ä½¿ç”¨<code>delegate</code>çš„æ–¹å¼ã€‚ä¸ºäº†è®©<code>delegate</code>å¯ä»¥å®ç°ä¸€å¯¹å¤šçš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨<code>Singleton</code>çš„é‡Œé¢å¢åŠ ä¸€ä¸ª<code>mutableArray</code>çš„å˜é‡å’Œä¸€ä¸ª<code>addDelegate:</code>çš„æ–¹æ³•ã€‚ç„¶ååœ¨éœ€è¦æ¥å—è¿™ä¸ª<code>Singleton</code>é€šçŸ¥çš„åœ°æ–¹<code>Singleton().addDelegate(self)</code>ï¼Œè¿™æ ·å¯ä»¥è¾¾åˆ°ç›®çš„ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°è¿™ä¸ªæ§åˆ¶å™¨å†ä¹Ÿä¸ä¼šè°ƒç”¨<code>dealloc</code>ã€‚</p><a id="more"></a><h2 id="é—®é¢˜1"><a href="#é—®é¢˜1" class="headerlink" title="é—®é¢˜1"></a>é—®é¢˜1</h2><p>é‚£ä¸ªè°ƒç”¨äº†<code>Singleton().addDelegate(self)</code>çš„æ§åˆ¶å™¨ä¸ºä»€ä¹ˆä¸ä¼š<code>dealloc()</code>äº†å‘¢ï¼Ÿ</p><h2 id="åˆ†æ1"><a href="#åˆ†æ1" class="headerlink" title="åˆ†æ1"></a>åˆ†æ1</h2><ol><li><code>Singleton()</code>ä½œä¸ºå•ä¾‹æ˜¯ä¸ä¼šé‡Šæ”¾çš„ï¼›</li><li><code>mutableArray</code>è¢«<code>Singleton()</code>å¼ºå¼•ç”¨ç€ï¼Œå› æ­¤ä¹Ÿæ˜¯ä¸ä¼šé‡Šæ”¾çš„ï¼›</li><li>æ¥å—æ¶ˆæ¯çš„æ§åˆ¶å™¨è¢«æ·»åŠ åˆ°äº†<code>mutableArray()</code>ä¸­ï¼Œå°±ä¼šè¢«<code>mutableArray()</code>å¼ºå¼•ç”¨ï¼Œå› æ­¤ä¹Ÿä¸ä¼šé‡Šæ”¾ï¼›<h2 id="ç»“è®º1"><a href="#ç»“è®º1" class="headerlink" title="ç»“è®º1"></a>ç»“è®º1</h2>æ§åˆ¶å™¨ä¼šä¸€ç›´è¢«å¼ºå¼•ç”¨ï¼Œå› æ­¤ä¸ä¼šè°ƒç”¨<code>dealloc()</code><h2 id="é—®é¢˜2"><a href="#é—®é¢˜2" class="headerlink" title="é—®é¢˜2"></a>é—®é¢˜2</h2>é‚£ä¹ˆï¼Œå¦‚æœæŠŠ<code>Singleton().addDelegate(self)</code>ä¸­çš„selfæ”¹æˆ__weakå‘¢ï¼Ÿ<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">__weak UIViewController *weakself &#x3D; self;</span><br><span class="line">Singleton().addDelegate(weakself);</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ2"><a href="#åˆ†æ2" class="headerlink" title="åˆ†æ2"></a>åˆ†æ2</h2>å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼š<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">_arr = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">Dog *dog1 = [[Dog alloc] init];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;-- retain count: %ld&quot;</span>, <span class="built_in">CFGetRetainCount</span>((__bridge <span class="built_in">CFTypeRef</span>)(dog1)));</span><br><span class="line">__<span class="keyword">weak</span> Dog *weakDog = dog1;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;-- retain count: %ld&quot;</span>, <span class="built_in">CFGetRetainCount</span>((__bridge <span class="built_in">CFTypeRef</span>)(dog1)));</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;-- retain count: %ld&quot;</span>, <span class="built_in">CFGetRetainCount</span>((__bridge <span class="built_in">CFTypeRef</span>)(weakDog)));</span><br><span class="line">[<span class="keyword">self</span>.arr addObject:weakDog];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;-- retain count: %ld&quot;</span>, <span class="built_in">CFGetRetainCount</span>((__bridge <span class="built_in">CFTypeRef</span>)(dog1)));</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;-- retain count: %ld&quot;</span>, <span class="built_in">CFGetRetainCount</span>((__bridge <span class="built_in">CFTypeRef</span>)(weakDog)));</span><br><span class="line"></span><br><span class="line">Dog *dog2 = dog1;    </span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;dog1 = %p&quot;</span>, dog1);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;weakdog1 = %p&quot;</span>, weakDog);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;weakdog1 = %p&quot;</span>, <span class="keyword">self</span>.arr.firstObject);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;dog2 = %p&quot;</span>, dog2);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;retain count: %ld&quot;</span>, <span class="built_in">CFGetRetainCount</span>((__bridge <span class="built_in">CFTypeRef</span>)(dog1)));</span><br></pre></td></tr></table></figure>æ‰“å°ç»“æœæ˜¯ï¼š<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">retain</span> count: <span class="number">1</span></span><br><span class="line"><span class="keyword">retain</span> count: <span class="number">1</span></span><br><span class="line"><span class="keyword">retain</span> count: <span class="number">2</span></span><br><span class="line"><span class="keyword">retain</span> count: <span class="number">2</span></span><br><span class="line"><span class="keyword">retain</span> count: <span class="number">3</span></span><br><span class="line">dog1 = <span class="number">0x60400000b600</span></span><br><span class="line">weakdog1 = <span class="number">0x60400000b600</span></span><br><span class="line">weakdog1 = <span class="number">0x60400000b600</span></span><br><span class="line">dog2 = <span class="number">0x60400000b600</span></span><br><span class="line"><span class="keyword">retain</span> count: <span class="number">3</span></span><br></pre></td></tr></table></figure>å¯ä»¥éªŒè¯ï¼š<ol><li><strong><em>__weakçš„ä½œç”¨æ˜¯åœ¨ä¸å¢åŠ å¯¹è±¡å¼•ç”¨è®¡æ•°çš„å‰æä¸‹æŒæœ‰å¯¹è±¡çš„å¼•ç”¨</em></strong> </li><li><strong><em>mutableArrayä¼šå¢åŠ æ‰€æŒæœ‰æŒ‡é’ˆæ‰€æŒ‡å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼ˆä¸è®ºæ˜¯ä¸æ˜¯å¼ºæŒ‡é’ˆï¼‰</em></strong></li><li><strong><em>æŒ‡é’ˆèµ‹å€¼å¯ä»¥ä½¿æ–°çš„æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„åœ°å€ï¼ˆä¸æœ¬é—®é¢˜æ— å…³ï¼‰</em></strong><h2 id="ç»“è®º2"><a href="#ç»“è®º2" class="headerlink" title="ç»“è®º2"></a>ç»“è®º2</h2>ä½¿ç”¨__weakçš„å¼±æŒ‡é’ˆåŒæ ·ä¼šä½¿å½“å‰æ§åˆ¶å™¨è¢«æ•°ç»„å¼ºå¼•ç”¨ï¼ŒåŒæ ·ä¼šé€ æˆå½“å‰æ§åˆ¶å™¨ä¸é‡Šæ”¾<h1 id="ç»“è®º3"><a href="#ç»“è®º3" class="headerlink" title="ç»“è®º3"></a>ç»“è®º3</h1>é€šè¿‡ä»¥ä¸Šåˆ†æå¯ä»¥çœ‹å‡ºï¼Œæƒ³è¦æ§åˆ¶å™¨å¾—åˆ°é‡Šæ”¾ï¼Œå°±ä¸èƒ½è®©æ•°ç»„æŒæœ‰æ§åˆ¶å™¨çš„å¼ºå¼•ç”¨ï¼Œä¸‹é¢æœ‰ä¸‰ä¸ªæ–¹æ¡ˆå¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼š<h2 id="æ–¹æ³•1-NSValue-ä¸è¦ä½¿ç”¨è¿™ä¸ªäº†ï¼Œæœ€è¿‘å‘ç°ä¼šé€ æˆé‡æŒ‡é’ˆï¼Œå…·ä½“åŸå› ä¸æ˜ã€‚"><a href="#æ–¹æ³•1-NSValue-ä¸è¦ä½¿ç”¨è¿™ä¸ªäº†ï¼Œæœ€è¿‘å‘ç°ä¼šé€ æˆé‡æŒ‡é’ˆï¼Œå…·ä½“åŸå› ä¸æ˜ã€‚" class="headerlink" title="æ–¹æ³•1 NSValue ä¸è¦ä½¿ç”¨è¿™ä¸ªäº†ï¼Œæœ€è¿‘å‘ç°ä¼šé€ æˆé‡æŒ‡é’ˆï¼Œå…·ä½“åŸå› ä¸æ˜ã€‚"></a>æ–¹æ³•1 <del>NSValue</del> ä¸è¦ä½¿ç”¨è¿™ä¸ªäº†ï¼Œæœ€è¿‘å‘ç°ä¼šé€ æˆé‡æŒ‡é’ˆï¼Œå…·ä½“åŸå› ä¸æ˜ã€‚</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSValue</span> *value = [<span class="built_in">NSValue</span> valueWithNonretainedObject:myObj];</span><br><span class="line">[array addObject:value];</span><br><span class="line"></span><br><span class="line">value.nonretainedObjectValue</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•2-NSPointerArray"><a href="#æ–¹æ³•2-NSPointerArray" class="headerlink" title="æ–¹æ³•2 NSPointerArray"></a>æ–¹æ³•2 NSPointerArray</h2>å‚è§ï¼š<a href="http://blog.csdn.net/jeffasd/article/details/60774974">http://blog.csdn.net/jeffasd/article/details/60774974</a><h2 id="æ–¹æ³•3-Bridge"><a href="#æ–¹æ³•3-Bridge" class="headerlink" title="æ–¹æ³•3 Bridge"></a>æ–¹æ³•3 Bridge</h2>å¢åŠ ä¸€ä¸ªä¸­é—´å±‚<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">DelegateBridge</span>: <span class="title">NSObject</span> &lt;<span class="title">aDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="keyword">id</span> &lt;aDelegate&gt;delegate;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithDelegate:(<span class="keyword">id</span>&lt;aDelegate&gt;)delegate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">DelegateBridge</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithDelegate:(<span class="keyword">id</span>&lt;aDelegate&gt;)delegate;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.delegate = delegate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)delegateMethod &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.delegate &amp;&amp; [<span class="keyword">self</span>.delegate respondsToSelector:<span class="keyword">@selector</span>(delegateMethod:)]) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.delegate delegateMethod:aMessages];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><code>addDelegate()</code>çš„æ–¹æ³•æ”¹ä¸ºï¼š<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)addDelegate:(<span class="keyword">id</span>&lt;aDelegate&gt;)delegate</span><br><span class="line">&#123;</span><br><span class="line">    DelegateBridge *bridge = [[DelegateBridge alloc] initWithDelegate:delegate];</span><br><span class="line">    [_delegates addObject:bridge];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Schemeä»¥åŠå¾®ä¿¡ã€æ”¯ä»˜å®ç­‰ç¬¬ä¸‰æ–¹åŠŸèƒ½çš„å®ç°</title>
      <link href="iOS-Scheme-Theory-And-Practice/"/>
      <url>iOS-Scheme-Theory-And-Practice/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡é…ç½®plistæ–‡ä»¶ä¸­çš„schemeå®Œæˆåœ¨appä¸­æ¥å…¥å¾®ä¿¡ã€æ”¯ä»˜å®ã€å¾®åšç­‰ç¬¬ä¸‰æ–¹å¹³å°å¹¶ä¸”èƒ½å¤Ÿæ¥å›è·³è½¬ã€‚</p><a id="more"></a><h2 id="ç†è®º"><a href="#ç†è®º" class="headerlink" title="ç†è®º"></a>ç†è®º</h2><p>åœ¨Appleçš„æ–‡æ¡£ä¸­ï¼Œschemeåœ¨URLç›¸å…³çš„å†…å®¹ä¸­å‡ºç°è¿‡ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This property contains the scheme. Any percent-encoded characters are not unescaped. For example, in the URL &#96;http:&#x2F;&#x2F;www.example.com&#x2F;index.html&#96; , the scheme is &#96;http&#96; .</span><br><span class="line">The full URL is the concatenation of the scheme, a colon ( &#96;:&#96; ), and the value of &#96;resourceSpecifier&#96; .</span><br></pre></td></tr></table></figure><p>ç´§æ¥ç€è¿™ä¸€æ®µï¼Œæœ‰å¦‚ä¸‹è¯´æ˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Note</span><br><span class="line">The term â€œprotocolâ€ is also sometimes used when talking about network-based URL schemes. However, not all URL schemes are networking protocolsâ€”data:&#x2F;&#x2F; URLs, for example.</span><br></pre></td></tr></table></figure><p>è¯¦æƒ…ç‚¹å‡»<a href="https://developer.apple.com/documentation/foundation/nsurl/1413437-scheme">è¿™é‡Œ</a>ã€‚å¯ä»¥çœ‹å‡ºï¼Œschemeæ˜¯URLä¸­ <strong>:</strong> ä¹‹å‰çš„éƒ¨åˆ†ã€‚<br>åœ¨iOS/macOS/WatchOS 2ä¸­ï¼Œå¯ä»¥åˆ©ç”¨schemeæ¥æ ‡è®°APPå¹¶ä¸”é€šè¿‡å®ƒè¿›è¡Œä¸€äº›ç®€å•çš„é€šä¿¡ã€‚</p><h4 id="schemeçš„ä½¿ç”¨"><a href="#schemeçš„ä½¿ç”¨" class="headerlink" title="schemeçš„ä½¿ç”¨"></a>schemeçš„ä½¿ç”¨</h4><ol><li>è®¾ç½®scheme<br>Xcodeé¡¹ç›®çš„info.plistä¸­å¢åŠ URL typesï¼Œè¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢çš„æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œé»˜è®¤åªæœ‰URL Identifierâ€”â€”æ ‡è®°URL typesä¸­çš„æŸä¸€ä¸ªitemï¼Œåœ¨è¿™é‡Œå¯ä»¥æ·»åŠ URL Schemesã€‚æ¯”å¦‚æ·»åŠ ä¸€ä¸ªâ€testâ€</li><li>ä½¿ç”¨schemeï¼Œæ·»åŠ äº†schemeä»¥åï¼Œé‡æ–°runé¡¹ç›®ã€‚<ol><li>å¯ä»¥åœ¨Safariä¸­è¾“å…¥æ·»åŠ çš„schemeï¼Œç„¶åå°±å¯ä»¥è·³è½¬åˆ°åˆšæ‰çš„APPä¸­äº†ã€‚</li><li>é€šè¿‡<code>UIApplication.shared.openURL</code>æ¥è¿›è¡ŒAPPé—´çš„è·³è½¬ã€‚å¦‚æœæ˜¯iOS9.0ä¹‹åï¼Œéœ€è¦å…ˆåœ¨info.plistä¸­æ·»åŠ <a href="https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html#//apple_ref/doc/uid/TP40009250-SW14">LSApplicationQueriesSchemes</a>ï¼Œç„¶åæŠŠè¦æ‰“å¼€çš„schemeæ·»åŠ åˆ°é‡Œé¢ã€‚<br><img src="http://upload-images.jianshu.io/upload_images/424855-690eea9c590127f6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></li></ol></li></ol><h2 id="é«˜çº§ç”¨æ³•"><a href="#é«˜çº§ç”¨æ³•" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h2><ol><li>å½“APPè¢«å…¶ä»–APPé€šè¿‡schemeè°ƒèµ·çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡<code>func application(_ app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:]) -&gt; Bool</code>æ–¹æ³•ä»urlå‚æ•°ä¸­è·å–åˆ°å½“å‰å¯åŠ¨è¿™ä¸ªAPPçš„å®Œæ•´URLï¼Œè¿˜å¯ä»¥é€šè¿‡optionsè·å–åˆ°å…¶ä»–APPçš„**<em>Bundle Identifier**</em></li><li>åœ¨Safariä¸­è¾“å…¥URLæˆ–è€…é€šè¿‡openURLæ¥è°ƒèµ·APPçš„æ—¶å€™ï¼Œé™¤äº†è¾“å…¥[scheme]://ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åœ¨åé¢å¸¦ä¸Šä¸€äº›å†…å®¹ï¼Œæ¯”å¦‚ï¼š<code>[scheme]://aaa=1?bbb=52</code></li></ol><h2 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h2><p>å¾®ä¿¡ã€æ”¯ä»˜å®ã€å¾®åšç­‰åº”ç”¨çš„ç¬¬ä¸‰æ–¹ç™»å½•ã€æ”¯ä»˜ã€åˆ†äº«åŠŸèƒ½ï¼Œéƒ½æ˜¯é€šè¿‡schemeæ¥å®ç°çš„ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨å¾®ä¿¡çš„ç™»å½•ä¸ºä¾‹ï¼Œæ¥è®²è§£ä¸€ä¸‹schemeçš„ä½¿ç”¨è¿‡ç¨‹ã€‚<br>è¦ä½¿ç”¨å¾®ä¿¡çš„æˆæƒç™»å½•åŠŸèƒ½ï¼Œé¦–å…ˆè¦å»å¾®ä¿¡å¼€æ”¾å¹³å°åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œéœ€è¦æˆ‘ä»¬å¡«å†™åº”ç”¨åç§°ã€iconå’ŒBundle Identifierï¼Œä¹‹åå¾®ä¿¡ä¼šæŠŠåº”ç”¨çš„AppIdå’ŒAppSecretç»™æˆ‘ä»¬ã€‚ç„¶åæ ¹æ®AppIDé›†æˆå¾®ä¿¡çš„SDKï¼Œå¹¶ä¸”åœ¨URL typesé‡Œé¢æ·»åŠ ä¸€ä¸ªä»¥appidä¸ºschemeçš„itemã€‚åˆ°è¿™é‡Œï¼Œå¾®ä¿¡çš„åˆ†äº«åŠŸèƒ½å°±é›†æˆå®Œæˆäº†ã€‚é‚£ä¹ˆï¼Œæ¯ä¸€æ­¥éƒ½åœ¨åšä»€ä¹ˆå‘¢ï¼Ÿ<br><img src="http://upload-images.jianshu.io/upload_images/424855-c63aa2111fe7ca58.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¾®ä¿¡æˆæƒè¿‡ç¨‹.jpg"><br>å…¶ä¸­ï¼Œç¬¬3æ­¥ä¸­æ˜¯å¦åˆ°æœåŠ¡å™¨éªŒè¯åº”è¯¥å¯ä»¥é€šè¿‡æŠ“åŒ…æ¥çœ‹åˆ°ï¼Œä½†æ˜¯æˆ‘æ‡’äº†ï¼Œæ²¡æœ‰åšã€‚ä¹Ÿä¸å½±å“æ•´ä½“çš„æµç¨‹ã€‚  </p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
