<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>不务正业的程序员</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="iOS,iOS开发技术,Objective-C,Swift,Cocoa">
<meta property="og:type" content="website">
<meta property="og:title" content="不务正业的程序员">
<meta property="og:url" content="http://www.iosprogrammer.tech/page/5/index.html">
<meta property="og:site_name" content="不务正业的程序员">
<meta property="og:description" content="iOS,iOS开发技术,Objective-C,Swift,Cocoa">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="不务正业的程序员">
<meta name="twitter:description" content="iOS,iOS开发技术,Objective-C,Swift,Cocoa">
  
    <link rel="alternate" href="/atom.xml" title="不务正业的程序员" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">不务正业的程序员</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">爱编程的大头（公众号同名）</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.iosprogrammer.tech"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Date-And-Time-One" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Date-And-Time-One/" class="article-date">
  <time datetime="2018-04-12T15:27:34.000Z" itemprop="datePublished">2018-04-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>►<a class="article-category-link" href="/categories/iOS/日期Date和时间Time/">日期Date和时间Time</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Date-And-Time-One/">日期Date和时间Time（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h3><ol>
<li>UTC - <a href="https://baike.baidu.com/item/协调世界时/787659?fr=aladdin&amp;fromid=5899996&amp;fromtitle=UTC" target="_blank" rel="noopener">协调时间时，世界统一时间</a></li>
<li>历法 - <a href="https://baike.baidu.com/item/日历/84469?fr=aladdin" target="_blank" rel="noopener">公历、农历、阳历、阴历</a></li>
</ol>
<h3 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h3><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><ul>
<li>NSDate是Cocoa框架中的一个基本的值对象。它表示了一个不变的时间点。其中包含了时钟时间和日期。</li>
<li>NSDate的单位是用浮点数（NSTimeInterval）表示的秒。因此，NSDate可以提供10000年内毫秒级精度的时间</li>
<li>NSDate将时间计算为相对于绝对参考时间（2001年1月1日0点0分0秒：UTC时间）的秒数。国内获取到的是2001年1月1日08点00分00秒。</li>
<li>正数表示参考日期后的某个日期，负数表示参考日期之前。<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4></li>
<li>获取当前时间。<code>NSDat()</code></li>
<li>获取相对某个日期前/后的时间。<code>init(timeIntervalSince... sec: TimeInterval)</code></li>
</ul>
<h3 id="Calendar"><a href="#Calendar" class="headerlink" title="Calendar"></a>Calendar</h3><h4 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h4><ol>
<li><code>Calendar</code>提供多种日历的实现。<h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4></li>
<li>获取当前日历<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> currentCalendar = <span class="type">Calendar</span>.currentCalendar</span><br><span class="line"><span class="keyword">let</span> chinesCalendar = <span class="type">Calendar</span>(identifier: .chinese)</span><br><span class="line"><span class="keyword">let</span> usersCalendar = <span class="type">Locale</span>.current.calendar</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="DateComponent"><a href="#DateComponent" class="headerlink" title="DateComponent"></a>DateComponent</h3><h4 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍"></a>介绍</h4><ol>
<li><code>CalendarComponent</code>是日历组建，通过它可以获取到某一个日期的年、月、日、时、分、秒等信息<h4 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var components = DateComponents()</span><br><span class="line">components.day = 6</span><br><span class="line">components.month = -1</span><br><span class="line">components.year = 2014</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Date和DateComponent之间的转换"><a href="#Date和DateComponent之间的转换" class="headerlink" title="Date和DateComponent之间的转换"></a>Date和DateComponent之间的转换</h3><h4 id="获取Date的components"><a href="#获取Date的components" class="headerlink" title="获取Date的components"></a>获取Date的components</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> now = <span class="type">Date</span>()</span><br><span class="line"><span class="keyword">let</span> calendar = <span class="type">Calendar</span>.current</span><br><span class="line"><span class="keyword">let</span> dateComponents = calendar.dateComponents([.year, .month, .day .hour, .minute, .second], from: now)</span><br><span class="line"><span class="built_in">print</span>(dateComponents.year, dateComponents.month, dateComponents.day, dateComponents.hour, dateComponents.minute, dateComponents.second) <span class="comment">// Optional(2018) Optional(4) Optional(12) Optional(23) Optional(9) Optional(47)</span></span><br></pre></td></tr></table></figure>
<h4 id="使用components生成date"><a href="#使用components生成date" class="headerlink" title="使用components生成date"></a>使用components生成date</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> components = <span class="type">DateComponents</span>()</span><br><span class="line">components.day = <span class="number">6</span></span><br><span class="line">components.month = -<span class="number">1</span></span><br><span class="line">components.year = <span class="number">2014</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> date = <span class="type">Calendar</span>.current.date(from: components)</span><br><span class="line"><span class="built_in">print</span>(date) <span class="comment">// Optional(2013-11-05 16:00:00 +0000)</span></span><br></pre></td></tr></table></figure>
<p>请注意：这里的<strong>month = -1</strong>，如果指定的参数不在合理范围内会进行进位/退位。并且，因为Date必须是完整的日期和时钟的组合，如果components对象存在没有明确指定的参数，在生成date时会使用默认值，并且默认值会根据历法的不同各异。</p>
<h3 id="日历间转换"><a href="#日历间转换" class="headerlink" title="日历间转换"></a>日历间转换</h3><h4 id="介绍-3"><a href="#介绍-3" class="headerlink" title="介绍"></a>介绍</h4><p>要把一个日历中的某一个日期转换成一个日历中的日期，首先要使用第一个日历把components转换成date，再用第二个日历把这个date分解成components</p>
<h4 id="使用-3"><a href="#使用-3" class="headerlink" title="使用"></a>使用</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> chineseCalendar = <span class="type">Calendar</span>(identifier: .chinese)</span><br><span class="line"><span class="keyword">var</span> chineseComponents = <span class="type">DateComponents</span>()</span><br><span class="line">chineseComponents.year = <span class="number">2018</span></span><br><span class="line">chineseComponents.month = <span class="number">1</span></span><br><span class="line">chineseComponents.day = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> chineseDate = chineseCalendar.date(from: chineseComponents)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> indianCalendar = <span class="type">Calendar</span>(identifier: .indian)</span><br><span class="line"><span class="keyword">let</span> indianComponents = indianCalendar.dateComponents([.year,.month, .day], from: chineseDate!)</span><br><span class="line"><span class="built_in">print</span>(indianComponents.year!, indianComponents.month!,indianComponents.day!) <span class="comment">// 3922 11 18</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.iosprogrammer.tech/Date-And-Time-One/" data-id="ckcezpvjf000dkcs6vcs0mdq2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Create-Cocoapods-Repo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Create-Cocoapods-Repo/" class="article-date">
  <time datetime="2018-04-03T10:20:45.000Z" itemprop="datePublished">2018-04-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Create-Cocoapods-Repo/">从零开始到提交一个开源项目到Cocopods</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="开发过程"><a href="#开发过程" class="headerlink" title="开发过程"></a>开发过程</h3><ol>
<li><p>执行<code>pod lib create [ProjectName]</code>创建项目。过程中需要回答几个问题，根据自己的需要设置设置就可以了。我的设置是：</p>
<ul>
<li><p>What platform do you want to use?? [ iOS / macOS ]</p>
<blockquote>
<p>iOS</p>
</blockquote>
</li>
<li><p>What language do you want to use?? [ Swift / ObjC ]</p>
<blockquote>
<p>Swift</p>
</blockquote>
</li>
<li><p>Would you like to include a demo application with your library? [ Yes / No ]</p>
<blockquote>
<p>Yes</p>
</blockquote>
</li>
<li><p>Which testing frameworks will you use? [ Quick / None ]</p>
<blockquote>
<p>None</p>
</blockquote>
</li>
<li><p>Would you like to do view based testing? [ Yes / No ]</p>
<blockquote>
<p>No</p>
</blockquote>
<p>紧接着会自动执行<code>pod install</code>，我们只需要静静的等着完成就可以了。</p>
</li>
</ul>
</li>
<li><p>项目结构。 <code>pod install</code>之后，Cocoapods会直接打开Xcode project。项目结构如下：<br><img src="http://image.iosprogrammer.hongbility.com/Create-Cocoapods-Repo/project-struct.png" alt="project-struct"></p>
<ol>
<li>Podspec Metadata<ul>
<li>.podpsec - 项目相关的pod信息。包括了版本号、github主页、对其他项目的依赖、作者信息和指定资源文件</li>
<li>README.md - 对当前项目的介绍和使用方法。也就是github中项目主页的介绍内容。</li>
<li>LICENSE - 指定使用的开源协议  </li>
</ul>
</li>
<li>Example for DemoProj - 对开源代码的使用实例。其他人从github下载了开源项目后可以通过这个来查看使用方法。如果在<code>Would you like to include a demo application with your library?</code>中选择了No，这个项目就不会创建。因此强烈建议这个问题回答YES。对自己调试和别人使用都非常有利。</li>
<li>Tests - 单元测试。</li>
<li>Development Pods - 开源库代码就放在这里。</li>
<li>Frameworks - 当前开源项目的依赖库</li>
</ol>
</li>
<li><p>.podspec文件详解</p>
<ul>
<li>s.name - 名称，<code>pod search</code>搜索的关键词,注意这里一定要和.podspec的名称一样,否则报错</li>
<li>s.version - 版本号，这个版本号要和tag版本一致，否则报错</li>
<li>s.summary - 项目简介，<code>pod search</code>的结果中会展示</li>
<li>s.homepage - 项目主页地址，也就是github地址</li>
<li>s.source - <code>git clone</code>的项目地址。 </li>
<li>s.ios.deployment_target - 支持到的iOS版本</li>
<li>s.source_files - 资源文件路径。请确保把项目相关的源文件放在这个文件夹下面，否则报错。</li>
<li>s.dependency - 项目依赖的其他三方库。</li>
</ul>
</li>
<li><p>在github上创建仓库</p>
</li>
<li><p>开发项目。。。</p>
</li>
<li><p>开发结束，把项目提交到github。</p>
</li>
<li><p>打tag并把tag提交。tag号要和.podspec中的s.server一致。</p>
</li>
<li><p>验证.podspec</p>
<ol>
<li><code>pod lib lint</code>本地验证</li>
<li><code>pod spec lint</code>和github上的内容进行对比</li>
</ol>
</li>
<li><p>把项目发布到Cocopods的master上。<code>pod trunk push [ProjectName].podspec</code>。注意，这个过程较(chao ji)慢。</p>
</li>
</ol>
<h3 id="可能遇到的问题"><a href="#可能遇到的问题" class="headerlink" title="可能遇到的问题"></a>可能遇到的问题</h3><ol>
<li><code>pod lib lint</code>通过，但是<code>pod spec lint</code>报错：<code>use of unresolved identifier</code>。遇到这个问题后，分为两步：<ol>
<li><code>pod spec lint --no-clean --verbose</code>查看错误原因，这是会看到临时文件，到临时文件里查看会发现缺少文件</li>
<li>使用<code>pod cache clean</code></li>
<li>重新执行一次<code>pod spec lint</code></li>
</ol>
</li>
<li>项目提交后执行<code>pod search</code>找不到的话，执行<code>pod setup</code>。</li>
<li>验证的时候出现<code>.swift-version</code>错误。解决办法是在项目目录下创建一个执行<code>echo &quot;4.0&quot; &gt; .swift-version</code>。注意，这里的4.0是我开发项目时使用的Swift版本。</li>
<li><strong>注意权限控制和Swift与OC的混编问题</strong></li>
</ol>
<h3 id="赠送一个提交开源库的shell脚本"><a href="#赠送一个提交开源库的shell脚本" class="headerlink" title="赠送一个提交开源库的shell脚本"></a>赠送一个提交开源库的shell脚本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> bin/sh</span><br><span class="line"><span class="meta">#</span> 验证本地 pod lib lint</span><br><span class="line">echo 'pod lib lint...\n'</span><br><span class="line">pod lib lint</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 下拉git  git pull</span><br><span class="line">echo '\ngit pull...\n'</span><br><span class="line">git pull</span><br><span class="line">echo `git pull`</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 上传git git add git commit git push</span><br><span class="line">echo "git add . \n"</span><br><span class="line">git add .</span><br><span class="line">echo "Enter a commit message: \c"</span><br><span class="line">read commitMsg</span><br><span class="line">echo "git commit -m $commitMsg"</span><br><span class="line">git commit -m '$commitMsg'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> tag git tag  git push --tags</span><br><span class="line">echo "\ngit push ...\n"</span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line">echo "\nEnter tag version: \c"</span><br><span class="line">read tagVersion</span><br><span class="line">git tag $tagVersion</span><br><span class="line">echo "\n git push --tags ..."</span><br><span class="line">git push --tags</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 远程验证 pod spec lint</span><br><span class="line">echo "\npod spec lint ...\n"</span><br><span class="line">pod spec lint</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 提交代码 pod trunk</span><br><span class="line">echo "\npod trunk push ...\n"</span><br><span class="line">pod trunk push [yourprojectname].podspec</span><br></pre></td></tr></table></figure>
<p>👍👍👍</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.iosprogrammer.tech/Create-Cocoapods-Repo/" data-id="ckcezpvje000bkcs6pp5tqnbc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-LLDB-Advanced-Usage" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/LLDB-Advanced-Usage/" class="article-date">
  <time datetime="2018-03-22T08:04:48.000Z" itemprop="datePublished">2018-03-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/LLDB-Advanced-Usage/">LLDB调试iOS程序（二）—— 高级用法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="巧用help命令"><a href="#巧用help命令" class="headerlink" title="巧用help命令"></a>巧用<code>help</code>命令</h3><p>LLDB中的命令非常多，虽然有一些算是常用的，但是要完全记住也很难，为了解决这个问题，我们可以充分利用<code>help</code>命令。比如要查看<code>breakPoint</code>的用法，可以先查看它的自命令：<br><img src="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/help breakpoint.png" alt="help breakpoint"><br>图中列举出了所有的<code>breakpoint</code>的子命令。</p>
<p>请看最后一行<code>For more help on any particular subcommand, type &#39;help &lt;command&gt; &lt;subcommand&gt;&#39;</code>。根据这条提示，我们来查看其中一条子命令的详细用法。<br><img src="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/help breakpoint set.png" alt="help breakpoint"><br>图中只是截取了部分内容。</p>
<p>由此可见LLDB给我们提供的<code>help</code>命令还是很强大的。我们在平时的调试过程中，如果遇到了不确定命令是什么了，可以使用<code>help</code>命令来查看，也可以使用<strong>自动提示</strong>功能来帮助我们。</p>
<h3 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h3><p>执行流程控制的命令包括<code>process</code>、<code>breakpoint</code>、<code>thread</code>，具体可以查看<a href="http://www.cocoachina.com/swift/20171013/20789.html" target="_blank" rel="noopener">这篇文章</a>。</p>
<p>这里只讨论设置命中断点后执行的命令<code>breakpoint command add &lt;#断点#&gt;</code>。</p>
<p>首先使用<code>breakpoint list</code>来查看所有的断点。<br><img src="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint list.png" alt="breakpoint list"><br>其中，前面的数字是断点的序号，可以唯一标识一个断点。图中的1/2都是全局断点，3是我自己加的断点。下面我们给3.1断点增加执行后的指令：<br><img src="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint command add.png" alt="breakpoint command add"><br>如图，我们在断点出分别执行<code>po self</code>、<code>po self.view</code>、<code>continue</code>。其中<code>continue</code><strong>表示到此断点后继续执行，这在循环等场景特别有用</strong>。命令的执行结果为：<br><img src="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint command add result.png" alt="breakpoint command add result"></p>
<p>这种方法在需要多次执行的场景中特别有用，完全可以代替使用<code>print()</code>来查看变量值的方案。</p>
<h3 id="给断点增加触发条件"><a href="#给断点增加触发条件" class="headerlink" title="给断点增加触发条件"></a><strong><em>给断点增加触发条件</em></strong></h3><p>有这样一种场景：在一个循环中，我们只要在某些条件下才需要触发断点。可以这样设置：<br><img src="http://image.iosprogrammer.hongbility.com/LLDB-Advanced-Usage/breakpoint condition.png" alt="breakpoint condition"></p>
<h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="http://www.cocoachina.com/swift/20171013/20789.html" target="_blank" rel="noopener">使用LLDB调试Swift</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.iosprogrammer.tech/LLDB-Advanced-Usage/" data-id="ckcezpvjl000jkcs6ywb1l6ox" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Get-To-Know-LLDB" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Get-To-Know-LLDB/" class="article-date">
  <time datetime="2018-03-11T06:21:13.000Z" itemprop="datePublished">2018-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Get-To-Know-LLDB/">LLDB调试iOS（一）—— 初识LLDB</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="什么是LLDB"><a href="#什么是LLDB" class="headerlink" title="什么是LLDB"></a><strong>什么是LLDB</strong></h3><p>LLDB是下一代、高性能的调试器。它是作为一组可重用组件构建的，它可以高度利用较大<strong>LLVM</strong>项目中的现有库，例如<strong>Clang</strong>表达式解析器和LLVM反汇编器。</p>
<p>LLDB是Mac OS X上Xcode的默认调试器，支持在桌面和iOS设备、模拟器上调试C/Objective-C/C++/Swift。</p>
<h3 id="LLDB的进步"><a href="#LLDB的进步" class="headerlink" title="LLDB的进步"></a>LLDB的进步</h3><ol>
<li>支持现代化的多线程程序</li>
<li>以高效的方式处理调试符号</li>
<li>使用基于编码器（LLVM）的代码知识</li>
<li>支持插件扩展</li>
</ol>
<h3 id="与LLVM集成的优势"><a href="#与LLVM集成的优势" class="headerlink" title="与LLVM集成的优势"></a>与LLVM集成的优势</h3><p>LLDB当前将调试信息转换为clang类型，以便它可以利用clang编译器基础结构。 这允许LLDB在表达式中支持最新的C，C ++，Objective C和Objective C ++语言功能和运行时，而无需重新实现这些功能。 在进行表达式的函数调用，分解指令和提取指令细节时，它还利用编译器处理所有ABI细节，等等。</p>
<p>主要好处包括:</p>
<ul>
<li>C，C ++，Objective C的最新语言支持</li>
<li>可以声明局部变量和类型的多行表达式</li>
<li>支持时使用JIT表达式</li>
<li>在无法使用JIT时评估表达式Intermediate Intermediateation（IR）</li>
</ul>
<h3 id="LLDB与GDB的不同"><a href="#LLDB与GDB的不同" class="headerlink" title="LLDB与GDB的不同"></a>LLDB与GDB的不同</h3><pre><code>1. GDB是GNU项目中的一部分，是为了和GNU编译器协同工作而创建的
2. LLDB是LLVM项目中的一部分，是为了和LLVM编译器协同工作而创建的
3. GDB和LLDB的命令有一些不同。LLDB命令就像OC语法一样，要有形参名，而GDB则不需要，这一点上孰优孰劣就见仁见智了。
</code></pre><h3 id="LLDB命令结构"><a href="#LLDB命令结构" class="headerlink" title="LLDB命令结构"></a>LLDB命令结构</h3><p>为了更好的使用和了解LLDB，所有学习LLDB的用户都应该了解LLDB的命令结构<br>LLDB的命令都是这样的形式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;command&gt; [&lt;subcommand&gt; [&lt;subcommand&gt;...]] &lt;action&gt; [-options [option-value]] [argument [argument...]]</span><br></pre></td></tr></table></figure></p>
<p><code>command</code>和<code>subcommand</code>都是LLDB调试器对象的名称。命令和子命令按照层次结构排列：特定的命令对象为其后的子命令对象创建上下文，该对象再次为下一个子命令提供上下文，依此类推。<br><code>action</code>是你想要在调试器对象（前面提到的命令和子命令）组成的上下文中执行的一些操作。<br><code>options</code>：行为修改器(action modifiers)。通常带有一些值。<br><code>argument</code>：根据使用的命令的上下文来表示各种不同的东西。</p>
<p>LLBD命令行的解析操作在执行命令之前完成。上面的这些元素之间通过空格来分割，如果某一元素自身含有空格，则可以使用双引用。而如果元素中又包含双引号，则可以使用反斜杠；或者元素使用单引号。如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(lldb) command [subcommand] -option &quot;some \&quot;quoted\&quot; string&quot;</span><br></pre></td></tr></table></figure></p>
<p>也可以这样表示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(lldb) command [subcommand] -option &quot;some \&quot;quoted\&quot; string&quot;</span><br></pre></td></tr></table></figure></p>
<p>这种命令解析设计规范了LLDB命令语法，并对所有命令做了个统一。</p>
<h3 id="使用举例"><a href="#使用举例" class="headerlink" title="使用举例"></a>使用举例</h3><p>调试快捷键：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">command+shift+Y 打开调试窗口</span><br><span class="line">command+Y 调试运行程序</span><br><span class="line">command+option+P 继续</span><br><span class="line">command+shift+O 跳过</span><br><span class="line">command+shift+I 进入</span><br><span class="line">command+shift+T 跳出</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>p/po</code> 这两个命令都是用来做输出调用的，其中p用来打印常量，po用来打印对象<br><img src="http://image.iosprogrammer.hongbility.com/Get-To-Know-LLDB/p%E5%92%8Cpo.png" alt="p/po"></li>
<li><code>call</code>：一般只在不需要显示输出，或是方法无返回值时使用call。想要在debug阶段修改view的背景色、试一下label显示更多文字的效果、调用一个忘记调用的函数。。。都可以使用call命令</li>
<li><code>e</code>：可以在调试时动态执行指定表达式，并将结果打印出来。常用于在调试过程中修改变量的值。<img src="http://image.iosprogrammer.hongbility.com/Get-To-Know-LLDB/e.png" alt="e"></li>
</ul>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="http://blog.csdn.net/talentedlas/article/details/51945569" target="_blank" rel="noopener">LLVM与Clang的概述及关系</a></li>
<li><a href="http://lldb.llvm.org/" target="_blank" rel="noopener">LLDB Homepage</a></li>
<li><a href="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/gdb_to_lldb_transition_guide/document/lldb-basics.html#//apple_ref/doc/uid/TP40012917-CH2-SW1" target="_blank" rel="noopener">LLDB Quick Start Guide</a></li>
<li><a href="http://www.cocoachina.com/swift/20171013/20789.html" target="_blank" rel="noopener">使用LLDB调试Swift</a></li>
<li><a href="https://mp.weixin.qq.com/s/us5aXQAwSSoxkUMOVzofkg" target="_blank" rel="noopener">什么是LLVM？Swift，Rust，Clang等语言背后的原力</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.iosprogrammer.tech/Get-To-Know-LLDB/" data-id="ckcezpvji000fkcs6k77muwvy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-XCode-Server-CI" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/XCode-Server-CI/" class="article-date">
  <time datetime="2018-03-06T08:28:14.000Z" itemprop="datePublished">2018-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/XCode-Server-CI/">Xcode持续集成简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><ul>
<li>Xcode 9.2</li>
<li>macOS High Sierra 10.13.2</li>
</ul>
<h3 id="本文的目的"><a href="#本文的目的" class="headerlink" title="本文的目的"></a>本文的目的</h3><ul>
<li>介绍Xcode CI和Xcode Server</li>
<li>手把手教你从头开始创建一个Xcode Server来进行自动集成</li>
</ul>
<h3 id="Xcode-CI和Xcode-Server"><a href="#Xcode-CI和Xcode-Server" class="headerlink" title="Xcode CI和Xcode Server"></a>Xcode CI和Xcode Server</h3><p>正如<a href="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/xcode_guide-continuous_integration/index.html#//apple_ref/doc/uid/TP40013292-CH1-SW1" target="_blank" rel="noopener">苹果开发者网站</a>所描述的</p>
<blockquote>
<p>In Xcode, continuous integration is the process of automating and streamlining the building, analyzing, testing, and archiving of your Mac and iOS apps, in order to ensure that they are always in a releasable state.</p>
</blockquote>
<p>Xcode CI是一种为了确保你的APP始终处于可发布状态而存在的自动的、流式的过程，整个过程包括了编译、解析、测试和打包。<br>Xcode Server是用来远程进行这个过程的服务器。</p>
<p>整个过程类似下图<br><img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Xcode-CI-Intro.png" alt></p>
<ul>
<li>使用这个过程的目的就是为了集成开发APP的整个过程，让这个过程完全自动化进行。通过Xcode CI可以在每次提交代码后自动进行编译到打包的过程，并且可以查看代码的测试覆盖率。因为它可以自动执行单元测试，可以更方便的查看测试报告。</li>
</ul>
<h3 id="集成"><a href="#集成" class="headerlink" title="集成"></a>集成</h3><ol>
<li>打开Xcode Server<ol>
<li>点击Xcode菜单栏中的Xcode选项卡的Xcode Server…</li>
<li>将右上角的开关调到On</li>
</ol>
</li>
<li><p>配置Xcode Server</p>
<ol>
<li>点击Product选项卡中的Create Bot…</li>
<li>配置bot的Name。Server一般不需要<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Create-a-new-bot.png" alt></li>
<li><p>配置代码库<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Configure-source-control-for-this-bot.png" alt><br><img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Configrure-souce-code-2.png" alt></p>
<blockquote>
<p>这里选择的是使用.ssh的公钥来配置，当然也可以使用UserName And Password或者Bot Specific SSh Keys。</p>
</blockquote>
</li>
<li><p>选择分支</p>
</li>
<li><p>配置Bot的环境<br><img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Configure-build-configuration.png" alt></p>
<blockquote>
<p>这里可以选择在集成的时候是否进行静态分析、测试和打包</p>
</blockquote>
</li>
<li><p>配置集成周期<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/Schedule-bot-integrations.png" alt></p>
<blockquote>
<p>其中，Ingegrate选项中Periodically表示按周期集成，包括小时、天、周；Clean选项表示对项目进行Clean的周期，包括Always/Once a day/Once a week/Never。</p>
</blockquote>
</li>
<li><p>选择集成的目标设备。可以设置模拟器和真机、所有的模拟器、所有的真机、指定的模拟器和指定的真机。</p>
</li>
<li>配置项目证书</li>
<li>集成完成<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/create-ci-success.png" alt></li>
</ol>
</li>
</ol>
<h3 id="可能遇到的问题和解决方案"><a href="#可能遇到的问题和解决方案" class="headerlink" title="可能遇到的问题和解决方案"></a>可能遇到的问题和解决方案</h3><ol>
<li>The sandbox is not in sync with the Podfile.lock.Run ‘pod install’ or update your CocoaPods installation.</li>
<li>Invalid byte sequence in US_ASCII(Argument Error)</li>
</ol>
<blockquote>
<p>其中第一个问题需要在每次integrate之前执行<code>pod install</code>；第二个问题是由于Ruby的编码问题导致的，这两个问题的统一解决方案是给Bot添加一个prebuild script，步骤如下： 1. Edit Bot…  2. Triggers 3. Click ‘+’, select ‘Pre-Integraation Script’<br>具体的脚本内容为：<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/pre-script.jpg" alt><br>下面对这个脚本做一个解释说明:<br>(1). 第2行是用来查看脚本（也就是Server）当前的环境<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/set.jpg" alt><br>(2). 第4行是切换到项目所在目录，目录地址可以从环境的PWD变量获得<br>(3). 6-8行是用来解决第2个问题的<br>(4). 第10行来执行<code>pod install</code></p>
</blockquote>
<h3 id="脚本上传到蒲公英"><a href="#脚本上传到蒲公英" class="headerlink" title="脚本上传到蒲公英"></a>脚本上传到蒲公英</h3><p>   增加一个Post-Integration Scripts<img src="http://image.iosprogrammer.hongbility.com/XCode-Server-CI/post_integration_scripy.jpg" alt="post_integration_script"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.iosprogrammer.tech/XCode-Server-CI/" data-id="ckcezpvju000rkcs6q9aicv47" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/Apple开发文档/">Apple开发文档</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/日期Date和时间Time/">日期Date和时间Time</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/react-native/">react-native</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/其他/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/直播/">直播</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书/">读书</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/读书/《Effective-Objective-C-2-0》/">《Effective Objective-C 2.0》</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书/数据结构与算法分析/">数据结构与算法分析</a></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/DSAA-1-1/">引论</a>
          </li>
        
          <li>
            <a href="/Read-Effective-Objective-C-2-0-2/">读《Effective Objective-C 2.0》（二）</a>
          </li>
        
          <li>
            <a href="/Read-Effective-Objective-C-2-0-1/">读《Effective Objective-C 2.0》（一）</a>
          </li>
        
          <li>
            <a href="/Programming-With-ObjC/">OC编程基础</a>
          </li>
        
          <li>
            <a href="/KVC-KVO/">KVC/KVO 总结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 施治昂<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>